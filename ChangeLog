2009-07-31  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* NEWS: Bump for 2.2.3 release.

2009-07-28  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/mmcifformat.cpp: Fix PR2824247 and 2824502,
	Contributed by Raik Brinkmann.

2009-07-28  Craig James <cjames@emolecules.com>

	* src/kekule.cpp Rewrote expand_kekule(), making it much simpler
	to understand.  Original algorithm had bugs and was very hard to
	follow.

2009-07-20  Chris Morley

	* src/formats/smilesformat.cpp: make the description of -xh more
	informative: it retains explicit hydrogen.
	
	* src/formats/fastsearchformat.cpp: in the second phase the SMARTS
	from both the -s option and (optionally) with -S from a file now
	retains its explicit hydrogen, to allow lack of substitution to be
	specified.
	
	* src/formats/xml/cmlformat.cpp: can now read vibrational
	frequencies and rotational constants as well as writing them.

2009-07-15  Daniel Leidert

	* configure.in: Fixed tr1/memory detection (broken in r3072).
	* doc/babel.1: Fixed hyphen used as minus sign.

2009-07-13  Chris Morley

	* src/formats/fingerprintformat.cpp: set initial nbits=0 (default)
	and remove the setting of FP4 as the default fingerprint. 
	(FastsearchFormat remained at FP2.) OBPlugin derived classes have
	a built-in mechanism for setting defaults.
	
2009-07-08  Chris Morley

	* src/transform.cpp(OBMol::ClassDescription) Change description of -p so that GUI 
	takes pH parameter.
	 
2009-07-08  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/openbabel-java.i: Added support for foreach loops using the
	Iterators.

2009-07-08  Chris Morley

	* windows-vc2005/OBCommonFormats/OBCommonFormats.vcproj,
	OBMoreFormats.vcproj: add outformat, molproformat, vaspformat
	(still not gamessukformat because of need for regex)
	
	* windows-vc2005/babelconfig.h: update version to 2.2.2
	
2009-07-08  Chris Morley
	
	* src/formats/gaussformat.cpp: small change to parsing to prevent
	crash on some files.

2009-07-06  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* data/Makefile.am, data/Makefile.in: Only build data headers if
	Perl is present.

	* Change __CYGWIN__ ifdef to also include MINGW.

2009-07-06  Chris Morley

	* src/dlhandler_win32.cpp: omit call to GetModuleHandle and just 
	obtain exe path by calling GetModuleFileName with a zero handle.
	MSVC build works again but a better solution is needed. 

2009-07-05  Tim Vandermeersch

	Make sure there is only one PluginMap for each plugin type. (Fixes
	cygwin builds, all formats  are now shown when running babel
	-H). Also added some cygwin specific code to dlhandler_win32.cpp
	to find the plugin path (..\lib\openbabel\BABEL_VERSION).

2009-07-01  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/generic.cpp (OBRingData): Fix bug in ring iterators,
	reported by Fredrik. PR#2815025.
	
	* test/iterators.cpp: Unit test for it.

2009-07-01  Noel O'Boyle  <baoilleach@gmail.com>

	* AUTHORS: Added my name

2009-06-27  Chris Morley <c.morley@gaseq.co.uk>

	* src/formats/xml/cmlformat.cpp: in reading <property> check that
	dictRef not found before reading title.
	Prevent crash if <symmetry> not read correctly.
	
	When writing <property> use dictRef rather than title if attr
	is namespaced.
	
	* src/math/vector3.cpp: sometimes needs #include <float.h>
	
2009-06-27  Chris Morley <c.morley@gaseq.co.uk>

	Make parsing of SMILES files stricter, following discussion on
	mailing list.
	* src/formats/smilesformat.cpp(Read Molecule):
	lines starting with # are ignored; lines starting with whitespace
	terminate (except with -e option); illegal chars reported;
	when using OBConversion::Convert(), the components of a SMILES reaction
	are output if it is a valid reaction with non-null reactant and product.
	
	(OBSmilesParser::SmiToMol): the string parameter is made const. This
	simplifies its use, e.g. can use substr. Similar changes would be useful
	elsewhere in OB. 
	 
	* src/formats/rsmiformat.cpp: re-written because of smilesformat changes.
	Now handles multiple reactants and products.

2009-06-27  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/zipstream*: Add support for tellg() / seekg(). Improves
	support for compressed mol2 files (although still bugs
	there). Positions from tellg() & seekg() mirror uncompressed data.

	* test/zipstream.cpp: New test to check if tellg/seekg support
	works.

2009-06-25  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/kekulize.cpp: Use SMARTS pattern "[aR3]" to determine if
	*any* atoms dictate a fused ring analysis. Fixes problem with
	perylene.

	* test/files/*.smi: Add perylene as a test example.

	* src/builder.cpp (GetNewBondVector): Fix part of PR#2811932 from
	Avogadro. Make sure adding hydrogens to carboxylic acid always
	occurs trans to the other oxygen atom.

	* src/data.cpp: Don't consider all sp3 hydrogens as O-, instead
	leave this for phmodel protonation. Fixes PR#2785237.

2009-06-24  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/mopacformat.cpp: Read and write translation vectors,
	if available.

	* src/formats/gaussformat.cpp: Ditto

	* src/generic.cpp (OBUnitCell): Make sure to set the space group
	to P1 by default and after FillUnitCell.

2009-06-22  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/generic.cpp: Fix unit cell when setting possibly zero
	translation vectors ( e.g. PR#1961604).

2009-06-21  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/chains.cpp: Fix for PR#2691618. When writing
	hydrogen atoms without chain names, make sure there are never
	spaces.

	* src/mol.cpp, src/atom.cpp: Test for assigning atoms and
	molecules to themselves. PR#2698096. Thanks to Pierre-Louis.

	* src/bondtyper.cpp: Add oxime functional group assignment:
	PR#2793910.

	* src/kekulize.cpp: Additional cleanups. Should be more accurate
	across a wide range of ring systems. Fixes PR# 2705497 and
	PR#1814248. For fused rings (e.g., C60) uses old algorithm.

	* test/files/nci.smi: Add test cases for PR above.

	* src/phmodel.cpp: Fix PR#2802980. Allow single-atom charge
	transformations.

2009-06-20  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/kekulize.cpp (expandcycle): Rewritten as cleaner recursive
	function. Look for largest possible aromatic cycle, including
	handling fused "figure 8" ring systems.

2009-06-19  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/kekulize.cpp (expandcycle): Fix PR#2705497. Kekulize has
	problems with fused aromatic rings joined by a non-aromatic
	ring. Make sure when expanding aromatic cycles that we only accept
	atoms which are in the *same* ring from OBMol::GetSSSR().

	* test/*: Update with recent changes.

2009-06-18  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/Python/README, scripts/csharp/README: Minor updates

2009-06-16  Noel O'Boyle  <baoilleach@gmail.com>

	* windows-vc2005/OBCSharp and CSharp files in scripts: Separate .NET
	and Mono SWIG files. Move .NET files to windows-vc2005. Update
	relevant files.

2009-06-14  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/obconversion.cpp (Read): If we used ReadFile, close the file
	after an error.

2009-06-14  Chris Morley <c.morley@gaseq.co.uk>

	* src/formats/inchiformat.cpp: InChI adds an implicit H to H and 
	represents H2 with one implicit H. Since H does not have implict H
	in OB, need to treat as special	cases.
	Fixes #2794908, where H was written wrongly to InChI and H2 read
	wrongly.
	
	* windows-vc2005/libinchi.dll,libinchi.lib: replaced by libstdinchi.dll
	and libstdinchi.lib
	* windows-vc2005/OBInchi/OBInchi.vcproj: updated for new inchi version.

2009-06-14  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/python/pybel_pyN.x.py: Use OBBuilder instead of the
	gen3d operation. 

2009-06-14  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/inchiformat.cpp, src/formats/inchi102: Backport the
	InChI 1.02 standard code.

2009-06-14  Noel O'Boyle  <baoilleach@gmail.com>

	* src/kekulize.cpp: In an aromatic ring with two nitrogens, one a
	pyrrole-type, the other a pyridine-type, ensure that the pyrrole-type
	N donates 2 PI electrons. Fixes PR#2711501

2009-06-14  Chris Morley <c.morley@gaseq.co.uk>

	* src/ops/fillUC.cpp: Tidy up the Description so that it is more
	suitable for the GUI.
	
	* windows-vc2005/gen3D/gen3D.vcproj: add fillUC.cpp to build.

2009-06-13  Chris Morley <c.morley@gaseq.co.uk>
	
	* src/formats/mdlformat.cpp: Read V property line.
	Put contents into a OBPairData with attribute "AtomValue"
	attached to the OBAtom, and, if the -av option is NOT set, 
	also interpret as a partial charge.
	Fix for #2805389

2009-06-08  Michael Banck  <mbanck@gmx.net>

	* src/formats/gamessformat.cpp (ReadMolecule): Tighten match for
	frequencies.

	*  src/formats/gamessformat.cpp (ReadMolecule): Support imaginary
	frequencies.

2009-06-07  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* test/Makefile.am: Remove kekule.cpp used as an internal test.

2009-06-05  Noel O'Boyle  <baoilleach@gmail.com>

	* src/math/vector3.cpp: Reenable defensive checks in calculation of
	angle between two vectors. Prevents bug where dp is slightly greater
	than 1.0 under certain conditions.

2009-06-05  Noel O'Boyle  <baoilleach@gmail.com>

	* src/builder.cpp: Prevent partial matching. The code currently
	doesn't handle this.

2009-06-05  Noel O'Boyle  <baoilleach@gmail.com>

	* src/builder.cpp: Skip SMARTS patterns that are too big to match.
	Smaller performance boost.
	
2009-06-02  Noel O'Boyle  <baoilleach@gmail.com>

	* src/builder.cpp: Only iterate over the unique SMARTS matches and
	stop once all ring atoms have been assigned. Performance win.
	
2009-05-29  Michael Banck  <mbanck@gmx.net>

	* src/formats/gausszmatformat.cpp (ReadMolecule): Account for negative
	variable reference in dihedral angles, patch by Hugh Chaffey-Millar.
	Fixes PR#2798297.
	
2009-05-28  Michael Banck  <mbanck@gmx.net>

	* src/formats/gausszmatformat.cpp (ReadMolecule): Fix reading of
	dihedral angles, patch by Donnie Berkholz <dberkholz@gentoo.org>.

2009-05-27  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/openbabel-python.i: Allow access to OBBuilder and matrix3x3

2009-05-19  Michael Banck  <mbanck@gmx.net>

	* src/formats/gaussformat.cpp (ReadMolecule): Add parsing of NMR
	isotropic shifts.  Patch by David C. Lonie.  Fixes PR#2787088.

2009-05-12  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/generic.cpp (OBUnitCell::FillUnitCell): Update with code
	from Avogadro. Now should handle duplicate atoms.

2009-05-04  Michael Banck  <mbanck@gmx.net>

	* src/formats/moldenformat.cpp (ReadMolecule): Read in atom
	coordinates via [FR-COORD] block if no atoms have been read
	previously.  Fixes PR#2786716.

	* src/formats/gamessformat.cpp (ReadMolecule): Fix parsing of
	intensities.  Keep on reading displacements even if there is only a
	single one.  Rewritten normal coordinates parsing.  Fixes PR#2782132.

2009-05-01  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* data/element.txt, data/element.h: Update atomic radii with
	consistent sets from recent publications.

2009-04-27  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* include/openbabel/molchrg.h, include/openbabel/internalcoord.h,
	include/openbabel/typer.h, include/openbabel/chains.h,
	include/openbabel/descriptor.h, include/openbabel/atomclass.h,
	include/openbabel/parsmart.h, include/openbabel/grid.h: 
	Improved forward declarations, thanks to Noel's python script.

2009-04-26  Michael Banck  <mbanck@gmx.net>

	* src/formats/moldenformat.cpp (WriteMolecule): New method,
	implementing atom coordinates and vibrations.  Set flags() to
	WRITEONEONLY for now.

	* src/formats/moldenformat.cpp (ReadMolecule): Do not care about case
	of vibration header tag for the displacements.  MOLPRO writes
	upper-case "Vibration", Molden writes lower-case "vibration".
	
	* src/formats/moldenformat.cpp (BOHR_TO_ANGSTROM, ANGSTROM_TO_BOHR):
	New definitions.  
	(ReadMolecule): Use them.
	(WriteMolecule): Likewise.

	* src/formats/moldenformat.cpp (ReadMolecule): Do not continue to next
	line when a block is finished as the current lineBuffer already
	consists of the next [KEYWORD].

	* src/generic.cpp (GetNumberOfFrequencies): Fix return value.
	* src/formats/moldenformat.cpp (WriteMolecule): Adjusted.

	* src/formats/moldenformat.cpp (Description): Updated.

	* src/formats/moldenformat.cpp (WriteMolecule): Do not set intensities
	to zero if none are present.

2009-04-23  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* include/openbabel/obiter.h (OpenBabel): Add forward declaration
	of OBRing and OBRingData suggested by Anton Simakov.

2009-04-22  Noel O'Boyle  <baoilleach@gmail.com>

	* include/openbabel/rotor.h: #ifndef SWIG added due to problems
	compiling the CSharp bindings

2009-04-22  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/Makefile.am: Fix some conditional compiles. Should
	help fix compile problem reported with 2.2.1 on Cygwin by Igor
	Filippov.

2009-04-21  Noel O'Boyle  <baoilleach@gmail.com>

	* src/obiter.cpp: Bugfix for off-by-one error in OBMolAtomBFSIter.

2009-04-21  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/ops/gen3d.cpp: Use ConjugateGradients for the final
	optimization to give improved coords.

	* src/bond.cpp (SetLength): Fix bug uncovered by Marshall
	Levesque. When two atoms are at the same position, move slightly
	to prevent invalid (NaN) coordinates.

	* src/builder.cpp: New code for handling 2D molecules, spurred in
	part by a request by Marshall. Uses and improves on code from Avogadro.

	* configure.in, configure, CMakeLists.txt: Bump version number to 2.2.2b1.

2009-04-14  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/qchemformat.cpp (ReadMolecule): Fix tokenize mistake
	when reading Q-Chem vibrational intensities.

2009-04-11  Michael Banck  <mbanck@gmx.net>

	* src/formats/outformat.cpp (ReadMolecule): Added MOLPRO output
	file detection.

2009-04-08  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/rotamer.cpp, src/math/spacegroup.cpp, src/mol.cpp,
	src/formats/smilesformat.cpp, src/formats/pdbformat.cpp,
	src/formats/MCDLformat.cpp, src/formats/xml/cmlformat.cpp: 
	Compiler warnings and cppcheck complaint fixes.

2009-04-08  Michael Banck  <mbanck@gmx.net>

	* src/formats/gaussformat.cpp (ReadMolecule): Adjust normal modes
	parsing when Raman intensities are present.  Fixes PR#2728543.

2009-04-07  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/smilesformat.cpp: Fix compile error. Make sure to
	cast NULL in a vector constructor.

	* src/formats/CMakeLists.txt: Add Michael's Molpro format.

	* src/forcefield/forcefieldmmff94.cpp: Fix errors in PR#2741658
	and PR#2741669, reported by  Tushar Jain.

2009-04-07  Michael Banck  <mbanck@gmx.net>

	* src/formats/molproformat.cpp (ReadMolecule): Added dipole 
	moments.

2009-04-07  Michael Banck  <mbanck@gmx.net>

	* src/formats/nwchemformat.cpp (ReadMolecule): Added frequencies
	and IR intensities support.  Fixes PR#2728437.

	* src/formats/moldenformat.cpp (ReadMolecule): Added frequencies
	and IR intensities support.  Closes PR#2737715.

	* src/formats/molproformat.cpp: New file.  Closes PR#2731625.
	* src/formats/Makefile.am: Updated.
	* src/formats/Makefile.in: Regenerated.

2009-04-06  Noel O'Boyle  <baoilleach@gmail.com>

	* src/formats/smilesformat.cpp: Handle cis/trans symbols correctly
	during reading and writing. Uses Tim's stereochemistry code which I
	inserted into the start of the file. Some notes about the code:
	(1) The legacy code did not set cis/trans bonds in rings. Don't know
	why, but I didn't change this for the moment.
	(2) The series of cis/trans symbols in an output SMILES string is
	canonical in the sense that the first symbol in any independent
	stereo system is always a forward slash.
	(3) Cis/trans symbols for ring openings/closures are shown for the
	digit attached to the double bond. (I recommend that this be part of
	the OpenSMILES specification.)

2009-03-26  Noel O'Boyle  <baoilleach@gmail.com>

	* src/formats/smilesformat.cpp: Use UINT_MAX for unassigned values
	instead of -1

2009-03-22  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/pdbformat.cpp: Corrected patch from Pierre-Louis to
	ensure 80-character CONECT records.

	* CMakeLists.txt, scripts/CMakeLists.txt: Backport changes to
	build script modules from trunk.

2009-03-22  Noel O'Boyle  <baoilleach@gmail.com>

	* src/formats/smilesformat.cpp: Added some extra logic to SMILES writer
	for cis/trans bonds. Fixes a number of stereochemistry inversions.

2009-03-22  Noel O'Boyle  <baoilleach@gmail.com>

	* src/formats/smilesformat.cpp: Rewrote the SMILES parsing code to set
	entries in atom4refs directly, rather than adding to the end of the
	current atom4refs.

2009-03-20  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/smilesformat.cpp: Fix for previous commit on 2009-01-10.
	"ChiralSearch vectors were too small. Should address PR#2498047."
	Only increase size -- don't throw away data with resize() call.

2009-03-19  Noel O'Boyle  <baoilleach@gmail.com>

	* src/formats/smilesformat.cpp: Canonical smiles were inverting
	the stereochemistry in the case of ring closure bonds on the chiral
	centre. Fixed by changing approach to use original OBChiralData, and 
	parity function as suggested by Tim.

2009-03-17  Noel O'Boyle  <baoilleach@gmail.com>

	* src/formats/smilesformat.cpp: Canonical smiles were copying the
	Clockwiseness of the original smiles. This was correct 50% of the
	time. Now it works out the correct Clockwiseness based on the
	rearrangement of the groups. Fixes PR#2581919.

2009-03-16  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/pdbformat.cpp: Patch from Pierre-Louis to fix
	problem with multiple bonds in CONECT records. Fixes PR#2680300.

2009-03-07  Daniel Leidert <daniel.leidert@wgdd.de>

	* include/iconv.h, src/formats/xml/iconv.h, src/strncasecmp.c: Fixed
	FSF address.

2009-03-02  Daniel Leidert <daniel.leidert@wgdd.de>

	* doc/babel.1, doc/obchiral.1, doc/obconformer.1, doc/obenergy.1,
	doc/obfit.1, doc/obgen.1, doc/obgrep.1, doc/obminimize.1,
	doc/obprobe.1, doc/obprop.1, doc/obrotamer.1, doc/obrotate.1,
	doc/roundtrip.1: Prevent hyphenation of URLs. Fixed an mdoc issue.

2009-03-02  Daniel Leidert <daniel.leidert@wgdd.de>

	* src/formats/smilesformat.cpp: Correct use of sprintf().
	http://lists.debian.org/debian-devel/2008/12/msg01079.html

2009-03-02  Chris Morley

	Added xtcformat,pqrformat,opendxformat to Visual Studio build.
	Could not add gamessukformat because it uses <regex.h>
	and did not have time to find a workaround (Boost probably).
	 
2009-03-01  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/residue.cpp, src/fingerprint.cpp, src/zipstreamimpl.h,
	src/obconversion.cpp, src/dlhandler_unix.cpp,
	src/formats/rxnformat.cpp, src/formats/fchkformat.cpp,
	tools/babel.cpp, include/openbabel/xml.h,
	include/openbabel/obconversion.h,
	include/openbabel/obmolecformat.h, include/openbabel/data.h:
	Fix #includes to handle GCC-4.3 and 4.4. Thanks to Rathann
	Mierzejewski.

	* src/pointgroup.cpp, src/formats/xtcformat.cpp: Remove calls to
	exit() uncovered by Rathann.

2009-02-27  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/mol.cpp (Separate): Fix crash with Separate
	(PR#2553217). Currently uses defensive programming. This
	particular test file seems to have problems. 

2009-02-24  Marcus D. Hanwell  <marcus@cryos.org>

	* src/grid.cpp: Fixed some off by one errors in the way the max vector
	and spacing were calculated. More work is needed to make this work
	with grids aligned along arbitrary axes.

2009-02-27  Kevin Shepherd <kshepherd1@users.sourceforge.net>
	
	* src/formats/acrformat.cpp, src/formats/carformat.cpp
	src/formats/gamessformat.cpp, src/formats/mmcifformat.cpp: Compile
	warnings and minor additions to format information.

2009-02-22  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/python/examples/testpybel.py, openbabel-python.i: Just
	discovered a regression in latest SWIG. It didn't rename the bool()
	method, with the result that all Python iterators were failing. It
	turns out that this isn't necessary in the first place, so we can
	workaround. I've added a test to testpybel.py to check for any
	problems in future.

2009-02-20  Chris Morley
	
	* windows-vc2005/Distribution/NSISScriptToCreateInstallerOBF.nsi:
	env var BABEL_DATDIR wasn't being overwritten, so now deleted first
	
	* windows-vc2005/OBCommonFormats/OBCommonFormats.vcproj:
	removed atomrecord.cpp

2009-02-20  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/qchemformat.cpp: Fix painful crash with Q-Chem 3.2
	output files when trying to parse vibrations.

2009-02-19  Noel O'Boyle  <baoilleach@gmail.com>

	* Windows Installer: Some changes to how environment variables are set
	to play nicer with the Python extensions. Bumped up version number.
	* babelconfig.h: Bumped up version number reported by (Windows) babel
	* scripts/python/examples/testpybel.py: Minor correction

2009-02-19  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/python/pybel_py3.x.py: Docstring correction
	* scripts/python/pybelapi.html: Update
	* scripts/python/examples/testpybel.py: Improve coverage

2009-02-18  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/python/pybel_py2.x.py, pybel_py3.x.py: Synch with cinfony.
	Long overdue.

2009-02-13  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* scripts/Makefile.am, scripts/Makefile.in: Fix: don't attempt to
	build Java or C# unless appropriate configure flags were set.

2009-02-12  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/gamessformat.cpp, src/formats/mopacformat.cpp,
	src/formats/gaussianformat.cpp, src/formats/qchemformat.cpp:
	Import vibrational data from several QM formats.

	* src/formats/cifformat.cpp: Fix problems reading CIF files with
	empty tags. Can lead to a crash.

2009-02-10  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/forcefields/forcefielduff.cpp: Fix crash with OOP
	calculations (e.g., C(O)(=O)C.

	* src/formats/fchkformat.cpp: Use 16-character fields for
	coordinates to handle Q-Chem fchk files.

	* src/formats/smilesformat.cpp: Fix problem with bracketing every
	atom. Logic was wrong.

	* src/formats/qchemformat.cpp: Change formatting of NMR strings.

2009-02-05  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* include/openbabel/bond.h: Add "friend OBMol" to allow OBMol to
	unset flags on bonds.

	* src/mol.cpp (EndModify): Unset ring bond membership. Fixes bug
	#2568349.

	* src/formats/pdbformat.cpp: Add more warnings for strange ATOM
	records, contributed by Pierre-Louis.

2009-01-29  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* data/element.txt, data/element.h: Change maxbonds for P to 6
	(e.g. PF6-).

	* src/formats/smilesformat.cpp: Mark coordinated water molecules
	as [OH2] to address PR#2505562.

	* src/formats/cifformat.cpp: Assign formal charges to halides and
	alkali when coordinated to a water molecule.

	* src/formats/pdbformat.cpp: Add -ac option to ignore CONECT
	records, contributed by Izhar.
	
2009-01-23  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/forcefields/forcefielduff.cpp: Ensure H-O-H, H-S-H, and
	similar bond angles are done correctly. Fixes PR#2527588.

	* src/formats/pdbformat.cpp: Further refinements to parsing ATOM
	records, contributed by Pierre-Louis Bonicoli for PR#2 27225.

	* configure.in, acinclude.m4, configure: Properly check for gzip
	support. Fixes PR#2527272.

	* src/formats/smilesformat.cpp: Add a check for atoms with unusual
	valence (e.g., B with >3 bonds, C with 5, etc.). As requested for
	CIF translation.

	* src/formats/cifformat.cpp: Turn off automatic formal
	charges. Add a pass to look for typical ions and correct their
	formal charges.

	* data/atomtyp.txt: Add implicit valence and hybridization rules
	for most main-group elements.

	* src/ops/gen3d: Add a cleanup step with MMFF94 or UFF, including
	quick conformer searching. Should provide better results for most
	people.

	* src/builder.cpp: Add new function GetCorrectedBondVector() which
	scales new bonds based on elements provided and bond order (e.g.,
	similar to OBBond::GetEquibLength).

2009-01-22  Noel O'Boyle  <baoilleach@gmail.com>

	* windows-vc2005/Distribution/CheckInstallerScript.py,
	NSISScriptToCreateInstallerOBF.nsi: Update Python script to check for
	.prm files, and update installer to include MACCS.txt and missing .prm
	file.

2009-01-21  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/builder.cpp (Build): Make sure all bonds are copied into the
	newly-built molecule.

2009-01-19  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/cifformat.cpp: Fix for PR#2100215. Difficult bug -- file is
	missing a ';' on line 189. Other CIF programs had difficulty,
	including CIFTOOLS. Handle such non-standard files by issuing
	warnings when a ; line is not properly terminated and we find a
	new tag.

	* data/atomtyp.txt: Add an external type for O-H hydrogens for
	Tinker/MM2. Solves PR#1839274.

2009-01-18  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* data/fragments.txt: Expanded ring template database -- 2500 of
	the most frequent rings (including three-membered rings like
	cyclopropane or epoxides). Fixes PR#2043319.

2009-01-16  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/dlhandler_unix.cpp (openLib): Handle error reporting here --
	which will allow more informative messages to users, rather than
	just "did not load properly."

	* src/obconversion.cpp: Disable error messages, as per above.

	* src/parsmart.cpp: Remove some unused code, and add comments
	towards support of fragment SMARTS, e.g. (*).(*).

2009-01-14  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/pdbformat.cpp, src/formats/pqrformat.cpp: Patch
	contributed by Pierre-Louis Bonicoli PR#2503113. Take elements
	from the PDB 'element column' in preference to guessing based on
	atom type names (which are unreliable).

2009-01-14  Noel O'Boyle  <baoilleach@gmail.com>

	* windows-vc2005/OBPythonOBF/OBPythonOBF.vcproj: Minor fix to
	outdir (had trouble with paths with spaces)
	* windows-vc2005/OBCSharp/OBCSharp.vcproj: Moving to Swig 1.3.37
	* scripts/csharp/example.py: Partial revert of r2833 to bring back my
	IronPython example script

2009-01-14  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/python/pybel.py split into pybel_py2.x.py, pybel_py3.x.py:
	Adding support for Python 3.
	* scripts/openbabel-python.i, scripts/python/examples/testpybel.py,
	scripts/python/setup.py, windows-vc2005/OBPythonOBF/setup.py: Adding
	support for Python 3.
	* windows-vc2005/OBPythonOBF/OBPythonOBF.vcproj: Moving to SWIG
	1.3.37 (need to specify -outdir).

2009-01-12  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/gzmatformat.cpp: Address PR#2056697 for Gaussian
	z-matrix with embedded numbers (no variables) or no "Variables:"
	line.

2009-01-10  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/smilesformat.cpp: Address crash in SMILES import
	with chiral ring closures. ChiralSearch vectors were too
	small. Should address PR#2498047.

	* configure.in, scripts/Makefile.am: Check for javac and jar at
	configure time. Do not run them unless present. Solves PR#2426622.

2009-01-09  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/forcefields/forcefielduff.cpp,
	src/forcefields/forcefielduff.h: Add support for 5-coordinate
	and other unusual coordination environments (including lone pairs
	for hypervalent species). Not perfect, but much better than
	before.

	* src/formats/outformat.cpp: Add comments about single bonds and
	bond orders (which are followed by all QM output formats).

	* src/formats/gamessformat.cpp: Add patch from Albert DeFusco for
	GAMESS EFP fragments. PR#2484103.

2008-12-31  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/python/setup.py: Bump to 1.4
	* windows-vc2005/setenv.txt, windows-vc2005/OBPythonOBF/obpython.bat,
	setup.py, openbabel_postinstall.py (deleted), OBPythonOBF.vcproj: Bump
	to 1.4, make separate configurations for different Python versions,
	only install the .pyd and .py files

2008-12-30  Noel O'Boyle  <baoilleach@gmail.com>

	* windows-vc2005/Distribution/NSISScriptToCreateInstallerOBF.nsi:
	Updated to install the Java bindings as well as several missing data
	files. Also removed the old NSIS script.
	* windows-vc2005/Distribution/CheckInstallerScript.py: Double click
	this Python script to perform some sanity checks of the files
	installed and uninstalled by the NSIS script installer

2008-12-30  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/java/OBTest.java, README: Finish the move to using
	openbabel_java.so, rather than openbabel.so

2008-12-28  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/openbabel-java.i: Move to openbabel_java.so or .dll, rather
	than openbabel.so or .dll (breaks Linux Java bindings temporarily) to
	avoid clashes with other scripting language dlls
	* windows-vc2005/OBJava/OBJava.vcproj: Move to openbabel_java.dll and
	correct hard-coded path to Java include directories

2008-12-28  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* configure.in, src/formats/Makefile.am: Update checking for zlib
	and compiling pngformat.

2008-12-27  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/openbabel-python.i: (1) Accessing SetData now raises an
	Exception pointing the user to CloneData instead, (2) Ignore some
	new shadowed classes and methods, (3) Copy some global variables from
	cvar into the main namespace

2008-12-17  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/java/README, OBTest.java: More fixes to docs, and replaced
	the test file with something more substantial.

2008-12-17  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/openbabel-csharp.i: Added support for casting to different
	data types, and added ignore for OBMol::SetData (use CloneData instead) 

2008-12-15  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/csharp/README: Minor corrections

2008-12-14  Noel O'Boyle  <baoilleach@gmail.com>

	* configure.in: Conditional compile of CSharp bindings (only for
	enable-maintainer-mode) if mcs is found
	* scripts/java/README: Small corrections
	* scripts/Makefile.am: Compile the CSharp bindings into a .NET
	assembly
	* scripts/csharp/example.py, example.cs, README: Instructions for
	compiling the CSharp bindings, as well as example C# and IronPython
	programs to show its use

2008-12-13  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/outformat.cpp: New format to read files with
	extensions .dat, .log, .out and try to guess the format based on
	contents. Currently works with many GAMESS, Gaussian, MOPAC,
	Q-Chem, Jaguar, and MPQC files.

2008-12-13  Noel O'Boyle  <baoilleach@gmail.com>

	* src/formats/Makefile.am: Make build of pngformat.la dependent on
	presence of zlib.h, fixes PR#2012669.

2008-12-13  Noel O'Boyle  <baoilleach@gmail.com>
	
	* scripts/Makefile.am,in, scripts/ruby/README: The Makefile should not
	be trying to build the Ruby extensions (at least, none of the others
	do). I've updated the README to	describe how to use the OpenBabel
	build tree to build the extension, rather than relying on an
	installed OpenBabel.

2008-12-12  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* data/element.txt, data/atomtyp.txt: Minor changes. Allow boron
	to have 4 bonds and adjust implicit valence for several elements.

	* src/typer.cpp: Fix for PR#2017902 -- bug introduced by r2578 in
	detecting guanidinium C atoms.

2008-12-01  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/pdbformat.cpp: Add support for reading CRYST1
	records, contributed by Francois-Xavier Coudert. PR#2343128.

2008-11-22  Chris Morley
	
	* src/ops/loader.cpp: do not remove comments after 4th line of
	an entry in plugindefines.tx. SMARTS uses '#'!
	
	* src/ops/optransform.cpp: revamp parsing.
	
	* src/phmodel.cpp(OBChemTsfm::Init): correct bug in which some
	kinds of transform were not taken into account when checking
	whether there was anything to do.

2008-11-23  Noel O'Boyle  <baoilleach@gmail.com>

	* OBCSharp: (1) Changed name of dll to openbabelcsharp.dll to avoid
	clashes	with other scripting languages in future, (2) Added Matt's
	Assembly Info, (3) Added Matt's signed key, (4) Updated install
	instructions for IronPython usage

2008-11-22  Geoff Hutchison  <babel@geoffhutchison.net>

	* src/formats/Makefile.am: Update to fix PR#2022153 -- don't build
	InChI format if --disable-inchi is picked.

	* configure.in, *: Update for 2.2.1 version numbering and current
	autotools bug fixes.

2008-11-21  Geoff Hutchison  <babel@geoffhutchison.net>

	* src/data.cpp (GetAtomicNum): Fix bug with patch supplied by
	Wayne Volkmuth (PR#2289021). Crashes with 3-character element.

	* include/openbabel/atom.h: Patch from Wayne Volkmuth to ensure
	atomic numbers are unsigned (i.e., values above 127 are
	OK). PR#2289628.

	* src/formats/pdbformat.cpp: Patch from Francois-Xavier Coudert to
	write CRYST1 records when unit cell data is present. PR#2023510.

	* src/generic.cpp (OBUnitCell::GetLatticeType): Fix bug reported
	(and patched) by Jonathan Coome.

2008-11-05  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/formats/pqrformat.cpp: Apply patch from Mikael Lund to read in
	partial charges and radii. The radii are added to the atoms as
	OBPairData with attribute "Radius".

2008-10-31  Chris Morley

	* src/formats/getinchi.cpp: prevent failure when input contains
	"InChI>InChI=...", which actually occurred in an SDF file.

2008-10-22  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefields/forcefield*.h: Fix MakeNewInstance().

2008-10-17  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp: in OBForceField::GetGrid(), calculate grid size 
	before adding probe atom. 

	* src/formats/atomrecord.cpp: Interpret HG11, HE11, ... as hydrogen
	atoms at position gamma and epsilon. Previously these atom ids were
	interpreted as Hg and He atoms. (Fixes: #2002557 & #2026265)

2008-10-16  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefields/forcefieldmmff94.cpp: Remove _logbuf[100] (Fixes
	#2022120)

	* src/builder.cpp: fix bugs with linear molecules. (Fixes #2119034
	& #2013814)

2008-10-16  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/openbabel-python.i: Added casting methods for all of the
	different types of OBGenericData

2008-10-15  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefields/forcefieldmmff94.cpp: Accept both forms for sulfon
	and nitro groups: N(=O)O, N(=O)=O, S(O)O, S(=O)(=O) are now all valid
	and typed correctly.

2008-10-11  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefields/forcefielduff.cpp: Fix minor output bug reported by
	Tapani Kinnunen (Fixes: #2144142)

2008-10-11  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp, src/forcefields/forcefieldmmff94.cpp: Remove
	redefinition of _logbuf[BUFF_SIZE+1] (This and Chris' previous commit 
	fixes: #2150390)

	* src/forcefield.cpp: Fix OBForceField::GetAtomTypes() and
	OBForceField::GetPartialCharges()

	* src/forcefield.cpp: Check OBForceField::_validSetup flas before
	doing anything that may cause a segfault. (Fixes: #2059299)

	* src/forcefields/forcefield*.h: Set _validSetup to false in
	constructor.

	* CMakeLists.txt, src/config.h.cmake: apply patch from Christian
	Ehrlicher to fix cmake MSVC compilation.

2008-10-10  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/openbabel-perl.i: Replaced the C++ iterators by Perl classes
	which can be used for iteration natively in Perl.

2008-10-10  Chris Morley

	* src/fingerprints/finger3.cpp: rearrange
	a) so that div and div-- do not appear in same statement, which
	is illegal (Andrew Dalke).
	b) replace ternary conditional, which did not compile in gcc
	It's a pity the Microsoft compiler did not warn about either of these.
	
	The preferred file format no longer needs a comment as first line.

	* src/formats/chemkinformat.cpp(ReadReactionQualifierLines):
	correct error similar to b) above flagged in bug #2150390	 

2008-10-04  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp: Fix OBForceField::GetAtomTypes() and
	OBForceField::GetPartialCharges()
	
2008-09-26  Chris Morley

	* src/formats/fastsearchformat.cpp: Improved error message when
	 target is SMARTS rather than SMILES. Bug #2129841
	 
	* src/formats/getinchi.cpp: small mod to avoid occasionally seeing
	 a "quoted" InChI when there isn't one. (There ARE none in the
	 wild.)

2008-09-26  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/openbabel-csharp.i: Updated with Matt's comprehensive
	changes to increase compatability with CSharp
	* windows-vc2005/OBCSharp/IronPython_Instructions.txt: Set
	BABEL_DATADIR when using IronPython
	* windows-vc2005/OBCSharp/obdotnet.bat: Copy the data directory when
	making the distribution

2008-09-26  Noel O'Boyle  <baoilleach@gmail.com>

	* windows-vc2005/OBCSharp/obdotnet.bat: Update the CSharp build so
	that it automatically creates a distribution for release
	* windows-vc2005/OBCSharp/IronPython_Instructions.txt: How to use the
	OBDotNet distribution from IronPython

2008-09-23  Chris Morley
	
	* src/fingerprints/finger3.cpp: enhanced PatternFP which can take
	extra parameters and file format.
	
	* data/MACCS.txt; data for new MACCS fingerprint (from RDKit)
	
	* data/plugindefines.txt; definition of MACCS fingerprint.
	
2008-09-20  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp: Check OBForceField::_validSetup flas before
	doing anything that may cause a segfault. (Fixes: #2059299)

	* src/forcefields/forcefield*.h: Set _validSetup to false in
	constructor.

2008-08-16  Noel O'Boyle  <baoilleach@gmail.com>

	* windows-vc2005/setenv.txt: Add environment variable PYTHON_DIR 
	* windows-vc2005/OBPython/*: Update the Python build so that it
	automatically creates a Python distribution.

2008-08-16  Noel O'Boyle  <baoilleach@gmail.com>

	* windows-vc2005/setenv.txt: Add environment variable CSHARP required
	for compiling the .NET bindings
	* windows-vc2005/OBCSharp/*: Update the CSharp build so that it
	automatically creates the OBDotNet.dll assembly (namespace OpenBabel)
	(thanks to Matt Sprague for the command line)

2008-08-16  Noel O'Boyle  <baoilleach@gmail.com>

	* windows-vc2005/setenv.txt: Sets some environment variables needed
	for compiling the SWIG bindings, and then starts OpenBabelOBF.sln. The
	user should copy setenv.txt to setenv.bat locally before editing the
	variable values.
	* windows-vc2005/OBJava/*: Update the Java build so that it generates
	a jar file with the correct org/openbabel structure.

2008-08-15  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/Makefile.am: Correct errors in generation of jar file

2008-08-15  Noel O'Boyle  <baoilleach@gmail.com>

	* windows-vc2005/openbabel.sln: Removed from repository
	* windows-vc2005/*/*.vcproj: Set optimization to /O2 and whole program
	optimization to true

2008-08-14  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/Makefile.am: Generate a jar file for the Java SWIG bindings
	* scripts/java/README, OBTest.java: Updated

2008-07-19  Michael Banck  <mbanck@gmx.net>

	* src/formats/opendxformat.cpp: Rename theGaussianCubeFormat global
	variable to theOpenDXCubeFormat.

	* src/formats/CMakeLists.txt: Added opendxformat to formats.

2008-07-11  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/openbabel-ruby.i: Updated the interface file to allow access
	to OBFingerprint. Needed to ignore DescribeBits, which was causing
	problems.

2008-07-08  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* include/openbabel/fingerprint.h, src/fingerprint.cpp: Make
	sure that __builtin_popcount is only exposed for GCC 3.4 or later.

2008-07-19  Michael Banck  <mbanck@gmx.net>

	* src/formats/opendxformat.cpp: Rename theGaussianCubeFormat global
	variable to theOpenDXCubeFormat.

	* src/formats/CMakeLists.txt: Added opendxformat to formats.

2008-07-11  Chris Morley

	* windows-vc2005/Distribution/NSISScriptToCreateInstallerOBF.nsi
	Set Env Var BABEL_DATADIR to installation directory. Safer than 
	relying on finding the data files in the current directory.
	
	* include/openbabel/builder.h, src/builder.cpp: check whether
	fragments.txt is loaded successfully and if not return false
	from Build().

2008-07-09  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/python/pybel.py: Bug fix for make3D for linear molecules.
	Fixes bug 2014055. Minor doc fixes. Remember to close output files
	in Molecule.write().

2008-07-03  Noel O'Boyle  <baoilleach@gmail.com>

	* windows-vc2005/OBPythonOBF/setup.py: Update setup.py to include
	forcefield files when installing

2008-07-03  Michael Banck  <mbanck@gmx.net>

	* scripts/Makefile.am (dist-hook): Do not fail if make distclean does
	not succeed in the perl and ruby directories.
	* scripts/Makefile.in: Regenerated.

	* data/Makefile.am (table_DATA): Added plugindefines.txt.
	* data/Makefile.in: Regenerated.
	* data/CMakelists.txt: Removed space-groups.xsl from to_install.

	* test/cmlreadfile.cpp: Read files from TESTDATADIR, not relative to
	current directory.
	* test/wrapper.sh: Use ${srcdir}, not ${top_srcdir} to set
	$BABEL_DATADIR.
	* test/wrapper.sh: Run inchi tests from source directory if ${srcdir}
	is non-empty.  Set and export TESTDATADIR.

2008-07-03  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/ruby/README: Updated build instructions

2008-07-03  Michael Banck  <mbanck@gmx.net>

	* src/CMakelists.txt (LIBRARY_VERSION): New variable.
	* src/CMakelists.txt (BABEL_LIBRARY): Set VERSION property to
	${LIBRARY_VERSION}.
	
2008-07-03  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/Makefile.am, src/CMakeLists.txt: Update SONAME to 3 for
	version 2.2.0 release.

2008-07-03  Marcus D. Hanwell  <marcus@cryos.org>

	* CMakeLists.txt: Relaxed the CMake requirement to 2.4.7.

	* include/openbabel/griddata.h, src/griddata.cpp: Added three new
	getter functions to get the x, y and z axes.

	* src/CMakeLists.txt: Updated to use SONAME 3.

	* include/openbabel/mol.h, src/mol.cpp: Added extra arguments to
	GetMolWt, GetExactMass and GetSpacedFormula to optionally disable
	implicit hydrogens. Defaults to preserve existing behaviour.

	* src/grid.cpp: Fixed the Init function to apply padding correctly.

2008-07-02  Marcus D. Hanwell  <marcus@cryos.org>

	* include/openbabel/grid.h, src/grid.cpp: Updated the documentation
	and a few fixes to the function prototypes.

        * include/openbabel/griddata.h, src/griddata.cpp: Updates to the
	documentation, added a GetMaxVector function and made SetLimits const
	fixes for the vector3 form.

	* CMakeLists.txt, src/CMakeLists.txt, src/formats/CMakeLists.txt:
	Reduce the number of version variables floating around to only those
	that are used...

	* CMakeLists.txt, src/formats/CMakeLists.txt: Use a versioned plugin
	directory as autotools does.

2008-07-02  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/locale.cpp: Add string.h header, from patch by Marcus
	Hufgard. Allows compilation with GCC 4.3.1 on Linux:
	PR#2008642.

	* src/formats/gausszmatformat.cpp: Add definition of
	strcasestr if not defined. Solves compile problems on Cygwin.

	* configure.in, src/config.h.in, configure: Check for
	rpc/xdr.h needed for xtcformat.

	* src/formats/xtcformat.cpp: Use new HAVE_RPC_XDR_H #define.

	* src/formats/smilesformat.cpp: Bring back FIX format, killed
	during merger of canonical and standard smiles.

	* src/rotamer.cpp, src/locale.cpp, src/base.cpp,
	include/openbabel/atom.h, include/openbabel/locale.h,
	include/openbabel/forcefield.h,
	include/openbabel/pointgroup.h,
	include/openbabel/fingerprint.h: Doxygen updates for 2.2.0.

2008-07-02  Chris Morley

	* src/descriptor.cpp(PredictandSave): don't duplicate an existing
	OBPairData. Was crashing when adding a property that was already
	present. 
	 
	* src/formats/smilesformat.cpp(StandardLabels): A couple of vectors now
	have 2147483647 pushed when the atom is H, to match the situation with
	canonical ordering, rather than ending up with a size smaller than the
	number of atoms. I assume 2147483647 = 2^31-1 is just a big number?
	Fixes bug 1999348.

2008-07-01  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/kekulize.cpp (expandcycle): Add more flexible API for
	expandcycle.

	* scripts/perl/Makefile.PL: Update from Noel for PR#2007797.

	* Makefile.*, configure.*: Update for 2.2.0 release.

2008-07-01  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/formats/atomrecord.cpp: Fix bug where arginine hydrogen atoms
	where read as dummy Xx atoms. (#2002557)

	* src/formats/pdbformat.cpp: 1) Write the chain number. 2) Don't
	rearrange atom ids when writing. (see chains item 2)

	* src/chains.cpp: 1) Serine OG is now given the correct atom id.
	2) produce correctly ordered atom ids (see pdbformat item 2)
	3) fix for cyclic peptides (have no NTer)
	4) water, ions and ligands are all placed in the ' ' chain now and get
	unique residue numbers.
	5) partially identified residues are merged with the atoms not used to
	identify them and the resids is set to UNK (hetflags is also set to
	true) (e.g. CSD in 1LWF = CYS with two O's on S )

2008-07-01  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/python/pybel.py: Make pybel use CloneData instead of SetData
	
2008-07-01  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/openbabel-python.i: Make the BFS Iterator return two values,
	the Atom and the depth
	
2008-07-01  Chris Morley

	* data/atomtyp.txt: remove IMPVAL entry for silicon to fix
	bug #1911590. (I thought I had already done this.)
	
	* windows-vc2005/babelconfig.h: add macro which apparently
	disables native tr1 in recent VC++ 2008, so that boost version
	will be used. Step towards getting tit to compile on this
	platform but probably not there yet. Not critical for v2.2.0
	release, since Windows compilation should be done from SVN.

2008-06-30  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* Makefile.am: Move cmake to EXTRA_DIST (4 Makefiles for one
	file?)
	* Makefile.in: Regenerated.

	* include/openbabel/base.h, src/base.cpp: New CloneData()
	method to solve PR#2004495 for scripting interfaces.

	* src/Makefile.am, src/Makefile.in: Bump library version for
	2.2 release.

	* src/formats/smilesformat.cpp: Minor fix relating to
	PR#1999348.

	* src/patty.cpp, src/forcefield.cpp, src/oberror.cpp, 
	src/generic.cpp, src/canon.cpp, src/dlhandler_unix.cpp, 
	src/data.cpp, src/grid.cpp, src/mol.cpp: Minor fixes from
	static code analysis. Test for empty() instead of size().


2008-06-30  Michael Banck  <mbanck@gmx.net>
	
	* src/Makefile.am (EXTRA_DIST): Added config.h.cmake.
	* src/Makefile.in: Regenerated.

	* Makefile.am (SUBDIRS): Added cmake.
	* Makefile.in: Regenerated.
	* cmake/Makefile.am: New file.
	* cmake/Makefile.in: New file.
	* cmake/modules/Makefile.am: Likewise.	
	* cmake/modules/Makefile.in: Likewise.	
	* configure.in (AC_OUTPUT): Added cmake/Makefile and
	cmake/modules/Makefile.
	* configure: Regenerated.
	* acinclude (AM_PATH_XML2): New macro, copied from aclocal.m4.

2008-06-29  Marcus D. Hanwell  <marcus@cryos.org>

	* include/openbabel/math/vector3.h,
	include/openbabel/math/matrix3x3.h: Made the destructors non-virtual,
	fixes Avogadro bug 2005984.

2008-06-27  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* include/openbabel/obiter.h, src/obiter.cpp: Fix
	PR#1901348. Add support for BFS iteration from arbitrary
	atoms.

	* include/openbabel/math/*.h, src/math/*.cpp: Updates to fix
	some GCC warnings.

	* include/openbabel/bond.h, src/bond.cpp: Patch from Steven
	Constable, PR#2004391. Adds SetLength() to move both atoms.

	* include/openbabel/mol.h: Fix for ReserveAtoms() suggested by
	Andrew Dalke.

	* src/formats/mdlformat.cpp: Fix for SKP records, suggested by
	Andrew.

	* src/formats/pdbformat.cpp: Fix for CONECT records for atoms
	with > 4 records (PR#1711154).

2008-06-26  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/parsmart.cpp: Add support for Isotopes in SMARTS. Fixes
	PR#1987729.

	* test/files/nci.smi: Add tests for matching isotopic
	SMILES/SMARTS.

2008-06-23  Chris Morley

	* test/inchiwrite.cpp: add -xn option so that the tests are done without
	the 'recommended' InChI options. wInChI.exe is not yet available
	for InChI 1.02. Needs revisting when it is.

	* src/fingerprint.cpp(FastSearchIndexer): ensure fpid is terminated
	when copied to guard against theoretical problem pointed out
	by Andrew Dalke.

2008-06-21  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/chains.cpp: Assign HOH and ligands to separate residues.
	(#1774776)

2008-06-21  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/formats/atomrecord.cpp: Keep original chain ID (#1760959).

2008-06-21  Carsten Niehaus  <cniehaus@kde.org>

	* src/obutil.cpp: Typo fixes.

	* src/forcefields/[forcefielduff.cpp,forcefieldmmff94.cpp]: Typo fixes

	* src/formats/[mpdformat.cpp,xtcformat.cpp]: Typo fixes
	
	* src/forcefields/*.h: Make ctor explicit.
	
2008-06-20  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/obutil.cpp (CartesianToInternal): Fix PR#1923896 for
	Fenske-Hall z-matrix format. When looking for non-linear
	atoms, don't pick non-bonded >10.0 Angstroms, which cause
	problems with FH (and other) fixed format z-matrices.

	* src/mol.cpp (ConnectTheDots): Fix for PR#1813502 for
	existing bonds getting deleted by ConnectTheDots. Make sure to
	preserve all original connections from PDB.

	* src/formats/pdbformat.cpp (ReadMolecule): Fix for PR#1985681
	with virtual bonds still built into a PDB file.

2008-06-20  Chris Morley

	* include/openbabel/locale.h, src/locale.cpp: extra #includes
	
	* windows-vc2005/babelconfig.h: define strdup. Version to 2.2.0
	
	* include/openbabel/obiter.h: trivial change to avoid compiler warning
	
	* src/fingerprints/finger3.cpp: do singel SMARTS match, as suggested by
	Ernst-Georg Schmid

	* windows-vc2005/OBError/OBError.vcproj: add locale.cpp

2008-06-20  Noel O'Boyle  <baoilleach@gmail.com>

	* Revert of r2347: I had set eol:native instead of eol-style native.

2008-06-19  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/fingerprint.cpp: Contribution from Andrew Dalke for
	improved speed using GCC.

2008-06-18  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* include/openbabel/locale.h, src/locale.cpp: New OBLocale class
	to centralize calls to setlocale/uselocale. Should solve strange
	segfault on Linux with freelocale.

	* include/openbabel/obiter.h, src/obiter.cpp: Add depth tracking
	for DFS and BFS iterators. Addresses PR#1901348.

2008-06-18  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/formats/*.cpp: Checked all files for their use of tokenize().
	All added lines are like:
	
	if (vs.size() < 1) return false; // timvdm 18/06/2008 

	* include/openbabel/obiter.h, src/obiter.cpp: Reimplement
	FOR_PAIRS_OF_MOL. Do not build a list of all pairs in the constructor,
	but find the pairs while iterating. This is faster and requires less
	memory.

	* include/openbabel/forcefield.cpp: Add SetParameterFile().

	* src/forcefields/forcefieldmmff94.*: Use the new SetParameterFile().
	Add a global definition for MMFF94s.

	* data/*: Add MMFF94s parameters.

	MMFF94s: Same functional form, only torsion and oop parameters are
	different. To see the difference, you can try to minimize alanine with
	both force fields, MMFF94s will give a planar nitrogen while MMFF94
	will not.

2008-06-17  Noel O'Boyle  <baoilleach@gmail.com>

	* Reverted r2535 except for changes to scripts/perl/Makefile.PL
	* scripts/openbabel-python.i: Updated SWIG interface file to ignore 21
	methods of each std::vector created. This should substantially reduce
	the size of the wrapper code.

2008-06-16  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/formats/xtcformat.cpp: make confs a std::vector too. Was double
	*confs = new double[natoms * 3].

2008-06-16  Chris Morley

	* include/openbabel/oberror.h, src/oberror.cpp:
	add a parameter to ThrowError to allow error messages to be 
	output only once (although they are all logged.). The default
	behaviour is as at present.
	
	* src/formats/inchiformat.cpp: default output uses the "recommended"
	set of InChi options. -xn option uses no options as at present.
	
	Add -xl option to output the InChI log - only once for multiple
	molecules.
	
	* include/openbabel/fingerprint.h, src/formats/fingerprintformat.cpp:
	Make DescribeBits error message appear only once.
	
	* src/mol.cpp(GetTitle): make variable title static to avoid returning
	a pointer to a temporary variable. But this might cause problems with
	multiple molecules unless the title is captured in the calling code 
	before getting the next. Until this is done properly, add a
	test so that the problem can only occur with multi-line titles.

	* src/formats/smilesformat.cpp: add option to output explicit hydrogen
	form like [CH3][CH3].
	**** The SMILES output currently crashes with  Nc1nc(O)c2nc[nH]c2n1
	but I haven't tracked this down.****
	
	* src/ops/addpolarh.cpp: add simple op for Feature Request #1995162 
	
	* windows-vc2005/gen3D/gen3D.vcproj,
	windows-vc2005/OBMoreFormats/OBMoreFormats.vcproj: update

2008-06-15  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/formats/cssrformat.cpp, src/formats/MCDLformat.cpp,
	src/formats/mmcifformat.cpp, src/formats/balstformat.cpp,
	src/formats/chemdrawcdx.cpp, src/formats/boxformat.cpp,
	src/formats/unichemformat.cpp, src/formats/yasaraformat.cpp,
	src/formats/zindoformat.cpp, src/formats/gromos96format.cpp,
	src/formats/xedformat.cpp: sprintf --> snprintf

	* src/chains.cpp, src/pointgroup.cpp, src/rotor.cpp: Some more sprintf
	-> snprintf (I don't expect any problems here, but just in case...)

	* include/openbabel/forcefield.cpp, src/forcefield.cpp,
	src/forcefields/*: Replace sprintf(_logbuf, ...) with
	snprintf(_logbuf, BUFF_SIZE). 

2008-06-14  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/chain.h, src/chain.cpp: Replace:
	1) malloc/free with new/delete
	2) new T[n] with std::vector (where possible)
	Original code still there as comments, can be removed once reviewed.

	* src/parsmarts.cpp: Replace malloc/free with new/delete.
	Replace realloc(array, size) with:
	  T *tmp = new T[size];
	  copy(array, array + old_size, tmp);
	  delete [] array;
	  array = tmp;


2005-06-14  Marcus D. Hanwell  <marcus@cryos.org>

	* src/formats/xtcformat.cpp: Some modifications to the xtc format to
	use C++ structures.

	* CMakeLists.txt, src/formats/CMakeLists.txt: Some build system
	updates to build format plugins as modules.

	* src/ops/loader.cpp: GCC 4.3 fix - cstdlib needed for free calls.

2008-06-14  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* include/openbabel/atom.h, src/atom.cpp: Add OBAtom::Duplcate()
	which will copy everything except the internal index.

	* include/openbabel/generic.h, src/generic.cpp: Add
	OBUnitCell::FillUnitCell() method to create space-group-defined
	atoms. Uses OBAtom::Duplicate.

2008-06-13  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/forcefield.cpp: Change GetGradient(..., int terms
	= ...) to GetGradient(..., int /*terms*/ = ...). (comiler warning:
	unused parameter).

	* src/forcefields/*.cpp: Change i->Compute<gradients>() to i->template
	Compute<gradients>().

	* include/openbabel/builder.h, src/builder.cpp: Make most functions 
	static.

	* src/mol.cpp: Use OBBuilder::GetNewBondVector() in AddHydrogens(). 

2005-06-13  Marcus D. Hanwell  <marcus@cryos.org>

	* src/formats/mdlformat.cpp: Use static_cast in the min function.

2008-06-13  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/typer.cpp: Add a special case for guanidinium carbon
	atoms. (We may need additional special cases.)

	* data/atomtyp.txt, data/atomtyp.h: Change pattern for N3+ to
	match any 4-valent N, regardless of whether the formal charge has
	been set.
	
	* src/kekulize.cpp (NewPerceiveKekulizeBonds): Give up on
	kekulization when we find "cycles" with < 3 atoms. Sybyl mol2
	labels some atoms as aromatic that aren't in rings. Fixes
	PR#1965566 and PR#1784204.

	* include/openbabel/mol.h, src/mol.cpp (GetTitle): Add a parameter
	to replace newlines with spaces. Fixes PR#1984742.

	* configure.in: Check for xlocale.h, locale.h, and uselocale functions.

	* src/data.cpp, src/ops/loader.cpp, src/ops/optransform.cpp,
	src/descriptors/groupcontrib.cpp, src/builder.cpp,
	src/forcefields/forcefieldmm2.cpp,
	src/forcefields/forcefielduff.cpp,
	src/forcefields/forcefieldmmff94.cpp,
	src/forcefields/forcefieldghemical.cpp, src/obconversion.cpp:
	Change locale using uselocale if available and reset it to the
	afterwards. Update of previous change, suggested by Benoit.

	* include/openbabel/bond.h, include/openbabel/atom.h,
	src/bond.cpp: Fixes for "const" correctness. It's now possible to
	get the bond length of a const OBBond.
	
2008-06-10  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/data.cpp, src/ops/loader.cpp, src/ops/optransform.cpp,
	src/descriptors/groupcontrib.cpp, src/builder.cpp,
	src/forcefields/forcefieldmm2.cpp,
	src/forcefields/forcefielduff.cpp,
	src/forcefields/forcefieldmmff94.cpp,
	src/forcefields/forcefieldghemical.cpp, src/obconversion.cpp:
	Change locale before parsing files to use "C" numeric locale and
	reset it to the original state afterwards. Should solve PR#1785463.

	* src/obiter.cpp: Fixes from Izhar for DFS and BFS iterators.

	* src/mol.cpp, include/openbabel/mol.h: Added iterative
	GetFragment method to augment Separate(), contributed by Izhar.

2008-06-07  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/phmodel.cpp (OBPhModel::CorrectForPH): Fix PR#1835204. Allow
	SMILES to have pH-correction. (i.e., only check for automatic
	formal charges for molecules with dimension > 0).

	* src/formats/mdlformat.cpp: Add a check for EOF before reading,
	as suggested by Izhar.

	* src/formats/smilesformat.cpp: Add initial pass at "standard"
	SMILES labels.

	* Doxygen, include/*.h, src/*.cpp: Update doxygen documentation.

2008-06-07  Chris Morley

	* src/formats/fingerprintformat.cpp: correct folding error message
	and prevent description of bits when fingerprint is folded.
	
	* src/formats/smilesformat.cpp: change -xc to -xa (for atomclass)
	
	* windows-vc2005/OBFS/OBFS.vcproj,windows-vc2005/OpenBabelOBF.sln
	add dependency of OBCommon to Fastsearch project

2008-06-06  Chris Morley

	* src/formats/smilesformat.cpp: SMIFormat was being hidden because
	its constructor was being called again when its derived class
	CANSMIFormat was made. Now both derived from a base class with most
	of the functionality. 
	Modified Description() and made same for both.
	Removed DEFAULTFORMAT flag (MolFormat already is).
	
	* include/openbabel/mol.h: add back #include <float.h> which was
	somehow removed in the last commit and is need for Windows build.
	
	* windows-vc2005/OBCommonFormats/OBCommonFormats.vcproj: remove
	cansmilesformat.cpp
	
2008-06-06  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/phmodel.h, src/phmodel.cpp: Changes to OBPhModel, 
	use the	Henderson-Hasselbalch formula to determine protonation states.
	Updated doxygen documentation to give some info about the method.

	* include/openbabel/mol.h, src/mol.cpp: Use it.
	OBMol::AddHydrogens(bool polar=false, bool correctForPH=true, double
	pH=7.4)

	* data/phmodel.txt: Add extra column with pKa values.

	* test/phmodel.cpp: Unit test for the new phmodel. The two errors are
	Glutamate (4.0 used, should be 4.3) and Lysine (10.0 used, should be
	10.1). I'll probably have to add a visited list so we can only
	transform an atom once, transformations would then have to be ordered
	by decreasing complexity. But the errors are very small and this is a
	major improvement compared to what we had.

2008-06-05  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* scripts/openbabel-python*, scripts/python/*: Split the python
	bindings into three pieces for improved compilation. Should solve
	PR#1905826.

	* src/obconversion.cpp: Add stdlib.h to hopefully solve
	PR#1985717.

	* configure.in, configure: Update to build libinchi by default.

	* src/formats/smilesformat.cpp: Incorporate cansmilesformat
	code. Now all SMILES export goes through Craig's cleaner,
	less-buggy code. Currently all SMILES are canonically
	ordered. Need to add code to provide non-canonical ordering for "regular."
	
	* src/formats/Makefile.* src/formats/CMakeLists.txt: Update for above.

2008-06-05 Chris Morley

	* src/obconversion.cpp(Convert): test for Cntl Z to terminate
	commandline input rather than \n (a blank line).
	Fixes bug 1984660: piping with titleless mol files.
	Commandline data input always was clunky and is even clunkier now.
	Being able to pipe is more important. 
	
	* src/forcefield.cpp:In line 2535 replace 'dafault:' by 'default:' 
	This may have a real effect and needs to be checked.
	
	* include/openbabel/bitvec.h, src/canon.cpp,src/dlhandler_win32.cpp,
	src/forcefield.cpp, src/formats/cansmilesformat.cpp,
	src/formats/gamessformat.cpp, src/formats/gaussformat.cpp,
	src/formats/KFReader.c,src/formats/mol2format.cpp,
	src/formats/msmsformat.cpp, src/pointgroup.cpp,
	src/tokenst.cpp:
	Tidy to reduce compiler warnings: remove or comment out unreferenced
	variables; size_t decalation replaces some int or unsigned;
	!=NULL added to avoid implict const char* to bool conversion 
	
	* windows-vc2005/OBMoreFormats/OBMoreFormats.vcproj: change to
	project build order as pointed out by peterennis bug #1985163


2008-06-04  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/mopacformat.cpp: Fix for PR#1978982 with reading
	Mopac 2007 force calculations.

	* src/formats/atomrecord.cpp: Fix SetAtomID as reported in
	PR#1838095. Thanks to Marc Lasson for bug report and fix.

	* src/formats/adfformat.cpp, src/formats/Makefile.am: Add KFReader
	and ArrayList code contributed under LGPL by SCM, Inc. for
	improved ADF binary support.

2008-06-04 Chris Morley

	* include/openbabel/mol.h: include float.h so that isinfinite
	is handled properly in Windows
	
	Deficiencies raised by Andrew Dalke
	
	* src/fingerprint.cpp: Error message if attempting to fold to 
	less than size of unsigned int.
	
	* src/formats/fingerprintformat.cpp(WriteMolecule) Error message 
	when parameter of -xN option (fold) is negative.
	
	* src/formats/fastsearchformat.cpp(WriteChem Object):
	Error message if more than one input file.
	
	Delete the outputstream after deleting the index, which is when
	it is written. Sometimes a fs file made without a specified name 
	was empty.
	
	* tools/babel.cpp: change indentation on help text
	
	* windows-vc2005/OpenBabelOBF.sln: another go at getting debug and
	release configurations right. The scripting interfaces need to be
	explicitly enabled before building if they are required. (I get
	tired of waiting for them.)

2008-06-04  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/residue.cpp (GetResidueNumber): Fix bug reported by Izhar
	Wallach.

	* src/forcefields/forcefielduff.cpp: Fix error reported by Chris
	Morley with Microsoft compiler -- don't duplicate loop variable names.

2008-06-03  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* data/atomtyp.txt, data/atomtyp.h: Add hybridization rules for
	Si, Al, Ge, As, Se, and Te. (Atom typing and valence rules need to
	be generalized.) Fixes problems with adding hydrogens to Si
	uncovered in Avogadro.

2005-06-02  Marcus D. Hanwell  <marcus@cryos.org>

	* src/atom.cpp, src/mol.cpp: Added extra checks in AddHydrogens for
	finite hydrogen coordinates. Also added some extra checks in the
	GetNewBondVector function to check for sane numbers.

2008-06-02  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* Makefile.am, Makefile.in: Correct small automake typo with
	"autoconf" libtool macro directory.

	* configure: Regenerated using autogen.sh.

	* include/openbabel/grid.h: Fix compiler warning -- make sure to
	return values in all methods.

	* src/forcefield.cpp: Fix compiler warning "default" not "dafault"
	in switch statements.

	* src/formats/qchemformat.cpp, src/formats/gamessformat.cpp,
	src/formats/gaussformat.cpp, src/formats/fchkformat.cpp: Add
	support for reading dipole moments using OBVectorData.

2008-06-01  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/formats/atomrecord.cpp: Call OBAtom::ForceImplH() for all atoms.
	Loading a pdb file and calling OBMol::AddHydrogens() added only on
	hydrogen.

2005-05-31  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/openbabel-csharp.i: Fixed two of the three remaining
	std::vectors based on examples found in Krugle code search

2005-05-30  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/openbabel-csharp.i: Fixed most of the std::vectors by using
	weird macro described in std_vector.i in the SWIG distribution

2005-05-30  Marcus D. Hanwell  <marcus@cryos.org>

	* configure, configure.in: Stop the wx-config test being called when
	the wx-gui is not enabled - bug 1979603.

2005-05-30  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/openbabel-csharp.i: Added header file to SWIG wrapper. Also
	removed several of the vector templates. These don't seem to be
	handled correctly by SWIG (should report bug to them).

2008-05-30  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp: OBFFConstraints::Clear(), clear all the bitvecs.
	ConjugateGradientsTakeNSteps(), set _grad1[] to (0,0,0) when atom is
	fixed and not _gradientPtr (_grad1 is used for linesearch).
	Setup() & SetConstraints, check if SetupCalculations needs to be
	called. This is the case when the ignored bitvecs of both
	OBFFConstraints are different.

	* include/openbabel/forcefield.h: OBFFConstraints::GetIgnoredBitVec().
	Used in Setup() & SetConstraints().

2008-05-28 Chris Morley

	* windows-vc2005/OBCSharp/OBCSharp.vcproj,
	* windows-vc2005/OBJava/OBJava.vcproj,
	* windows-vc2005/OpenBabelOBF.sln
	Build release versions even in Debug mode.
	Use env var JAVABASE, e.g."C:\Program Files\Java\jdk1.6.0_03"
	so that there is no dependence in the code on the installed
	Java version. (Is there a standard variable for this?)
	
	* windows-vc2005/OBMoreFormats/OBMoreFormats.vcproj:add adfformat

2008-05-28  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* scripts/openbabel-perl.i, scripts/perl/Makefile.PL: 
	Fix up Perl scripting. Now works on Mac OS X and appears to have
	clean converisons via "make test." Fixes PR#1795155 and 1881688.

	* src/formats/adfformat.cpp (OBT41Format::ReadMolecule): Convert
	from zyx format in ADF files to xyz in Open Babel for cubes. Only
	keep cubes which have actual data.

2005-05-28  Marcus D. Hanwell  <marcus@cryos.org>

	* src/formats/xml/cmlformat.cpp: Fixed PR 1975137 - atoi, strtol
	require null terminated strings.

2008-05-27  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/obiter.cpp: (same as Chris' commit, but let's do the same for angles)
	Make sure to always set _i, even when _vtorsion is empty.
	Otherwise OBMolTorsionIter::bool() will compare _i to _vtorsion.end() which
	caused a segfault on windows. Fixes Avogadro windows bug #1972244.

2008-05-27 Chris Morley

	* src/obiter.cpp(OBMolTorsionIter::OBMolTorsionIter):
	prevent crash when _vtorsion is empty. Was affecting builder
	with small molecules.

2008-05-26  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/Makefile.* src/formats/Makefile.*: Add versioned install
	directories for formats. Fixes PR#1905093.

	* src/formats/hinformat.cpp: Fix PR#1947913 with hang during HIN
	reading.

2005-05-26  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/openbabel-csharp.i: Creating SWIG wrapper for C#
	* windows-vc2005/OpenBabelOBF.sln, OBJava, OBCSharp: Creating projects
	for OBJava and OBCSharp

2008-05-24  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/builder.cpp: Fix bug. CorrectStereoAtoms was not checking the 
	size of refs, before doing refs[0]...refs[3] (thanks Noel)

2008-05-25 Chris Morley
	
	windows-vc2005/examples: new folder with an example project
	for OBF build. Will replace /template.

2008-05-24  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp: Setup(), delete TorsionData before using 
	FOR_TORSION_OF_MOL. (fixed #1954233)

	* windows-vc2005/OBCommonFormats/OBCommonFormats.vcproj: Correct
	location for obmolecformat.cpp

2005-05-24  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/java/README: Updated instructions for using Java bindings on
	Linux

2008-05-23  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* windows-vc2005/openbabel.sln: remove non-existing OBPython and test, 
	add template.

	* windows-vc2005/OpenBabelDLL/OpenBabelDLL.vcproj: move obmolecformats 
	from formats to sources.

	* windows-vc2005/template/*.*: Example of a C++ program using openbabel.

2005-05-23  Marcus D. Hanwell  <marcus@cryos.org>

	* include/openbabel/obconversion.h: Removed extra qualification on
	OpenInAndOutFiles which broke compilation here.

2008-05-23 Chris Morley

	* include/openbabel/obconversion.h, src/obconversion.cpp:
	Add OBConversion::OpenInAndOutFiles to aid scripting

2008-05-22  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/mol.cpp: SetTorsion(), move j=*i out of this for loop:
	for (i = atom.begin(), j = *i; ... ; i++, j = *i)
	This was causing weird results in windows (MSVC2005). Thanks 
	to Noel for reporting the bug, this also fixes #1954233 I believe.

2008-05-23 Chris Morley

	* src/formats/xml/cmlformat.cpp: Applied Jean Brefort's patch to fix
	leading spaces on atom refs bug #1965086
	

2005-05-23  Noel O'Boyle  <baoilleach@gmail.com>

	* Pybel: minor fix to test suite for running outside cinfony

2005-05-23  Noel O'Boyle  <baoilleach@gmail.com>

	* Pybel: Synching with cinfony, and getting ready for release as 1.3

2008-05-22 Chris Morley

	* data/atomtyp.txt: remove
	  IMPVAL  [N^2-,N^3-]		2
	and add
	  IMPVAL	[N-]			2
	so that O1S(=O)(=O)[N-]C(=O)C=C1C.[K+] is interpreted correctly.
 
	* src/formats/pngformat.cpp: minor documentation change

2005-05-22  Marcus D. Hanwell  <marcus@cryos.org>

	* CMakeLists.txt: Fixed version string in CMake. Also added policy
	stuff for CMake 2.6 and the option to set the library directory.

2008-05-22  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/mol.cpp: copy OBChiralData for all atoms in operator=.

	* include/openbabel/builder.h, src/builder.cpp: Added
	Swap(...) : swap the position of two substituents (can be used to
	invert chiral centers)
	CorrectAtomChirality(...) : use the (atomreftype) input references to
	make sure the molecule has the right chirality as specified by
	IsClockwise() / IsAntiClockwise().
	CorrectBondChirality(...) : use the IsUp() / IsDown() values to rotate
	the bonds if needed.

2008-05-20  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	Changes from avogadro win32 build:

	* include/openbabel/obutil.h: Change std::min(a,b) into std::min<const
	double>(a,b).

	* src/mol.cpp: OBMol::FindChildren was iterating over an atom's bonds
	in a wrong way.

2008-05-19  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/forcefield.h, src/forcefield.cpp: rename _T to
	_temp. (_T is more likely to be defined elsewhere compared to _temp).

2008-05-17  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* include/openbabel/grid.h, src/grid.cpp,
	include/openbabel/griddata.h, src/griddata.cpp: Some 'const'
	updates.

	* src/formats/adfformat.cpp: Update to use OBGridData rather than
	custom T41Data class.

2008-05-16  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* scripts/java/OBTest.java: Bring back test program.

	* scripts/openbabel-java.i, scripts/openbabel-perl.i,
	scripts/openbabel-ruby.i: Fix script bindings. Now compile
	cleanly. Perl still needs work to pass tests.

	* include/openbabel/math/spacegroup.h, include/openbabel/plugin.h:
	Minor updates for SWIG compatibility.

	* src/formats/Makefile.*: Add xtcformat.cpp.

	* src/formats/xtcformat.cpp: Add rpc/types.h for Mac
	compatibility.

2008-05-16  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/forcefield.h, src/forcefield.cpp: Added functions
	to temporarily ignore or fix an atom. This allows interactive programs
	to use this while drawing (no repulsion between your new atom and the
	fragment you want to connect to. 

	* src/forcefields/forcefield*.cpp: Same

2008-05-16  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/formats/CMakeList.txt: Add xtc format for non-WIN32 platforms.

2008-05-13  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/obconversion.cpp: save the filename in ReadFile (needed for xtc
	format).

2008-05-13  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/formats/xtcformat.cpp: Portable compressed trajectory file
	format. Used by gromacs. Since there is no real API to handle
	trajectories at the moment, ReadMolecule is used. Instead of
	CastAndClear, the OBBase object is only cast to an OBMol object to
	which conformers are added for each frame. Box, step and time are
	currently ignored. Currently read only. (Avogadro implementation)

	* Makefiles: NOT updated yet, from looking at the gromacs source, it
	seems that the XDR stuff needs special handling on windows and I don't
	want to break OB now.

2008-05-13  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/atom.cpp: Replace implementation for 
	bool IsHbondDonor() { return MatchesSMARTS("[$([#8,#7H,#9;!H0])]"); }
	with C++ code for better performance.

2008-05-10  Noel O'Boyle <baoilleach@gmail.com>

	* windows-vc2005/OBPythonOBF/setup.py: Adding missing oberror.dll.

2008-05-07  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/opendxformat.cpp: Bug fixing. Now roundtrips OpenDX
	data from APBS. The format will create an empty OBMol with
	attached OBGridData.

2008-05-06  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* Regenerate autotools build system based on Daniel's updated autogen.

	* include/openbabel/mol.h, src/mol.cpp (DeleteAtom, DeleteBond,
	DeleteResidue): Update to allow the user to free an atom, bond or
	residue (i.e., just remove the atom or bond or residue from the molecule).

2008-05-07  Noel O'Boyle <baoilleach@gmail.com>

	* scripts/python/pybel.py: Synch with cinfony.

2008-05-06  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp: initialize static _constraints to a
	OBFFConstraints object.

2008-05-06  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/parsmarts.cpp: Add if(_pat) before _pat->...(). This was causing
	Avogadro to crash here sometimes.

2008-05-05  Daniel Leidert <daniel.leidert@wgdd.de>

	* autogen.sh: Force aclocal and autoheader to regenerate files to
	avoid timestamp issues (probably not necessary for automake and
	autoconf).

	* include/openbabel/Makefile.am: babelconfig.h is not removed
	automatically. Added it to DISTCLEANFILES.

2008-05-05  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/mol.cpp: Ensure energy is always 0.0.

	* src/formats/gaussformat.cpp: Prevent crash with incorrect partial charges.

	* include/openbabel/base.h, include/openbabel/generic.h: New class
	for 3x3 matrix data (e.g., quadrupole moments).

	* src/formats/adfformat.cpp, src/formats/t41data.h: Initial import
	of Molekel Tape41 support for ADF.

2005-05-04  Marcus D. Hanwell  <marcus@cryos.org>

	* configure.in, src/config.h.in, include/openbabel/forcefield.h: Fixed
	the babelconfig.h file - typo spotted...

2008-05-04  Noel O'Boyle <baoilleach@gmail.com>

	* windows-vc2005/OBPythonOBF/setup.py: Minor changes to install the
	correct OBFs in the Python Windows install.

2008-05-04  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/forcefield.h, src/forcefield.cpp: Make
	OBForceField::_constraints static.

	* include/openbabel/forcefield.h: Add virtual destructors to
	OBFFCalculation2-4.

2005-05-03  Marcus D. Hanwell  <marcus@cryos.org>

	* src/config.h.cmake: Fixed so that TIME_WITH_SYS_TIME is defined.

2008-05-03  Tim Vandermeersch <tim.vandermeersch@gmail.com>
	
	* src/forcefields/forcefieldmmff94.*: Do the same for logging.

	* include/openbabel/forcefield.h, src/forcefields/forcefieldghemical.*,
	src/forcefields/forcefielduff.*,src/forcefields/forcefieldmmff94.*:
	OBFFCalculation has been replaced by OBFFCalculation2,
	OBFFCalculation3 and OBFFCalculation4. This makes the sizeof() smaller
	and improves performance.
	The OBFFCalculation::Compute(bool gradients) is now a template <bool
	gradients> Compute() function. The compiler will generate a Compute
	function with gradients and one without gradients. The E_Bond, ...
	functions are also template functions now. The old functions are still
	available as a wrapper for backwards compatibility. The template
	function is initialized in OBForceField::Energy(bool gradients) by
	calling E_Bond<true>() or E_Bond<false>().

2008-05-01  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* scripts/openbabel-python.i: Add OBBitVec.

2008-05-02  Marcus D. Hanwell  <marcus@cryos.org>

	* CMakeLists.txt: Fixed include directory order.

2008-05-01  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* data/atomtyp.*: Added amidine/guanidine IMPVAL rule (thanks to Steve
	Constable for reporting & fixing the bug).

2008-04-29  Marcus D. Hanwell  <marcus@cryos.org>

	* src/CMakeLists.txt, src/formats/CMakeLists.txt: Updates in order to
	build after obmolecformat.cpp was moved.

2008-04-30  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* autogen.sh, autoconf/: Add macros to work with new libtool 2.2.2.

	* configure.in, configure, aclocal.m4:  */Makefile.in: Use above.

	* src/obmolecformat.cpp: Move from src/formats to facilitate
	external programs creating OBMolecFormat subclasses.

	* src/formats/opendxformat.cpp: New format for OpenDX grids from
	APBS.

2008-04-30  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/mol.h: Add units to documentation for
	GetTorsion/SetTorsion.

	* tools/obrotate.cpp: Total review of the code. Thanks to Josep Maria
	and Noel for pointing out the problems.

	* src/mol.cpp: Added UnsetSSSRPerceived to all OBMol::Delete*()
	functions. (not DeleteConformer(int i), doesn't change rings... )

	* scripts/python/examples/*.py: Added some force field examples. More
	will follow.

	* include/openbabel/bond.h: Add some defensive checks to
	OBBond::GetBeginAtomIdx, OBBond::GetEndAtomIdx and
	OBBond::GetNbrAtomIdx. (closes #1953657)

	* scripts/openbabel-python.i: Added OBForceField::SetLogToStdOut() and
	OBForceField::SetLogToStdErr() to replace SetLogFile(std::ostream
	*pos) in python.

2008-04-29  Marcus D. Hanwell  <marcus@cryos.org>

	* src/CMakeLists.txt, src/formats/CMakeLists.txt: Moved the
	obmolecformat.cpp linkage back to where it was - this works on both
	Windows and Linux and so seems the better solution.

2008-04-29  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp: Torsion constraints are working now.

2008-04-28  Marcus D. Hanwell  <marcus@cryos.org>

	* libavogadro/src/extensions/gaussianinputdialog.cpp: Removed trailing
	white space.

2008-04-28  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefields/forcefielduff.cpp: Added groups and Ignore.

	* src/forcefields/forcefieldghemical.cpp: Added groups and Ignore.

	* src/forcefields/forcefieldmmff94.cpp: OpenMP version of MMFF94. Does
	not affect normal compilation. Only used with GCC options "-lgomp
	-fopenmp".

	* include/openbabel/forcefield.h: Changed _ncoords from int to
	unsigned int. (Fixes some compiler warnings)

2008-04-27 Chris Morley

	* include/openbabel/mol.h, src/mol.cpp(AssignSpinMultiplicity):
	added a parameter which forces no implicit hydrogen. The default
	is false and backward compatible.
	
	* src/mol.cpp(PerceiveBondOrders): added a call to
	AssignSpinMultiplicity which should prevent molecules from
	computational chemistry formats being given implicit hydrogen.

2008-04-25  Noel O'Boyle <baoilleach@gmail.com>

	* data/mr.txt: Based on a comparison with RDKit's Crippen parameter
	text file, identified a single error in the MR value for Me1 (see
	JCICS, 1999, 39, 868) 

2008-04-21 Chris Morley

	* src/descriptors/groupcontrib.cpp(Predict): Make a copy of
	the molecule and add hydrogens before calculating property.
	As recommended by Noel in his blog.

2008-04-22  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/formats/xml/cmlformat.cpp: change line 1810 from 
	s = pUnitCell.GetSpaceGroupName();    to
	s = pUnitCell->GetSpaceGroupName(); 

2008-04-22  Jean Brefort  <jean.brefort@normalesup.org>

	* src/formats/xml/cmlformat.cpp: import/export crystal symmetry.
	* src/math/spacegroup.cpp: fixes a bug related to transform creation.

2008-04-22  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/forcefield.h: Documentation update.
	
	* src/forcefield.cpp: Fixed (X, Y, Z, XYZ) atoms are now checked in
	SteepestDescent and ConjugateGradients and works.
	Enable constraints again. Distance and angles work, torsion still
	needs some attention.

2008-04-21  Marcus D. Hanwell  <marcus@cryos.org>

	* include/openbabel/obconversion.h: Moved the Formatpos typedef
	outside of the class in order to preserve old API call.

2008-04-21 Chris Morley

	* include/openbabel/obconversion.h, src/obconversion.cpp:
	Reinstate a version of OBConversion::GetNextFormat() to prevent
	breaking xchemdraw. Formatpos is defined differently but would
	not be accessed in an application program.

	NEWS, windows-vc2005/OBPythonOBF/Readme.txt:
	Minor documentation changes

2008-04-19  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/forcefield.h, src/forcefield.cpp: Added
	SetupPointer. Added Framework for specifying groups using OBBitVec for
	now until we have OBGroup/OBFragment. Documentation example using
	groups. 
	The *RotorSearch functions should call SetupPointers when they change
	conformer. This will update the pointers to the atom positions in the
	OBFFCalculation(s). This solves some weird results when the rotor
	search functions were used with MMFF94 or ghemical. UFF doesn't have
	this problem because it still uses the vector3 class.

	* src/forcefields/forcefieldmmff94.*: Added SetupPointer.
	SetupCalculations() now checks the intra and inter groups.

	* src/forcefields/forcefieldghemical.*: Added SetupPointer.

2008-04-19  Marcus D. Hanwell  <marcus@cryos.org>

	* include/openbabel/grid.h, src/grid.cpp,
	include/openbabel/griddata.h, src/griddata.cpp: Now using std::vector
	to store data internally. Made safer where possible.

	* src/formats/gausscubeformat.cpp: Cleaned up support for reading in
	multiple cubes - large cube files can now be read in.

	* src/formats/gausscubeformat.cpp: Worked on improvements to the cube
	writing function. It now staggers cubes in the z correctly and I think
	I got the rest of it lining up correctly now. Enabled.

	* configure.in, src/config.h.in: Updates to the auto* build tools,
	added HAVE_GCC_VISIBILITY logic and the defines to use it.

2008-04-15  Noel O'Boyle <baoilleach@gmail.com>

	* windows-vc2005/OBPython: removed
	* windows-vc2005/OBPythonOBF: added setup.py,
	openbabel_postinstall.py, Readme.txt and logo.bmp

2008-04-15 Chris Morley

	* tools/obchiral.cpp, tools/obenergy.cpp, tools/obfit.cpp,
	tools/obminimize.cpp, tools/obmm.cpp, tools/obprobe.cpp,
	tools/obprop.cpp, tools/obsym.cpp:
	don't #include <#include <unistd.h> in Windows build
	
	* windows-vc2005/OBTools.sln, windows-vc2005/OBTools,
	windows-vc2005/OBTools/*.proj: New build files for tools exes

	* windows-vc2005/Distribution/NSISScriptToCreateInstallerOBF.nsi
	Add tools exe files to installer

2008-04-14  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/atomrecord.cpp: Fix from Louis Ricard to handle PDB
	files from platon. An example has been added to the test
	repository.

	* src/formats/gamessukformat.cpp: New format contributed by Jens
	Thomas to support the GAMESS-UK variant.

	* src/formats/moldenformat.cpp, src/formats/msmsformat.cpp: Ensure
	namespace is properly included.

	* tools/babel.cpp: Eliminate some GCC warnings.

	* ltmain.sh, configure.in, configure, */Makefile.*: Upgrade to
	libtool 2.2.x, which offers improved build speed and bug fixes.

2008-04-13  Marcus D. Hanwell  <marcus@cryos.org>

	* CMakeLists.txt, cmake/modules/MacroEnsureVersion.cmake,
	src/config.h.cmake: Added visibility support when using a recent GCC
	compiler.

	* src/CMakeLists.txt, src/formats/CMakeLists.txt,
	src/formats/inchi/CMakeLists.txt: Various fixes to ensure things are
	linked correctly.

	* include/openbabel/obmolecformat.h: Ensured this header includes the
	babelconfig.h header and exports its symbols.

	* src/formats/APIInterface.cpp: Export symbols.

	* src/formats/xml/cmlreactformat.cpp: Removed extra qualifier.

2008-04-10 Chris Morley
	
	* data/atomtyp.txt: revise IMPVAL entries for S. 
	Fixes bug #1938652. Patches a dilapidated program structure...
	
	* test/files/FormulaTest.smi: add S containing species to test above
	
	* windows-vc2005/Distribution/NSISScriptToCreateInstallerOBF.nsi:
	add help file and remove SetOutPath "$DESKTOP" which prevented
	shortcuts starting with the current directory being that of the
	exe file. Data files were not being found.

2008-04-09  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/forcefields/forcefielduff.cpp: Fix issue with C atoms not
	being set for OOP terms. Thanks to Bob Hanson for spotting this.

2008-04-02  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/forcefield.cpp: Remove inline declaration on constraints --
	prevents Python script bindings from compiling.

	* src/formats/hinformat.cpp: Read in partial charges. Fixes
	PR#1931260.

2008-04-01 Chris Morley

	* windows-vc2005/OBPythonOBF/OBPythonOBF.vcproj,
	* windows-vc2005/OpenBabelDLL/OpenBabelDLL.vcproj
	* windows-vc2005/Distribution/NSISScriptToCreateInstallerOBF.nsi
	Updated in minor ways
	
	* windows-vc2005/Projects in this workspace.txt: add OBF build

2008-04-01  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/python/setup.py: Error in my previous commit

2008-03-31  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/forcefield.h, src/forcefield.cpp: Fix conjugate
	gradients. (my previous commit had a bug..)

2008-03-31  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/python/setup.py: Fix for MacOSX to allow compiling against
	the contents of the build tree rather than /usr/local

2008-03-31 Chris Morley

	* src/GUI/OBGUI.cpp, src/GUI/OBGUI.h: Click on menu item copies
	plugin id to clipboard
	
2008-03-29  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefields/forcefieldghemical.cpp,
	src/forcefields/forcefielduff.cpp,
	src/forcefields/forcefieldmmff94.cpp: Don't use Cut-off when disabled.

2008-03-29  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/forcefield.h, src/forcefield.cpp: Implement
	methods to handle cut-offs. Added SetLineSearchType().

	* src/forcefields/forcefieldghemical.*, src/forcefields/forcefielduff.*,
	src/forcefields/forcefieldmmff94.*: Use it.
	
	* tools/obminimize.cpp: Add new options to specify cut-off and linesearch.

2008-03-29 Chris Morley

	* src/formats/inchiformat.cpp: Add output options 
	"include fixed hydrogen layer" and "include bonds to metal"
	as shortcuts to NIST's InChI functionality.
	
	* include/openbabel/obconversion.h: Make default to OUTOPTIONS,
	as IsOptions does. Makes setting most options less cumbersome.


2008-03-28  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* data/UFF.prm: Improved N sp, sp2 atom typing, suggested by Bob Hanson.

	* src/forcefields/forcefielduff.*: Many bug fixes for angle and
	torsion terms, suggested by Bob Hanson (via Jmol implementation).

	* test/files/uffresults.txt: Updated for above changes.

	* configure, configure.in, */Makefile.in: Bump to 2.2.0b5 and
	update build files.

2008-03-27  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* test/files/uffresults.txt: Update UFF results for recent bug fixes.

2008-03-27  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp: Always call SetCoordinates in Setup.

2008-03-27  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/forcefield.h, src/forcefield.cpp: Working
	Newton2NumLineSearch. Used only for SteepestDescent at the moment.

2008-03-26 Chris Morley

	* include/openbabel/parsmart.h, src/parsmart.cpp:
	Fix bug #1906462. If SMARTS pattern contains [H], the matching
	now is done on n explicit hydrogen copy of the molecules. Extra bool
	in struct Pattern and mods to AllocPattern, SMARTSParser, Match.
	Have to be careful with the mods: Match is called more than
	420 times in doing a smi to smi conversion with a SMARTS filter!

2008-03-25  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefields/forcefielduff.cpp: changed anglecalc.zi = ..[0] to
	... [5]. This bug was reported by Bob Hanson in mail.

2008-03-22  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp: Fix LineSearch(*,*) to respect fixed atoms.
	Don't calculate gradient in NumericalDerivative.

2008-03-24 Chris Morley

	* src/formats/gaussformat.cpp: Fix bug #1924342 by looking for
	"Multiplicity" as suggested by Richard West

2008-03-24  Noel O'Boyle  <baoilleach@gmail.com>
	
	* windows-vc2005/OBPython/openbabel.py: Removed from SVN (it is
	created with SWIG as part of the build process)

2008-03-24  Noel O'Boyle  <baoilleach@gmail.com>
	
	* scripts/openbabel-python.i: Added griddata.h

2008-03-23  Noel O'Boyle  <baoilleach@gmail.com>
	
	* scripts/python/pybel.py: First attempts at incorporating the recent
	work by Tim, Geoff and others on geometry optimisation and 3D
	coordinate generation.

2008-03-23  Noel O'Boyle  <baoilleach@gmail.com>

	* scripts/openbabel-python.i: Fix for bug reported by Florian Nigsch.
	The Python iterators didn't correctly handle the case where there was
	nothing to iterate over.

2008-03-22 Chris Morley

	* src/builder.cpp: Slightly cleaner version of yesterdays's change.
	Load data when _fragments is empty.

	* src/formats/gausscubeformat.cpp, src/formats/gausszmatformat.cpp,
	src/formats/mmcifformat.cpp, src/formats/moldenformat.cpp,
	src/formats/msmsformat.cpp:
	Add some flags for Read or Write only, remove duplicate registration
	statements(IDs are not case sensitive), edit Description so options
	appear properly in GUI.
	
	* src/formats/acrformat.cpp, src/formats/chemdrawcdx.cpp,
	src/formats/qchemformat.cpp, src/formats/xml/cdxmlformat.cpp,
	src/formats/mopacformat.cpp, src/formats/msiformat.cpp: 
	Reduce compiler warnings by commenting out unused variables.
	
	* src/obutil.cpp: Remove OBAPI from definitions; only needed in 
	declarations

	* src/ops/gen3d.cpp: Remove error wrap statements (no cerr calls in
	OBBuilder now)
	
	* src/plugin.cpp(Display): remove tab character which was giving error
	messages in wxWidgets menus.
	* windows-vc2005/OBPythonOBF: New project to build Python for OBF
	(multi-DLL) build.
	
	Update Windows OBF build files.

2008-03-22  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/forcefield.h, src/forcefield.cpp: Move GetGrid to
	OBForceField to implement it for all force fields at once.

	* src/forcefields/forcefieldmmff94.*: Remove GetGrid.

	* tools/obprobe.cpp: Implement the obprobe program.

2008-03-22  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/forcefield.h, src/forcefield.cpp,
	src/forcefields/forcefieldmmff94.*: Add GetGrid probe method.

	* tools/Makefile.*, tools/obprobe.cpp: Add obprobe tool, still needs
	to be implemented. (copied from obenergy)

	* tools/obminimize.cpp: Don't call ValidateGradients before
	minimizing, takes long for proteins.
	
	* data/UFF.prm: Fix SMARTS patterns for phosphorus (Bob Hanson)

	* src/forcefields/forcefielduff.cpp,
	src/forcefields/forcefieldghemical.cpp: Move loop for better
	performance.

	* src/forcefields/forcefieldmmff94.*: Make Compute() functions inline,
	some optimization to VDW Compute().

	* src/formats/atomrecord.cpp: Added using namespace std.

2008-03-22  Noel O'Boyle  <baoilleach@gmail.com>
	
	* src/formats/xml/Makefile.am: CML format can now be built without
	shared_ptr, so I removed this dependency (c.f. CM 2008-03-14)

2008-03-21  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/formats/gausscubeformat.cpp: Applied patch from Louis Ricard and
	make it work. Read function is done, write still needs to be done.

2008-03-21 Chris Morley

	* include/openbabel/builder.h, src/builder.cpp:
	Delay parsing of fragments.txt until first use, and then
	do only once, saving in a static variable. This matters for
	gen3D where operation on multiple molecules is common.
	I know OBBuilder is still under development and is not 'my'code;
	please revert if not suitable.

2008-03-21  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/atomrecord.cpp: New file to handle PDB-style atom
	records -- shared between PDB and PQR formats.

	* src/formats/pdbformat.cpp: Use it.

	* src/formats/pqrformat.cpp: Initial support for reading PQR style
	files (i.e., partial charge and VDW radius supplied with
	coordinates).

	* src/formats/Makefile.am, src/formats/Makefile.in,
	src/formats/CMakeLists.txt: Updates for above.

	* src/formats/cansmilesformat.cpp: Fix for bug exposed by Avogadro
	-- sometimes we only have one atom (and no canonical order data).

	* tools/obfragment.cpp: Update to generate new OBBuilder database.

2008-03-20  Carsten Niehaus  <cniehaus@kde.org>

	* src/*.cpp: Typo fixes

	* CMakeLists.txt: Require CMake 2.4.5.
	
2008-03-16  Noel O'Boyle  <baoilleach@gmail.com>
	
	* All .cpp and .h files: Set SVN property svn:eol to native

2008-03-15  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/CMakeLists.txt: Add ops and descriptors subdirectories.

	* src/ops.cpp, src/forcefield.cpp, src/ops/loader.cpp,
	src/ops/optransform.cpp, src/descriptors/cmpdfilter.cpp,
	src/descriptors/smartsdescriptors.cpp,
	src/descriptors/groupcontrib.cpp, src/format.cpp, src/alias.cpp,
	src/forcefields/forcefieldmmff94.cpp, src/formats/MCDLformat.cpp, 
	Change to UNIX line-endings for consistency. (Some files also had
	multiple line formats.)

	* include/openbabel/math/matrix3x3.h,
	include/openbabel/forcefield.h: Move to loop form. Compiler
	loop unrolling is effective, and loops can be vectorized for
	greater speed. 

2008-03-15  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/builder.h, src/builder.cpp: Added Swap function.

2008-03-15  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/builder.h, src/builder.cpp: More robust way to
	determine OBBitVec fragment masks. This is now handled internally and 
	actually checks if a and b (in Connect) don't belong to the same
	fragment. This also fixes the previously not working commit for: 
	c1cc(CC)ccc1

	* src/CMakeLists.txt: Remove groupcontrib.cpp, added some new files.
	Not sure if the ops/ dir is included.

	* data/CMakeLists.txt: Update data files to install.

	* CMakeLists.txt: Change version to 2.2.0b4.

	* include/openbabel/builder.h, src/builder.cpp: Moved some
	functionality from Build to Connect(). OBBuilder now constructs
	molecules with a single pass trough the database.

	* src/forcefield.cpp: Remove debug output.

2008-03-14  Chris Morley

	* src/formats/gausszmatformat.cpp: add replacement function for
	strcasestr, which is not in Visual Studio's library.

	* windows-vc2005/babelconfig.h: #define strcasestr _strcasestr

	* src/formats/mdlformat.cpp, src/formats/xml/cmlformat.cpp:
	Don't output property with attribute "PartialCharges", which isn't
	relevant in these formats. 
	
	* src/formats/xml/cmlformat.cpp: Make compilation of the code that dependends
	on OBReaction(and hence shared_ptr) conditional on HAVE_SHARED_POINTER.
	Means that most of cmlformat.cpp can be used even when HAVE_SHARED_POINTER
	is not defined, and that Noel's change on 2008-03-04 can be reversed
	(although I have not done it).
	
	* src/obconversion.cpp: prevent crash and add error message when multiple
	output files are used with no input file.
	
	* include/openbabel/obutil.h: actually do the reversion, see below
	
	* src/formats/crkformat.cpp, src/formats/inchiformat.cpp: small 
	changes in descriptions (to make GI look better).
	
	* windows-vc2005/Distribution/NSISScriptToCreateInstaller.nsi:
	Add several data files
	
	Update Windows single DLL build files

2008-03-13  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/mol.cpp (Separate): Make sure to throw out any bogus
	OBChiralData. This is much preferable to crashing.

	* src/builder.cpp: Support new fragment.txt format with comments,
	etc.

	* data/*.txt: Update comments and fix minor formatting changes.

	* tools/obgen.cpp: Update to add hydrogens, cleanup geometry,
	perform weighted rotor search, etc. Should produce decent 3D
	structures with MMFF94.

2008-03-11  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/msmsformat.cpp: New format to write input files for
	MSMS (Michael Sanner Molecular Surface) calculation program,
	contributed by Ugo Varetto and the Molekel project.

	* src/formats/moldenformat.cpp: Read input from Molden files,
	contributed by Ugo.

	* src/formats/Makefile.*: Add above.

2008-03-13  Chris Morley

	* include/openbabel/obutil.h: Revert the previous change.
	In Windows there is a min function in the default namespace
	(::min compiles ok). So it is essential that std::min is used.
	It's also better not to have using std; in header files. If
	there is a problem in Avagadro it would be better to find a
	solution there. Maybe a cause for its Windows version to crash?
	 
2008-03-10  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/obutil.h: replaced std::min() with min() and put
	using namespace std at the top of the file. The compiler only gave an
	error for this when compiling avogadro, not openbabel itself.
	(windows)

	* include/openbabel/builder.h: Added OBAPI.

2008-03-10  Jean Brefort  <jean.brefort@normalesup.org>

	* src/formats/cifformat.cpp: export space group if known.
	* src/formats/xml/cdxmlformat.cpp: removed a printf debug instruction.

2008-03-10  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/smilesformat.cpp: Fixes from Craig James. Allow ring closure
	bonds in SMILES to be aromatic. Also check for ring closures in
	ParseComplex.

	* test/files/aromatics.smi: Add test for ring closure bug above.

2008-03-10  Noel O'Boyle <baoilleach@gmail.com>
	
	* test/cmlreadfile.cpp: Commented out the failing test. This is a
	minor bug on Linux.

2008-03-09  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/formats/gausscubeformat.cpp: Read/write multiple cubes. Always
	write in bohr. More error checking in write might be needed.

2008-03-06  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/mol.h, src/mol.cpp: GetEnergy(int) and GetEnergies 
	now use OBConformerData to hold the energies.

	* include/openbabel/forcefield.h, src/forcefield.cpp: GetConformers
	and GetCoordinates attatches OBConformerData to the molecule. Energies
	and Forces are set.

	* src/forcefields/forcefieldmmff94.*: minimize the number of calls to
	atoi(GetType, ...) in Setup functions. Use OBBitVec class to replace
	vector<int> where possible.

2008-03-05  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/mol.cpp: The recent patch from Liu Zhiguo had a bug in
	OBMol::ConnectTheDots(). Inside a loop, NextBond was called without
	checking the return value directly. The return value was being checked
	outside the loop.
	
	while (valCount < bondCount[atom->GetIdx() - 1]) {
	  maxbond = atom->NextBond(l);
	  ...
	  if (!maxbond) // Added
	    break;      // Added
	  valCount++;
	}
	if (!maxbond)
	  break;

2008-03-05  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/parsmart.cpp: Add protection against double-free
	bugs. Assign pointers to NULL. Addresses bug reported from 
	Avogaro PR#1897745.

	* src/forcefields/forcefieldghemical.cpp: Fix problem with VDW
	gradients -- typo of "kb" instead of "ka."

	* src/forcefields/*.cpp: Remove many (but not all) compile
	warnings from GCC. 

	* src/kekulize.cpp, src/chains.cpp: Ditto.

	* src/ring.cpp: Before running FindSSSR(), delete old data. This
	improves potential race conditions in multi-threaded client code
	(e.g., Avogadro).

2008-03-05  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/formats/gausscubeformat.cpp: Added write function.

2008-03-04  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/chains.cpp (DeleteByteCode): Add protection against double-free
	bugs in chains.cpp. Assign pointers to NULL.

2008-03-04  Daniel Leidert <daniel.leidert@wgdd.de>

	* doc/babel.1: Fixed unkown RE macro.

2008-03-04  Noel O'Boyle <baoilleach@gmail.com>
	
	* src/formats/xml/Makefile.am: Only compile cmlformat.cpp if
	HAVE_SHARED_POINTER is true

2008-03-03  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* include/openbabel/math/vector3.h, include/openbabel/base.h,
	include/openbabel/residue.h: Fixes for compiling with GCC
	-pedantic flag, thanks to Daniel Leidert.

	* tests/* : New tests for UFF, Ghemical and MMFF94 unit
	tests. Compares energies and validates gradients. Still appear to
	be some small gradient errors (although these may be due to
	numerical instability.)

	* src/forcefields/forcefield*.cpp (ValidateGradients): Return
	false when gradient errors are > 5.0% anywhere along the line.

2008-03-03  Noel O'Boyle <baoilleach@gmail.com>
	
	* tests/Makefile.am, files/3d.head.2.cml, tests/cmlreadfile.cpp,
	test/wrapper.sh: Add tests for CML scripting support

2008-03-02  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/dlhandler_unix.cpp: Ensure files match .so exactly. Prevents
	errors when looking for .so.dSYM files.

	* src/formats/MCDLformat.cpp: Fix GCC compile error.

	* src/formats/Makefile.am, src/formats/Makefile.in: Build rsmi and
	MCDL formats.

	* src/config.h.in: Regenerate for HAVE_BOOST symbol.

	* src/forcefields/forcefielduff.*: Fix angular
	gradients. Previous implementation mis-read paper for force
	constant.

	* tools/obminimize.cpp: Validate gradients before starting
	minimize. Useful for debugging force fields.

2008-03-02  Noel O'Boyle <baoilleach@gmail.com>
	
	* configure.in: Only use BOOST for shared_pointer if the GCC4.x
	implementation is not available.

2008-03-02  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* scripts/perl: Add dependency checking for libopenbabel. This
	prevents people trying to run automated CPAN tests without the
	library.

2008-03-01  Noel O'Boyle <baoilleach@gmail.com>
	
	* acinclude.m4: Set "have_boost" to "yes" so I can test it in
	configure.in
	* configure.in: Set Automake variable HAVE_SHARED_POINTER if the user
	has either of Boost or tr1/memory (gcc4.x)
	If "have_boost" is "yes" then set both the Automake variable
	USE_BOOST_FLAGS and the C++ #define USE_BOOST
	* src/formats/Makefile.am: Set the compile flags for BOOST if necessary
	Only compile chemkinformat, rxnformat and chemdrawcdxformat if
	HAVE_SHARED_POINTER is true

2008-02-29  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* include/openbabel/generic.h (OBVectorData): New class for storing vector3
	(e.g., dipole moment, transition dipole, etc.)

2008-02-29  Chris Morley

	* src/obconversion.cpp:mods to OBConversion destructor to prevent
	input or output stream being deleted twice when there is an
	associated XMLConversion object - with CML. Possibly closer to
	fixing bugs #1815533 and #1900480.
	
	Add OBMCDL for Windows OBF build.

2008-02-29  Noel O'Boyle <baoilleach@gmail.com>

	* acinclude.m4: Just say 'not found' if BOOST not found.
	
	* configure.in: Look for BOOST and look for tr1/memory.

2008-02-29  Noel O'Boyle <baoilleach@gmail.com>

	* scripts/openbabel-python.i: Bugfix for "[ 1904345 ] Angle, Pair,
	Torsion iterators dones not have deref() method". Turns out that I
	could have been using the __ref__() method all along. This doesn't
	seem to be in the SWIG documentation though.

2008-02-28  Marcus D. Hanwell  <marcus@cryos.org>

	* include/openbabel/grid.h, src/grid.cpp,
	include/openbabel/griddata.h, src/griddata.cpp: Fixed the
	interpolateDerivative function (hopefully). Added new functions to set
	and retrieve values from the grid using just grid indices. This should
	become the preferred way to access the grid values.

	* include/openbabel/grid.h, src/grid.cpp, src/griddata.cpp: Updated
	the grid classes to use an x, y, z index and added several new
	convenience functions using vector3 variables. Some more work is
	needed and a few extra functions to access/set grid values.

	* src/formats/gausscubeformat.cpp: Stop translating from x, y, z index
	to z, y, x as the grid classes now use the more common x, y, z index.

2008-02-28  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/forcefield.h, src/forcefield.cpp: Some
	improvements on the way gradients are handled. E_Bond, E_Angle, ...
	iterate over the calculations and Add the gradients to the correct
	atoms pointed to by the _gradientPtr. This pointer can then be used
	directly by line search.

	* src/forcefields/forcefieldghemical.*: Use it. GetGradient() function
	removed.
	
	* src/forcefields/forcefieldmmff94.*: Same.
	
	* src/forcefields/forcefielduff.*: Same, but UFF still uses old
	derivatives dunctions with all the vector3 objects.

2008-02-28  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/forcefields/forcefielduff.*: Remove redundant calls to
	Compute when calculating gradients. Remove un-needed angle/oop
	code. Problem lies elsewhere.

	* doc/Makefile.am, doc/Makefile.in: Add missing man pages and html
	documentation.

	* doc/roundtrip.1: Add missing man page. (More needed for new
	tools.)

	* test/roundtrip.cpp: Fix incorrect usage statement. Thanks to
	Daniel Leidert.

	* acinclude.m4: Add Boost detection code. Still needs addition to
	configure script.

2008-02-27  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* include/openbabel/base.h, src/base.cpp: Add new GetAllData()
	function to return a vector of all OBGenericData of a given
	type. This has been long requested and is sorely
	needed. (For example, it's useful when you have multiple orbitals
	in a molecule.)

	* src/formats/gausscubeformat.cpp: Add the title of the cube as an
	attribute of the GridData.

	* tools/obprop.cpp: Update to new name of PSA descriptor.

	* configure.in, configure: Update with patch from Daniel Leidert
	for PR#1902640 and wx-config.

2008-02-25  Chris Morley

	* src/forcefield.cpp: added (double)cast to sqrt to prevent
	compiler error.
	
	* src/formats/xml/xml.cpp(XMLConversion::WriteStream): do not
	write when buffer empty. Workaround to prevent crash in CMLFormat
	which occurs when freeing libxml2 writer. I don't understand exactly
	what is happening here. I wish we had a C++ XML library!
	I hope cures bugs #1815533 and #1900480.

2008-02-25  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/msiformat.cpp: Finally fixed bond connections and
	single/double bonds. Still needs more testing.

	* src/formats/gausscubeformat.cpp: Try to skim to the end of the
	file after reading data.

2008-02-24  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefields/forcefieldghemical.cpp: Small change for the new
	derivatives.

2008-02-24  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/forcefield.cpp: Output the number of possible rotamers when
	doing rotor search -- as a long unsigned int.
	Remove old derivatives in favor of BALL analogues.

	* include/openbabel/forcefield.h: Remove old derivatives in favor
	of BALL analogues.

	* src/forcefields/forcefieldmmff94.cpp: Ditto.
	
	* src/forcefielduff.cpp: More checks for real numbers, uncovered
	doing WeightedRotorSearch.

2008-02-24  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp: Added VectorAngleDerivative_BALL,
	VectorTorsionDerivative_BALL and VectorOOPDerivative_BALL.

	* src/forcefields/forcefieldmmff94.cpp: Use it. MMFF94 now has
	analytical gradients.

2008-02-23  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/rotamer.cpp (SetCurrentCoordinates): Allow -1 as a rotor
	setting -- implies do not change the dihedral angle.
	Some general code cleanups.

	* src/forcefield.cpp (WeightedRotorSearch): Fix some bugs -- check
	rotors without changing other dihedral angles and make sure to
	update the conformer structure after the search.

2008-02-22  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/atom.cpp (GetAngle): Return 0.0 for the angle if the vectors
	are too small. (The angle is ill-defined in these cases, so this
	is better than returning NaN.)

	* src/forcefield.cpp: Hunting down more divide-by-zero bugs.

	* src/forcefields/forcefieldghemical.cpp: Remove some rare
	divide-by-zero errors (e.g., when atoms are on top of each other).

	* src/forcefields/forcefielduff.cpp: Ditto.

2008-02-22 Chris Morley

	* src/mol.cpp(AssignSpinMultiplicity): Move the functionality
	recently removed from AddHydrogens() to here. Don't assign spin
	multiplicity to multi-atom molecules with no bonds.
	Molecules specified only by elemental formula from thermoformat,
	cmlformat and smilesformat seem to be handled ok.
	
	* src/formats/xml/cmlformat.cpp: handle <atomArray> occurring as
	a child of, formula> as well child of <molecule>.
	DoAtoms) Rewrite so that not confused when multiple sets of
	atom coordinates are present.
	
	* include/openbabel/forcefield.h: include float.h
	
	* windows-vc2005/babelconfig.h: add defines for IsNan and isfinite

	* src/descriptor.cpp: remove define for IsNan

	* test/files/FormulaTest.smi: correct the SMILES for carbene and
	add CH3D

2008-02-21  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/forcefield.cpp (WeightedRotorSearch): Check each individual
	rotor setting in isolation and use Boltzmann initial weightings.
	(*RotorSearch): Make sure to call Energy() evaluations without
	gradients.

	* src/rotamer.cpp (SetRotorToAngle): Remove unlikely (but
	possible) divide-by-zero error.

	* src/forcefields/forcefieldghemical.cpp: Fix divide-by-zero error
	in calculation of torsional term. Should be bullet-proof now.

	* src/formats/mdlformat.cpp: Fix rare crash when handling invalid
	alias records.

	* src/formats/msiformat.cpp: Remove debugging information and fix
	various bugs (e.g., dummy atoms).

2008-02-21  Marcus D. Hanwell  <marcus@cryos.org>

	* src/formats/gausscubeformat.cpp: Simplified the cube reading code,
	now more resilient to more loosely formatted cube data without the
	extra line ending at the end of each z data set.

2008-02-19  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/forcefield.cpp (LineSearch): Check gradients with isfinite()
	and for overly-large movements. Prevents any possible "explosions"
	or "disappearing atoms."

2008-02-18  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp, include/openbabel/forcefield.h: When
	OBForceField::Setup was called and failed it returned false. But when 
	you did it again IsSetupNeeded() returned false and Setup() therefor
	returned true. This caused lots of crashes in avogadro's AutoOpt tool.
	OBForceField::_validSetup now checks to see if last Setup() failed, if
	so, a real Setup() is done (and will return false if failed).
	Get rid of compiler warnings: unused variable, changed function(bool
	gradients = true) into function(bool = true).
	Setup also calls UnsetSSSRPerceived() now.

	* include/openbabel/mol.h: Added OBMol::UnsetSSSRPerceived().
	Shouldn't this be called when we Add/Delete bonds.

	* src/forcefields/forcefieldmmff94.cpp: Some bug fixes related to atom
	typing of rings. Making and breaking rings in avogadro while MMFF94
	AutoOpt tool is running (in Avogadro) caused it to crash.

2008-02-17  Marcus D. Hanwell  <marcus@cryos.org>

	* src/formats/gausscubeformat.cpp: Rewrote the Gaussian cube format to
	use OpenBabel functions and data structures. Adding error checking and
	also reordered the grid data from the Gaussian order to the internal
	GridData order. Orbitals are now visible in Avogadro - success!

2008-02-16  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/mol.cpp: Removed check in AddHydrogens() to make sure hydrogens
	are added to molecules with no bonds. This check was probably put in
	to make sure you don't add hydrogens to a molecule comming from a QM
	program for which ConnectTheDots() was not called yet? 

2008-02-14  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/msiformat.cpp: Add new support for MSI/Accelrys
	Cerius II files. Still needs a bit of debugging, but works fine on
	single-molecule files.

	* src/formats/Makefile.*: Update for new format.

2008-02-13 Chris Morley
	
	* data/plugindefines.txt: comment out problematic entry
	
	* windows-vc2005/Distribution/NSISScriptToCreateInstallerOBF.nsi:
	update this installer for the multiple DLL build
	
	Update other Windows build files.

2008-02-13  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/griddata.cpp, include/openbabel/griddata.h: Fix for
	documentation (and code) for GetOriginVector -- return the minimum
	x, y, and z coordinates from the grid.

2008-02-12 Chris Morley

	* src/formats/MCDLFormat.cpp: NEW FILE Converted from his Java code
	by Sergey Trepalin. There is a Java applet viewer and editor for
	this linear format at http://sourceforge.net/projects/mcdl.
	Some of the utility functions have been temporarily shoe-horned
	into this file so there is only one MCDL related file. They will be
	separated when further code for 2D layout from the applet
	becomes available.
	
	* windows-vc2005/OpenBabelOBF.sln: updated
	
2008-02-10  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/grid.cpp: Added extra check to Interpolate() to make sure no
	_val[i] is used when i >= _xdim*_ydim*_zdim, this fixes some craches
	in the Avogadro surface engine. I suspect that larger molecules have
	larger errors in their _xmin, _xmax, _ymin, ... values (error
	propagation) which causes the first check to pass, but still request 
	an invalid _val[i]

2008-02-08  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/Makefile.am: Make sure to link src/alias.cpp with
	mdlformat.

	* src/Makefile.am: Build alias.cpp with main libopenbabel.

	* src/formats/smilesformat.cpp: Reject SMILES molecules with 0
	atoms. Fixes bug on test suite.

	* test/files/smartsresults.txt: Update for recent SMARTS and atom
	typing changes.

2008-02-08 Chris Morley

	* src/alias.cpp: NEW FILE with AliasData::Expand(). Currently
	just a crude parsing, rather than an alias look up.
	
	* include/openbabel/alias.h: Add AliasData::Expand()
	
	* src/formats/mdlformat.cpp: Call AliasData::Expand() so that
	more A lines have chemical meaning. Probably puts writeinchi
	test back ok.
	
	Update Windows builds.

2008-02-05  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefields/forcefieldmmff94.*: New GetType(OBAtom *)
	function. This new function improves atom assignment times. This
	per atom method is also better suited for programs which allow
	interactive editing while running force field optimalization (e.g.
	Avogadro). This also allows to assign atom types to large
	molecules such as proteins.
	- Replaced old SetTypes() function with new one that makes use of the
	GetType(OBAtom*) function.
	- Added functions to calculate canonical parameter indices. (Not used
	yet)
	- Added "unsigned" where needed to get rid of compiler warnings.

	* data/mmffsup.par, data/mmffarom.par, data/mmffhdef.par,
	data/mmffsymb.par: Removed unneeded files.

	* data/Makefile.*: Removed unneeded files.

	* data/CMakeList.txt: Should MMFF94 and UFF parameter files be in
	here?

2008-02-02  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/mol.cpp: Bugfix for DeleteResidue()

2008-02-01 Noel O'Boyle <baoilleach@gmail.com>

	* scripts/python/examples/testpybel.py: Made test suite
	compatible with Python 2.3 (Pybel itself had no problems)

2008-01-31 Noel O'Boyle <baoilleach@gmail.com>

	* scripts/ruby/README: Updated as follows...
	(1) it's no longer necessary for the user to run ruby extconf.rb
	(2) added info on performing a local installation

2008-01-30 Joshua Ballanco <jballanc@gmail.com>

	* scripts/ruby/extconf.rb: Reworked the mkmf fix to be more
	generally applicable to *nix platforms.

2008-01-30  Geoffrey Hutchison  <babel@geoffhutchison.net>

	Fixes contributed by Liu Zhiguo via e-mail.
	* src/data.cpp (OBResidueData::AssignBonds): For pre-defined
	residues, do not check distances. (PDB files should be fairly
	clean.)
	(OBGlobalDataBase::Init): Make sure to check return value from
	OpenDatafile.

	* src/mol.cpp (operator +=): Make sure to preserve residue
	information when appending.
	(ConnectTheDots): Make sure to preserve existing bonds, e.g. from
	PDB files.

	* src/atom.cpp: (IsHBondAcceptor, IsHBondDonorH): Improvements for
	more accurate description of h-bonding. IsHBondDonorH now cleanly
	checks neighbors for IsHBondDonor rather than duplicating logic.

	* src/formats/mol2format.cpp: Don't attempt to re-perceive atom types.

2008-01-30  Noel O'Boyle <baoilleach@gmail.com>

	* scripts/openbabel-java.i: Updated to make identical (in terms of
	includes and header files) to python wrapper. Added ignore statements
	for operators as there are just too many warnings about these.

2008-01-29  Joshua Ballanco <jballanc@gmail.com>

	* scripts/ruby/extconf.rb: Fixed an error that had Ruby 1.8.6
	using gcc to compile and link the C++ extension file. Also updated
	the method of finding the correct include directories.

2008-01-24  Noel O'Boyle <baoilleach@gmail.com>

	* scripts/python/setup.py: Changed search method to find openbabel.so
	(may need testing on other platforms)
	* scripts/openbabel-perl.i: Updated to make identical (in terms of
	includes and header files) to python wrapper.

2008-01-24  Chris Morley
	
	* src/formats/inchiformat.cpp(WriteMolecule): remove #ifdef _WIN32
	from InChIKey code.

2008-01-24  Noel O'Boyle <baoilleach@gmail.com>

	* scripts/Makefile.am,Makefile.in: Incorporated Rich Apodaca's fix
	for Ruby OpenBabel error message "undefined symbol: Init_openbabel"
	* scripts/openbabel-ruby.i: Updated to include same header files as
	openbabel-python, but commented out problematic obfingerprint.h. Also
	upper-cased the first letter of the templates to avoid warning
	messages, and then needed to rename template VectorData to
	VectorGenericData to avoid a conflict with another object of the same
	name in OpenBabel.

2008-01-22  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/ops.cpp, src/pointgroup.cpp, src/kekulize.cpp, src/mol.cpp,
	src/obutil.cpp, src/ring.cpp, src/atom.cpp,
	src/forcefields/forcefielduff.cpp,
	src/forcefields/forcefieldmmff94.cpp,
	src/forcefields/forcefieldghemical.cpp,
	src/formats/cansmilesformat.cpp: Fix GCC warnings, adding explicit
	braces for if/else statements, explicit () around logic
	statements, etc.

	* include/openbabel/ring.h (GetRootAtom): Return unsigned int for
	comparison with atom indexes.

	* include/openbabel/plugin.h: Remove unused parameter for warning
	reduction.

2008-01-22  Chris Morley

	* src/formats/mdlformat.cpp(WriteMolecule): CHG line output
	corrected.

2008-01-22  Jean Brefort  <jean.brefort@normalesup.org>

	* src/formats/yasaraformat.cpp: replaced const char* by string.

2008-01-21  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* include/openbabel/atom.h, src/atom.cpp: Handle SetType(string)
	as const as well.

	* src/obconversion.cpp: When looking for .gz extensions, make sure
	substrings go to the end of the string. This prevents problems on
	extensions like ".gzmat."

	* src/formats/gausszmatformat.cpp: New format. Supports
	reading/writing to Gaussian Z-matrix files. PR#1863673 and #1696776.

2008-01-21  Jean Brefort  <jean.brefort@normalesup.org>

	* src/math/spacegroup.cpp: fixed all g++ warnings.

2008-01-20  Noel O'Boyle <baoilleach@gmail.com>

	* scripts/openbabel-perl,ruby,java.i: Merged in changes to
	openbabel-python.i.

2008-01-20  Jean Brefort  <jean.brefort@normalesup.org>

	* include/openbabel/atom.h: replace char* by const char* where
	appropriate to get rid of the deprecated conversion from
	const char* to char* gcc message.
	* include/openbabel/chains.h: ditto.
	* include/openbabel/data.h: ditto.
	* include/openbabel/pointgroup.h: ditto.
	* src/atom.cpp: ditto.
	* src/chains.cpp: ditto.
	* src/data.cpp: ditto.
	* src/formats/PQSformat.cpp: ditto.
	* src/formats/chem3dformat.cpp: ditto.
	* src/formats/chemdrawcdx.cpp: ditto.
	* src/formats/crkformat.cpp: ditto.
	* src/formats/fastaformat.cpp: ditto.
	* src/formats/gromos96format.cpp: ditto.
	* src/formats/pdbformat.cpp: ditto. (don't let this format to
	modify etab).
	* src/formats/yasaraformat.cpp: ditto.
	* src/mol.cpp: ditto.
	* src/parsmart.cpp: ditto.
	* src/pointgroup.cpp: ditto.
	* src/tokenst.cpp: ditto.
	* test/roundtrip.cpp: ditto.

2008-01-20  Jean Brefort  <jean.brefort@normalesup.org>

	* src/formats/cifformat.cpp: don't try to find the group when there
	is no symmetry related data in the data block.
	* src/generic.cpp: fixed a typo (bug).
	* src/math/spacegroup.cpp: return after throwing an error.

2008-01-19 Chris Morley

	* scripts/openbabel-python.i: include op.h
	* windows-vc2005/OBPython/openbabel.py: updated

	* windows-vc2005/Distribution/NSISScriptToCreateInstallerOBF.nsi:
	add installer script for  obf (multi DLL) build
	
	* windows-vc2005/OBPython/_openbabel.pyd,
	windows-vc2005/OBPython/OpenBabelDLL.dll: remove compiled files
	
	* src/plugin.cpp(ListAsVector):correct message when listing
	"plugins"
	
	* data/plugindefines.txt: remove some of the trivial examples
	
2008-01-19  Jean Brefort  <jean.brefort@normalesup.org>

	* src/math/spacegroup.cpp: accept white spaces in transforms
	descriptions in cif files. Fixes bug 1873908.

2008-01-17  Noel O'Boyle <baoilleach@gmail.com>

	* scripts/python/pybel.py, scripts/python/examples/testpybel.py:
	Updated to use plugin descriptors. Changed to create a single instance
	of plugin descriptors and fingerprinters. Also, readfile now raises an
	IOError if the file does not exist.
	* scripts/python/examples/findcoverage.bat: Add .bat file to automate
	calculation of code coverage for pybel.

2008-01-16 Chris Morley

	* include/openbabel/obconversion.h(ReadObject),
	* include/openbabel/mol.h(CreateMolecule):
	These declarations were added by Jean, but do not seem to
	have definitions currently, which causes problems with SWIG.
	Comment them out for the time being.
	
	* include/openbabel/fingerprint.h: last commit was mistake;revert. 
	* scripts/openbabel-python.i: do not include groupcontrib.h
	* windows-vc2005/OpenBabelDLL/OpenBabelDLL.vcproj: updated
	for extra files etc.

2008-01-16  Noel O'Boyle <baoilleach@gmail.com>

	* include/openbabel/forcefield.h, plugin.h: Documentation fixes
	* src/bitvec.cpp: Documentation fixes

2008-01-16  Noel O'Boyle <baoilleach@gmail.com>

	* scripts/openbabel-python.i: Updated to allow compilation

2008-01-15  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/base.cpp: Fix API documentation for return(1), as mentioned
	by Andrew Dalke. PR#1827795.

	* src/formats/cacheformat.cpp: Fix incorrect chemical/x-alchemy
	MIME type. PR#1822511.

	* src/formats/mol2format.cpp: Fix trailing newline
	issue. PR#1868929.

	* src/formats/chemdrawcdx.cpp: Return false when attempting to
	read past the end of the file. This solves PR#1856016.

	* include/openbabel/generic.h: Fix template issue with
	OBPairTemplate, PR#1830110.

	* src/mol.cpp (OpenBabel): Add patch from Noel PR#1840908 for
	inertial matrix speedup.

	* data/phmodel.txt, src/phmodel.cpp: Fixes from Stephen Constable,
	related to PR#1838943.

	* src/typer.cpp: Ditto. (Re-enables CorrectAromaticNitrogen to
	handle tryptophan.)

	* configure.in: Bump for 2.2.0b2 snapshot.

2008-01-11  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/Makefile.*: Add tokenst.h

2008-01-11  Michael Banck  <mbanck@gmx.net>

	* src/Makefile.am (SUBDIRS): Added descriptors and ops.
	(libopenbabel_la_SOURCES): Removed filters.cpp, gen3d.cpp,
	smartsdescriptors.cpp and groupcontrib.cpp.
	(libopenbabel_la_LIBADD [BUILD_SHARED]): Added ops/libops.la and
	descriptors/libdescriptors.la.
	(libopenbabel_la_LIBADD [!BUILD_SHARED]): Likewise.
	* src/Makefile.in: Regenerated.
	* src/descriptors/Makefile.am: New file.
	* src/descriptors/Makefile.in: Generated.
	* src/ops/Makefile.am: New file, skipping op2d.cpp for now.
	* src/ops/Makefile.in: Generated.
	* configure.in (AC_OUTPUT): Added src/descriptors/Makefile and
	src/ops/Makefile.
	* configure: Regenerated.

2008-01-11  Michael Banck  <mbanck@gmx.net>

	* include/openbabel/tokenst.h: Add newline at end of file.

2008-01-10 Chris Morley

	* src/tokenst.cpp, data.cpp, include/openbabel/base.h, data.h:
	Move OpenDataFile from data.cpp to tokenst.cpp. Move declarations
	of tokenize and Trim to a new header file tokenst.h, so that
	these utility functions can be use in modules which do not
	include the main chemistry API. Other similar utilities should
	probably be treated in the same way.
	
	* src/descriptors/cmpdfilter.cpp: NEW FILE. plugin to combine
	descriptors in --filter and similiar options.
	
	* src/ops: NEW DIRECTORY. Move src/gen3d.cpp, op2d.cpp to there.
	
	* src/ops/loader.cpp: NEW FILE for plugin to make new
	plugins from text file.
	
	* src/obconversion(LoadFormatFiles):hook for OBDefine.
	
	* include/openbabel/plugin.h: add MakeNewInstance and GetPlugin.
	In MAKE_PLUGIN check for empty ID before registering.

	* src/plugin.cpp(ListAsVector), include/openbabel/op.h(OpOptions):
	no listing if ID starts with _  Allows dummy instances.

	* src/filters.cpp, smartsfilters.cpp, groupcontrib.cpp: Moved to
	src/descriptors
	
	* include/openbabel/bitvec.h: modify Windows build macros
	
	* src/descriptor.cpp:remove an unnecessary zero check and minor
	doc changes

2008-01-09  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/rotor.h: Added Yongjin Xu's rotorKeyList class as
	OBRotorKeys, added documentation and NumKeys().

	* src/forcefield.cpp, include/openbabel/forcefield.h: Use the new
	OBRotorKeys class in SystematicRotorSearch, angle constaints work and
	renamed BondConstraint to DistanceConstraint.

2008-01-04  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/rotor.cpp: remove _fix.Clear() from OBRotorList::Clear()

2008-01-04  Michael Banck  <mbanck@gmx.net>

	* test/cml.sh: Use /bin/bash to run, not /bin/sh as "source" is a
	bashism.

2008-01-03  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/xyzformat.cpp: Accept non-standard XYZ files with an
	atom number rather than an element symbol in the first column.

2007-12-20  Jean Brefort  <jean.brefort@normalesup.org>

	* src/formats/pdbformat.cpp: fix crash [#1846728].
	* src/math/spacegroup.cpp: add missing header.

2007-12-19  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* include/openbabel/forcefield.h (HasAnalyticalGradients): New
	method to define if full analytical gradients are implemented for
	a force field. Allows code to choose analytical vs. numeric based
	on implementation. Defaults to false (i.e., implement analytical
	later).
	
	* src/forcefields/forcefieldghemical.h,
	src/forcefields/forcefielduff.h: Define that analytical gradients
	are implemented.

2007-12-18  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp, include/openbabel/forcefield.h: Cleaned up
	header file and documentation. All private variables now start with
	"_". Added support for Molecular Dynamics.

	* src/ops.cpp: fix compiler error.

2007-12-17 Chris Morley

	Try to resynchronize.
	
	* src/obconversion.cpp, /include/openbabel/obconversion.h:
	Change return type of AddChemObject from bool to int. 
	This allows the modes with and without a queue of 2 to be
	distinguished. It is backward compatible and in fact has been
	this way previously. Consequential changes in GetChemObject() in
	obmolecformat.cpp, rxnformat.cpp, 
	
	* include/openbabel/forcefield.h(UpdateConformers, UpdateCoordinates):
	return values.
	
	* src/dock.cpp(GridDockNextPose): add return value.

	* src/atom.cpp(GetResidue): return a value
	
	* src/transform.cpp: filter mol if DoOps returns false. 

	* include/openbabel/op.h(DoOps) return false if Do() does,
	to aid filtering. Minor documentaion.
	
	* include/openbabel/plugin.h: Minor documentation.
	
	* include/openbabel/reaction.h: Add support for an Agent molecule.

	* src/gen3d.cpp: Add start and stop ErrorWrap so OBBuilder diagnostic
	code to cerr is demoted to obInfo messages.
	
	* src/oberror.cpp(StopErrorWrap):Set _inWrapStreamBuf to NULL.
	so can handle multiple molecules.
	
	* src/builder.cpp: Set dimension of molecule to 3 (CML needs this).
	Replace tabs.
	
	* src/formats/getinchi.cpp: remove OBCOMMON macro. Not needed in a format.
	
	* src/kekulize.cpp: initialize expand_ successful to supress
	compiler warning.

	* src/formats/xml/cmlformat.cpp: Minor documentation
	
	* src/formats/chemkinformat.cpp(WriteReactionLine): if molecule has
	no title use its formula.
	
	* src/formats/xml/xml.cpp(~XMLConversion):check that document has
	been terminated.
	
	Update Windows OBF build files incl some new projects making OBF files.


2007-12-15  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefields/forcefieldmmff94.cpp: Analytical gradients for all
	interactions except OOP.

2007-12-14  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefields/forcefieldmmff94.[h,cpp]: Solved problem with VDW
	interactions. H-Bond donor/acceptor reactions were not handled
	correctly.

2007-12-12  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* srd/mol.cpp: Bugfix for FindTorsion. Now checkes to make sure the
	wing atoms are not the same atom. This occurs in 3-membered rings.

	* src/forcefields/forcefieldmmff94.cpp: Improved torsion and OOP
	energies.

2007-12-11  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp, include/openbabel/forcefield.h: Setup now checks
	if the molecule actually needs to be set up by calling IsSetupNeeded()
	itself.

2007-12-10  Jean Brefort  <jean.brefort@normalesup.org>

	* include/openbabel/base.h: add missing headers, see debian bug #455170.
	* include/openbabel/data.h: ditto.
	* include/openbabel/lineend.h: ditto.
	* include/openbabel/mol.h: ditto.
	* include/openbabel/obconversion.h: ditto.
	* include/openbabel/obmolecformat.h: ditto.
	* include/openbabel/plugin.h: ditto.
	* include/openbabel/xml.h: ditto.
	* src/bitvec.cpp: ditto.
	* src/dlhandler_unix.cpp: ditto.
	* src/format.cpp: ditto.
	* src/math/spacegroup.cpp: ditto.
	* src/matrix.cpp: ditto.
	* src/residue.cpp: ditto.
	* src/tokenst.cpp: ditto.
	* tools/babel.cpp: ditto.

2007-12-07  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/dock.h, src/dock.cpp: Added docking class.

	* src/forcefield.cpp: Implemented X, Y, Z atom constraints.



2007-12-07  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/mol.cpp, include/openbabel/forcefield.h: replaced double _energy
	with vector<double> _energies.

	* src/forcefield.cpp, include/openbabel/forcefield.h: update for
	restraint code.

2007-12-06  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/xyzformat.cpp: Fix bogus warning about titles when
	reading past the end of the file.

	* data/element.*: Fix atom colors to match Jmol standard. (Changes
	in Fe, Co, Ni, Cu only.)

2007-12-06  Tim Vandermeersch <tim.vandermeersch@gmail.com>
	
	* src/forcefield.cpp, include/openbabel/forcefield.h: Added some log
	functions, documentation update and bond length constraints.

2007-12-05  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp, include/openbabel/forcefield.h: OBForceField now
	defines Setup() itself. It calls the needed virtual setup functions
	which FF implementations can overwrite.
	Continue work on constraints implementation.

	* src/forcefields/*: Changes for new Setup system.
	
	* include/openbabel/atom.h: Removed old Ignore/Fixed functions.

2007-12-04  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp, include/openbabel/forcefield.h: Updated support
	for constraints by added OBFFConstraints class.

2007-12-03  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* include/openbabel/pointgroup.h, src/pointgroup.cpp: New class to
	wrap  S. Patchkovskii's brute-force 3D point group symmetry
	code. Still needs some updates from original C code, particularly
	to make it "less chatty."

	* tools/Makefile.am, tools/obsym.cpp: New tool to detect point
	group symmetry and eventually write newly "symmetrized" coordinates.

	* src/CMakeLists.txt, src/forcefields/Makefile.*: Update to remove
	MM2 forcefield from building.

2007-12-03  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp, include/openbabel/forcefield.h: Added
	IsSetupNeeded to limit the number of calls to Setup, this improves
	performance for applications like avogadro (AutoOpt tool)

2007-12-02 Chris Morley

	* src/forcefield.cpp, include/openbabel/forcefield.h,
	forcefieldghemical.h, forcefieldmm2.h, forcefieldmmff94.h
	MakeNewInstance as pure virtual function to OBForceField
	for use in multithreaded environments.

2007-12-02  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp, include/openbabel/forcefield.h: Added support
	to ignore and fix atoms. see doxygen documentation for more info.

2007-12-02  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp, include/openbabel/forcefield.h: Split 
	SystematicRotorSearch into ...Initialize and ...NextConformer. This 
	alows a progress bar to be displayed in avogadro.

	* src/forcefields/forcefieldghemical.cpp: Removed (commented out)
	special treatment of linear angles, wasn't workiung correctly, needs
	to be looked at...

2007-11-30  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/chains.cpp: Improve speed when clearing residue info in
	molecules with no residues.

	* include/openbabel/atom.h, src/atom.cpp: New method GetResidue()
	to optionally request no chain perception. Useful in
	builders/editors (e.g., Avogadro).

2007-11-28  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* scripts/Makefile.am, tools/Makefile.am: Fixes for building
	outside of the source tree.

	* test/iterators.cpp: Fix #include for OBRing. Now compiles cleanly.

2007-11-28  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/data.h, src/data.cpp: Added Allred-Rochow
	Electronegativities.

	* data/element.txt, data/element.h: idem.

	* src/forcefields/forcefieldmmff94.cpp: use it.

2007-11-28 Chris Morley

	* src/formats/smilesformat.cpp(ParseSimple): Add ForceImplH()
	to fix bug #1839589
	
	* src/mol.cpp(AssignSpinMultiplicities): Leave spinMultiplicity
	at zero (not hydrogen deficient) for atoms labelled as above.
	
	* include/openbabel/atom.h: newflag OB_ATOM_NOT_H_DEFICIENT
	with set and read functions the above.

2007-11-28  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp: OBForceField::VectorTorsionDerivative() now
	returns 180 instead of 0. (was needed for MMFF94)

	* srd/forcefields/forcefieldghemical.cpp,
	src/forcefields/forcefielduff.cpp: Also changed 0 to 180 for torsions.
	Bug fix for OBForceFieldXXX::GetGradients(). (Compute() wasn't called)

	* src/forcefields/forcefieldmmff.*: More changes...

2007-11-27  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/formats/smilesformat.cpp: fixed compile error on gcc.

	* src/forcefields/forcefieldmmff94.*: Partial charges are now assigned
	correctly. 

2007-11-27 Chris Morley

	* src/formats/smilesformat.cpp: Replace ReadMolecule and add
	isNotSmiles(). Lines starting with non-SMILES characters are ignored.
	Input stream left at first non-SMILES char unless a whitespace.
	(WriteMolecule) Add options smilesonly and nonewline to ease
	rsmiformat. Not intended to be public.
	
	* src/formats/rsmiformat.cpp: New file for Reaction SMILES format

2007-11-27  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/forcefield.cpp (VectorOOPDerivative): Calculate forces, as
	per Tim's reference.

	* src/forcefields/forcefielduff.cpp: Use it.

	* tools/obminimize.cpp: Fix a bug to use conjugate gradients when
	-cg is specified. (Explosions seem to occur more often with CG for me.)

2007-11-27  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefields/forcefieldmmff94.*, data/mmffsymb.par: Formal
	charges are now assigned correctly.

2007-11-25  Patrick Spendrin, Christian Ehrlicher
	
	* */CMakeLists.txt: some improvements to get it running under win32

2007-11-25 Chris Morley

	* src/dlhandler_win32.cpp, generic.cpp,
	
	* include/openbabel/atomclass.h, alias.h:
	Including atomclass.h and alias.h into dlhandler_win32.cpp breaks
	code segregation (OBConversion and user interfaces do not know
	about the chemistry.) Include in generic.cpp instead and change
	the build macros used by 'native' MSVC8 build from OBCOMMON to OBAPI
	I hope this fits ok with CMake.
	
2007-11-24  Patrick Spendrin, Christian Ehrlicher
	
	* include/openbabel/atomclass.h: adding support for sstream
	
	* src/config.h.cmake: cleanup
	
	* src/dlhandler_win32.cpp: improvements for msvc
	
	* */CMakeLists.txt: improving CMake based buildsystem esp. for win32
	and mingw32 - it builds now again, though there will come more improvements
	next

2007-11-18  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefields/forcefieldmmff94.*, data/mmffsymb.par: Atom typing 
	works!!
	
	* src/forcefield.cpp, include/openbabel/forcefield.h,
	tools/obminimize.cpp: Added DetectExplosion() to aid in debugging the
	problem with planar molecules.

	* src/typer.cpp, data/ringtyp.txt, include/openbabel/mol.h: Fixed some
	bugs and added more ringtypes.

	* src/ring.cpp, include/openbabel/ring.h: Added GetRootAtom(), returns
	the index of the root atom (e.g. O in furan, ...)

2007-11-20  Chris Morley

	* src/formats/xml/cmlformat.cpp: Now Has own WriteChemObject
	so OBReaction object can bypass OBMoleculeFormat functionality
	and be passed directly to WriteMolecule.
	WriteMolecule passes OBReaction objects to CMLReactFormat.
	Restore handling of WriteAromaticBonds which somehow got deleted. 
	
	* src/formats/xml/cmlreactformat.cpp: Changes to handling of
	options MolsNotStandalone and ReactionsNotStandalone.
	
	* src/formats/xml/xml.cpp(GetDerived): transfer IsLast flag to
	extended object when writing.
	
	* src/formats/thermoformat.cpp: Replace changes made for cmake
	by _MSC_VER as macro indicating Visual C++ compiler
	
	Update Windows VS OBF build files.

2007-11-19  Chris Morley

	* src/formats/xml/cmlformat.cpp: extra string temp variable so
	that it will compile on gcc
	
	* src/formats/xml/cmlreactformat.cpp: minor changesfrom compiler
	warnings
	
2007-11-18  Chris Morley

	* include/openbabel/alias.h: New File with OBGenericData derived
	class to hold aliases of placeholder atoms.
	
	* src/formats/mdlformat.cpp: When reading an alias block put the
	data into the AliasData class above, without trying to interpret it.
	Write alias block is the atom has unexpanded AliasData.
	
	* src/format/xml/cmlformat.cpp: had forgotten Atom4Refs
	whem doing mods for atomclasses.
	
	* src/GUI/optswx.cpp:added a test for >0 to a parameter of isspace()
	
	* include/openbabel/plugin.h: Moved CharPtrLess to be a free
	standing struct rather than embedded in OBPlugin. Less to go wrong
	with SWIG.
	

2007-11-18  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/builder.cpp: Added some documentation. Now uses OpenDataFile().

	* src/typer.cpp, include/openbabel/typer.h, data/ringtyp.txt: Added
	OBRingTyper class. Brief doxygen documentation included on use.

	* src/ring.cpp, include/openbabel/ring.h: Added GetType() and
	SetType() (see OBRingTyper)

	* include/openbabel/mol.h: Added SetRingTypesPerceived() and
	HasRingTypesPerceived() (see OBRingTyper) 

2007-11-16  Chris Morley

	* include/openbabel/atomclass.h: New file with OBAtomClassData
	class, derived from OBGenericData and that attaches to OBMol.
	
	* src/formats/smilesformat.cpp: Added capability to reads and 
	optionally write atom class e.g [CH3:1].
	
	* src/format/cmlformat.cpp: Read and write atom classes (embedded
	in atom ids, with care that they remain unique, even when atom
	classes ar not.
	
	* windows-vc2005/OpenBabelDLL/OpenBabelDLL.vcproj: updated to
	remove RDKit references.

2007-11-16  Michael Banck  <mbanck@gmx.net>

	Make libinchi.la a convenience library.

	* src/formats/inchi/Makefile.am (lib_LTLIBRARIES): Renamed to ...
	* (noinst_LTLIBRARIES): ... this.
	* src/formats/inchi/Makefile.in: Regenerated.

2007-11-16  Michael Banck  <mbanck@gmx.net>

	* src/formats/xml/Makefile.am (INCLUDES): Added
	-I$(top_builddir)/include.
	* src/formats/xml/Makefile.in: Regenerated.

2007-11-15  Chris Morley

	Update Windows build files.
	
	* src/formats/pngformat.cpp(TargetClassDescription): modify so 
	that options for OBMol appears in GUI.
	
2007-11-14  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/griddata.cpp, src/grid.cpp: Change to new SetLimits method
	for assigning axes, origin -- everything required by OBFloatGrid.

	* src/formats/gausscubeformat.cpp: Use it.

	* include/openbabel/Makefile.am: Make sure to install new headers
	griddata.h, op.h.

2007-11-13  Chris Morley

	* src/formats/pngformat.cpp: Remove class name in declaration
	as patch #1830826 from LI Daobing. I haven't yet found how to
	get a warning on this in Visual C++.

2007-11-12  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/Makefile.am: Add "ops" code introduced by Chris, including
	gen3d coordinate generation.

	* src/formats/chemkinformat.cpp
	(ChemKinFormat::ParseReactionLine): Added some compilation fixes
	for GCC.

	* src/formats/Makefile.* : Enable compilation of png, rxn, and
	chemkin formats.

2007-11-11  Chris Morley

	Added gen3D.cpp, a wrapper for OBBuilder to make plugin option.
	
2007-11-11  Chris Morley

	* src/formats/chemkinformat.cpp: Reading rewritten so that it
	is like other formats - separate ReadChemObject and
	ReadMolecule. Allows -f and -l options and, potentially,
	filtering of reactions.
	Many parsing changes on reading, incl allowing species names 
	containing spaces with simple input.
	On writing extra option to omit zero rate reactions, formatting
	changes and correct loss of first species in list bug.
	
	* src/formats/xml/cmlreactformat.cpp: Separate out code as
	WriteRateData.
	Add molecules to list even if to be immediately output, so that
	they can benefit from being combined with other inputs.
	If ID of a molecule is a filename, remove the path and extension.
	
2007-11-11  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/inchi/*.c, include/inchi/*.h: Import InChI v1.02b
	distribution code.

2007-11-08  Geoffrey Hutchison  <babel@geoffhutchison.net>

        * src/Makefile.*: Updated for new files.

        * include/openbabel/base.h: New	data type for grid data.

	* include/openbabel/grid.h, src/grid.cpp: Some modifications to
	support new OBGridData class. Still needs documentation	and other
	updates. (This code is showing some bitrot.)

	* include/openbabel/griddata.h, src/gridddata.cpp: New class to
	link a OBFloatGrid as an OBGenericData	(e.g., to a molecule).

	* src/formats/gausscubeformat.cpp: New format from Molekel project
	to read coordinates and cube/grid data from Gaussian cube files.
	
	* src/formats/gromos96format.cpp: Fix typo caused by residue
	numbers as strings.

2007-11-08  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/builder.cpp: rotation works! you can now create fragment based
	structures such as: CCC(c1ccc(C(c2c(c3ccccc3)cccc2))cc1)


2007-11-07  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/*.cpp, include/*.h: Change to UNIX line endings for
	consistency.

2007-11-07  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/builder.cpp, include/openbabel/builder.h: OBBuilder class
	for fragment based structure generation.

	* data/fragments.txt: fragment library for OBBuilder class.

	* tools/obgen.cpp: modified to use OBBuilder

2007-11-07  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/forcefields/forcefielduff.cpp: Fix VDW gradients.

2007-11-05  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/forcefield.cpp (WeightedRotorSearch): Improved conformer
	searching. Still needs geometry optimization for each
	rotamer. (That seems to uncover a bug in OBMol/OBForceField.)

	* tools/obconformer.cpp: Switch to WeightedRotorSearch followed by
	minimization.

	* data/UFF.prm: Improved typing.

	* src/forcefields/*: Add delayed initialization. Only parse the
	parameter file when the force field is called by Setup on a
	particular molecule.

	* src/forcefields/forcefielduff.cpp: Bug fixes.

2007-11-04  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* CMakeLists.txt */CMakeLists.txt: CMake build files contributed
	via Saro Engels and Christian Ehrlicher and the KDE-Win project.

2007-11-04  Chris Morley

	* src/forcefields/forcefieldghemical.cpp(ParseParamFile):
	replaced 4 instances of reserve by resize (on ipar etc).
	Was previously crashing for me.
	
	* include/openbabel/base.h, generic.h: Moved the declaration of
	the OBGenericData base class from generic.h to base.h. This
	potentially reduces dependencies. Most of the derived classes are
	still declared in generic.h. New OBGenericData classes would be
	better with their own header files.
	
	* include/openbabel/atom.h: consequent extra #include.
	
	* src/generic.cpp: OBVibrationData wasn't copying properly. 
	Simplify so uses implicit copy constructor and assignment, which 
	are more reliable.
	
	* src/mol.cpp: remove calculation of _totalSpin from 
	AssignSpinMultiplicity. Done on demand in GetTotalSpinMultiplicity.
	
	* src/descriptor.cpp: minor edit in comment
	
2007-11-03  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/forcefields/forcefielduff.*: Calculates full UFF energies,
	including out-of-plane bending. Still need to finish all analytical
	gradients.

	* data/UFF.prm: Fixed atom typing rules.

2007-11-02  Michael Banck  <mbanck@gmx.net>

	* src/formats/inchi/inchi.sym: New file.

	* src/formats/inchi/Makefile.am (libinchi_la_LDFLAGS): Use inchi.sym
	to restrict the exported symbols via libtool's -export-symbols option.

	* src/formats/inchi/Makefile.in: Regenerated.

2007-11-02  Kevin Shepherd <kshepherd1@users.sourceforge.net>

	* src/formats/cifformat.cpp: Further to 1821894 this patch
	implements vincefn's suggestion i.e. "whenever reading a data name
	(tag),replace all '.' by '_'" and rolls back the previous
	changes.
	
2007-11-01  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/forcefields/forcefielduff.*: First pass at a UFF
	implementation. It compiles, but that's about it for now.

	* data/UFF.prm: Initial parameters taken from RDKit under BSD
	license.

	* include/openbabel/forcefield.h, src/forcefields/*: Switch to
	ipar and dpar as vectors of int and double, respectively.

2007-10-31  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* include/openbabel/residue.h, src/residue.cpp: Switch residue
	numbers to be strings internally. Added GetNumString() to return
	the number as a string (needed for backwards compatibility).

	* src/data.cpp, src/mol.cpp: Use new residue string support. Fixes
	problems raised by David Osguthorpe.

	* src/formats/pdbformat.cpp, src/formats/*: Ditto.

	* include/openbabel/rotamer.h, src/rotamer.cpp
	(SetCurrentCoordinates): New method to set the current coordinate
	set, rather than creating new conformers. More memory-efficient
	with large conformer searching routines.

	* configure, Makefile.in, */Makefile.in: Rebuild with current
	autoconf, libtool, etc.

2007-10-28  Kevin Shepherd <kshepherd1@users.sourceforge.net>

	* src/formats/cifformat.cpp: Fix for Request ID 1821894.  This
	change allows more CIF files to be understood, allowing the
	_atom_site.XXXX varient of the naming.
	
2007-10-27  Kevin Shepherd <kshepherd1@users.sourceforge.net>

	* src/formats/alchemyformat.cpp: Altered the ReadMolecule function
	to be more flexible in handling comments and whitespace.
	This fixes Request ID 1821003, and can be tested with Test File
	Request ID 1820997.
	
2007-10-25  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/pdbformat.cpp: Fix some issues with multiple-chain
	proteins. This is likely a minor fix until David Ogusthorpe
	contributes his changes.

2007-10-24  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* data/torlib.[h,txt]: New torsional library data, improving conformer
        searching.

	* tools/obconformer.cpp: New tool to do real conformer searching,
	using new random and Monte Carlo searching mechanisms in OBForceField.
	
	* tools/Makefile.*: Add above.

	* include/openbabel/forcefield.h, src/forcefield.cpp: Add geometry
	optimization steps to SystematicRotorSearch and new method
	RandomRotorSearch.

2007-10-22  Chris Morley

	Implement exact fastsearch option.
	* src/transform.cpp:Add test for same number of heavy atoms if the
	internal exactmatch option set.

	* src/format/fastsearchformat.cpp: Split out ObtainTarget() to
	make code less cumbersome. Add -ae option implementation.
	
2007-10-18  Noel O'Boyle <baoilleach@gmail.com>

	* scripts/Makefile.am: The dl Python module is not present on (many?)
	64-bit systems, so it falls back to the DLFCN module which hopefully
	*is* present. I would appreciate if someone could rerun the toolchain
	and check in Makefile.in.

2007-10-15  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* include/openbabel/forcefield.h: New LineSearch() method to
	update a step over the entire molecule's coordinates at once. Much
	faster, since it drastically minimizes the number of energy
	evaluations.

	* src/forcefield.cpp: Implement above, plus switch SteepestDescent
	and ConjugateGradients to use it.

	* include/openbabel/mol.h, src/mol.cpp: Add SetCoordinates() call
	to set the entire coordinate system at once.

2007-10-15  Chris Morley
	
	* src/babel.cpp, src/nbabel.cpp: The last commit gave incorrect
	error messages. Correct this, add Read or Write only to output
	from Hxxx and make both Hxxx and H xxx acceptable.

2007-10-15  Chris Morley
	
	* src/babel.cpp, src/nbabel.cpp: Abort and error message when
	SetInAndOutFormats fails. Fixes bug #1813493
	
2007-10-14  Chris Morley

	* src/fingerprints/finger3.cpp, src/formats/fingerprintformat.cpp
	Change format for -xs format again: functional groups tab 
	separated. Suggested by Chris Swain.

2007-10-11  Chris Morley

	* src/format/mdlformat.cpp: Remove warning about incorrect title
	line which is sometimes output when it should not be, bug#1752435
	
	(ParseAliasText) ignore alias blocks with just "?" Suggestion by
	Rajarshi Guha
	
	* src/fingerprints/finger3.cpp, src/formats/fingerprintformat.cpp:
	Slight change in output formatting for -xs and -xu options
	
	* src/formats/xml/cmlformat.cpp: still trying to deallocate
	strings supplied by libxml2. Should be using free (not delete)
	but still not working with my compiler so still commented out.

2007-10-08  Geoffrey Hutchison  <babel@geoffhutchison.net>

        * src/forcefield.cpp, src/forcefields/forcefieldghemical.cpp:
        Defensive programming patch contributed by Ross
        Braithwaite. Prevents divide by zero in determining torsional
        angles in planar rings.

        * include/openbabel/atom.h, src/forcefield.cpp: Add "fixed atoms."

2007-10-08  Chris Morley

	* src/formats/xml/cmlformat.cpp: removed delete statement which
	probably is responsible for bug #1792938. See 2007-08-19
	
2007-10-08  Chris Morley

	* src/formats/mdformat.cpp: output v2000 formal charge as M CHG
	statement rather than in the atom block, which is in correct when
	M RAD or M ISO apppear. Suggestion by p.mortenson bug #1796960

2007-10-05  Chris Morley

	* include/openbabel/forcefield.h: correct back to OBFPRT
	and add default definaition as nothing.

	* include/openbabel/groupcontrib.h: add back to OBDESC
	and add default definition as nothing.
	
	* src/forcefields/forcefieldmmff94.cpp: add initial value for 
	energy and comment out several unused variables to reduce compiler
	messages.
	
	* src/formats/getinchi.cpp: Now reads unquoted InChIs split with
	XML elements like <br />
	
	* src/formats/inchiformat.cpp: Make InChIKey output replace 
	normal InChI rather than adding to it. Still Windows only until
	1.02beta InChI source files added.
	
	* src/formats/smilesformat.cpp(ParseRingBond): ensured that atoms
	are added to OBChiralData::Atom4Refs in the order of the ring closure
	digits on the chiral atom rather than the atom index order. Partial
	fix for bug #1805910
	Added SetChiralityPerceived after reading. Avoids doing it again 
	in FindChiralCenters() which seems not to work sometimes, e.g. for
	CN1CCC[C@H]1c2cccnc2 and CP(O)(=O)C[C@H](O)CN

2007-10-03  Jean Brefort  <jean.brefort@normalesup.org>

	* include/openbabel/groupcontrib.h: removed undefined OBDESC.
	* include/openbabel/op.h: removed OBOp:: from inside class
	definition.

2007-10-03  Jean Brefort  <jean.brefort@normalesup.org>

	* include/openbabel/forcefield.h: fixed typos.

2007-09-26  Chris Morley

	* src/formats/inchiformat.cpp: forgot to change InChIKey option
	in code  to -xK.
	
	* include/zconf.h: replaced. Needed for Windows builds.

	Added Windows build files for obf (multiple DLL) build

	* windows-vc2005/babelconfig.h: replace USE_OBF by USING_DYNAMIC_LIBS

2007-09-25  Chris Morley

	Added files:
	include/openbabel/op.h: new OBOp class, plugin options
	src/ops.cpp: trivial OBOp class for centering
	src/op2d.cpp: class to add 2D coordinates using RDKit
	src/RDKitConv.cpp: conversion OBMol to RWMol
	
	* include/openbabel/descriptor.h: changeprefix macro from OBERROR
	to OBAPI.
	
	* src/descriptor.cpp(Display), src/groupcontrib.cpp(Display),
	src/smartsdescriptors:
	added form -L descriptors ID to give verbose description at runtime
	
	* include/openbabel dlhandler.h, forcefield.h, fingerprint .h,
	groupcontrib.h, xml.h, src/forcefields/*.h, src/formats/getinchi.cpp,
	canon.h: change prefix macros
	
	* include/openbabel/plugin.h(GetTypeMap): improve error return when
	there are no instances, but still a mess, but should not occur.
	
	* src/GUI/OBGUI.cpp(MakePluginsMenu): modified to use ListAs Vector
	rather than ListAs String.
	
	* src/obconversion.cpp: get rid of ill-considered USE_OBF 
	and continue with USING_DYNAMIC_LIBS.
	
	* src/transform.cpp(DoTransformations): add two hooks for OBOp
	classes
	
	* windows-vc2005/babelconfig.h: remove USE_OBF and add OBDESC
	
	* src/formats/inchiformat.cpp: change InChIKey option to -xK.
	(-xk was already used.)


2007-09-02  Jean Brefort  <jean.brefort@normalesup.org>

	* src/formats/chemdrawcdx.cpp: fixed bond order for triple and
	aromatic bonds.

2007-09-20  Chris Morley

	* include/openbabel/generic.h: add new class OBRotationData
	
	* src/formats/gaussformat.cpp: (GaussianOutputFormat::ReadMolecule)
	read in vibrational and rotational data to OBGenericData classes
	
	* src/formats/xml/cmlformat.cpp:(WriteMolecule) if mol title is a
	filename, remove path and extension before outputing to id attribute
	Add WriteRotationData and WriteVibrationData (mainly for MESMER)
	
2007-09-15  Chris Morley

	* src/mol.cpp(GetTotalSpinMultiplicity): now returns correct value
	(1 for normal molecule). Improve documentation. Fixes bug
	#1793980.
	
	* include/openbabel/atom.h, mol.h: improve documentation to emphasize
	OBAtom::GetSpinMultiplicity returns 0 for normal atoms.
	
	* tools/nbabel.cpp: alternative commandline, with explicit -O option
	for output file, less flexible option placing.
	
2007-09-10  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/mol.cpp (Separate): More defensive programming to prevent
	crashing with incomplete OBChiralData.

	* src/formats/cansmilesformat.cpp: Add support for new OBPairData
	"canonical order" -- space terminated string of canonical atom
	labels.

	* tools/obfragment.cpp: New version which outputs XYZ files with
	atoms in canonical order matching the SMILES.

2007-09-06  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/forcefield.cpp: Small improvements to LineSearch and
	ConjugateGradientsTakeNSteps for performance improvement. In
	particular, reset the CG direction periodically and only print
	output every 10 steps.

	* src/forcefields/forcefieldghemical.cpp: Smarter VDW calculation
	-- minimize the number of multiplies. Not much of an improvement,
	unfortunately.

2007-09-04  Chris Morley

	* include/inchi_api.h, windows-vc2005/libinchi.dll,
	windows-vc2005/libinchi.lib: updated to v1.02 beta
	
	* src/formats/inchiformat.cpp: added option to output InChIKey.
	Windows only until the appropriate files for UNIX are installed.

2007-09-03  Chris Morley

	* include/zlib.h, iconv.h, zconf.h: Added.
	Needed for Windows build. I hope they do not interfere 
	with unix builds
	
	* src/formats/xml/cmlreactformat.cpp: Added
	
	* src/formats/pngformat.cpp: remove include to insizes.h
	
	Update Windows project files
	* windows-vc2005/OBComLn/OBComLn.vcproj
	* windows-vc2005/openbabel.sln
	* windows-vc2005/OpenBabelDLL/OpenBabelDLL.vcproj

2007-09-03  Chris Morley

	* src/formats/rxnformat.cpp: removed spurious first line of file
	which gave misleading comiler error messages. Make references to
	tr1 etc consistent with other reaction formats
	
	* include/openbabel/reaction.h: make #include "tr1/memory"
	conditional.
	
	* src/formats/pngformat.cpp: Make independent of compiler and
	platform, esp size of int. Add WriteMolecule to embed into a
	PNG file. Would be better in a program that also wrote PNG files!
	
2007-09-03  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* Merged in changes from 2.1.x branch.

2007-09-02  Chris Morley
	
	* src/formats/chemkinformat.cpp: removed warning and improved
	when writing with the simple option.

	* src/formats/freefracformat.cpp:no longer use TrimErrors which
	caused errors on Windows.

	* src/math/spacegroup.cpp: replace stdargs.h by more modern 
	cstdarg

	* src/mol.cpp(Separate): use code which does not crash when
	Atom4Refs from OBChiralData unaccountably has fewer than 4 
	elements.

2007-09-02  Jean Brefort  <jean.brefort@normalesup.org>

	* src/fingerprints/finger3.cpp: fixed compilation with g++.

2007-09-02  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: applied patch from Klaus Heinz fixes #1786288.

2007-08-30  Chris Morley

	* data/SMARTS_InteLigand.txt: Replaced with slightly modified
	version. I think the existing file was not based on a version
	which had been modified to work within OB's SMARTS implementation.
	
	* include/openbabel/fingerprint.h and src/fingerprint.cpp: 
	added GetBit() and virtual DescribeBits()
	
	* src/fingerprints/finger3.cpp: added PatternFP::DescribeBits
	Added various Trim()s to remove CRs, which is why FP3 had not
	been working, (as Noel noticed).

	* src/formats/fingerprintformat.cpp: added options to output
	description of functional groups in a molecule (esp when using FP4)
	
	* src/math/spacegroup.cpp: included <stdarg.h>

2007-08-27  Jean Brefort  <jean.brefort@normalesup.org>

	* include/openbabel/generic.h: make OBUnitCell use SpaceGroup.
	* include/openbabel/math/Makefile.am: add space groups.
	* include/openbabel/math/spacegroup.h: new SpaceGroup class.
	* include/openbabel/math/transform3d.h: new transform3d class (for
	use in space groups).
	* include/openbabel/math/vector3.h: add a new constructor and fix
	a const issue. 
	* src/formats/cifformat.cpp: use space groups.
	* src/generic.cpp: make OBUnitCell use SpaceGroup.
	* src/math/Makefile.am: add space groups.
	* src/math/spacegroup.cpp: new SpaceGroup class.
	* src/math/transform3d.cpp: new transform3d class.
	* src/math/vector3.cpp: fix a const issue.

2007-08-20  Jean Brefort  <jean.brefort@normalesup.org>

	* src/formats/xml/Makefile.am: removed obsolete cmlreactlformat stuff.
	* src/obconversion.cpp: fix dynamic libraries use on unix.

2007-08-19  Chris Morley

	Add chemical kinetics formats. These used std::tr1::shared_ptr
	and if this is not provided as such, the USE_BOOST macro needs to be
	defined and the Boost library installed.
	
	* include/openbabel/reaction.h: modified
	* src/formats/chemkinformat.cpp: added
	* src/formats/rxnformat.cpp: modified
	* src/formats/xml/cmlreactlformat.cpp: deleted
	
	* src/formats/xml/cmlformat.cpp(WriteMolecule):Handle when 
	OBChiralData::Atom4Ref has <4 items.
	(ReadMolecule): in <property> be more flexible in where the
	title attribute can be.
	Failed attempt to delete C strings from libxml2 to solve memory
	leak bug. Still unresolved.

	* src/formats/thermoformat.cpp: add option to terminate on END,
	rather than end of file. 
	For Windows use 2 digit exponents in output.

2007-08-18  Chris Morley

	* src/formats/pngformat.cpp: add format for extracting  chemical
	structure data from PNG files.
	
2007-08-18  Chris Morley

	* src/format/copyformat: Copy whole input stream if a 
	length is not found.
	
	* src/formats/getinchi.cpp: test for negative chars to avoid
	isspace() failing.
	
	* include/openbabel/plugin.h: small documentation changes
	
	* src/GUI/optswx.cpp: remove some debugging code
	
	* src/obconversion.cpp: re-enable Compressed input for Windows. 
	Add macro to deactivate compressed output which still has 
	problems.
	Use USE_OBF rather than USING_DYNAMIC_LIBS which was ambiguous.
	Zero wInpos and wInlen in itialization list - needed for mod
	to copy format.
	ReportNumberConverted(): allow text from TargetClassDescription
	to have only a single line.
	
	* windows-vc2005/babelconfig.h: enable compression but
	deactivate compression on write. 
	Rationalize the macros 	controlling the build in Visual Studio.
	Now define SINGLE_DLL for current OpenBabelDLL build.
	For future multiDLL builds USE_OBF with macros, like OBCONV 
	appropriate for the DLL being built.

2007-08-18  Jean Brefort  <jean.brefort@normalesup.org>

	* data/Makefile.am: add space groups descriptions.
	* data/space-groups.txt: ditto.
	* data/space-groups.xsl: ditto.

2007-08-13  Jean Brefort  <jean.brefort@normalesup.org>

	* include/openbabel/obconversion.h:b removed extra
	OBConversion:: which made compilation fail.

2007-08-10  Chris Morley

	* src/obconversion.h,.cpp: Added ALL to Option_Type enum.
	Added CopyOptions() and IsLastFile() and 
	ReportNumberConverted() functions.
	
	* src/GUI/OBGUI.cpp, tools/babel: use ReportNumberConverted
	instead of explicit code.

	* include/openbabel/obmolecformat.h: Added RegisterOptionParam
	for "append".
	
	* src/formats/obmolecformat.cpp(ReadChemObjectImpl): clear
	stream flags to prevent stalling when eof set in previous file.
	Remove some debugging code.

	* src/GUI/optswx.cpp: untabify

2007-08-04  Chris Morley

	* src/formats/mdlformat.cpp: Add ReadCollectionBlock(),
	which currently just issues a warning that COLLECTION blocks
	are not implemented. The rest of the molecule in the example
	in bug #1753217 is now read ok.
	
2007-08-04  Chris Morley

	* include/OB_BGL/ :Added interface with Boost Graph Library
	written by Gerde Menche.
	
	* include/openbabel/mol.h: modified EndAtoms() and EndBonds()
	to return after the atomas and bonds in _vatom and _vbond
	rather than the overallocated end of the vectors. Needed for
	the above.

2007-08-03  Jean Brefort  <jean.brefort@normalesup.org>

	* include/openbabel/format.h: Format::FormatsMIMEMap() must
	return a reference, otherwise, a new copy is used each time
	and no mime type is usable.

2007-07-25  Chris Morley

	* src/formats/mdlformat.cpp(MDLFormat::ReadMolecule):
	Added more tests to prevent ill-formed lines in M RAD, CHG and ISO
	lines from causing a crash. Added informative error message.
	Deficiency pointed out by Andrew Dalke.
	
	*src/descriptor.cpp, src/include/openbabel/descriptor.h:
	Add wildcard * facility and simplify - remove GenericDataCompare.
	
2007-07-06  Chris Morley

	* src/descriptor.cpp, src/include/openbabel/descriptor.h:
	Add MatchPairData() so that Property names with spaces can be
	searched for by replacing them with underscores in the filter,
	append or delete strings, as suggested by Noel.
	(GenericDataCompare): fix test for two numbers
	Added GetValues() to implement --append
	
	*src/transform.cpp: Extra option: --append (to mol title).
	Does what Joey Bedell wanted.

2007-07-07  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/Makefile.am, src/Makefile.in: Bump library version for 2.1.1
	release.

2007-07-05  Chris Morley

	* src/formats/inchiformat(WriteMolecule): downgraded the InChI
	message "Tetrahedral stereo info not available" to obInfo, 
	since it arises from the workings of the the opaque OB chirality
	system. Also added the molecule number for identification.
	
	* src/GUI/OBGUI.cpp, tool/babel.cpp: added &std::cout to the
	call to OBConversion::Write() for the APIInterface, because the
	previous NULL value was causing it to be ignored. This meant
	that ---errorlevel wasn't working,  as again found by Noel.
	
2007-07-05  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/mdlformat.cpp (MDLFormat::ReadMolecule): Add
	additional error and warning messages, including a check if the
	atom/bond block doesn't work. Fixes crash reported by Joe Bedell,
	Sigma-Aldrich.

	* Makefile.am, Makefile.in: Skip INSTALL.Windows, deleted by
	Chris.

2007-07-04  Chris Morley

	* src/finger3.cpp: Trim firts line which decided format of
	patterns.txt. In Windows there was trailing \r which caused
	none of the patterns to be read, as found by Noel.
	
2007-07-04  Chris Morley

	* src/formats/smilesformat.cpp(CreateSmiString): call
	FindClosureBonds even when all atoms are chiral.
	(GetSmilesElement): only call GetChiralStereo when
	atom has is specified clockwise or anticlockwise, not just chiral.
	
2007-07-02  Noel O'Boyle <baoilleach@gmail.com>

	* include/oberrors.h: Fixed typo in Doxygen

2007-07-01  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* configure.in, configure, */Makefile.in: Updated with patch from
	Jean Brefort. Adds new --with-pkglibdir flag to facilitate
	packaging with versioned format directories.

2007-07-01  Chris Morley

	* src/obconversion.cpp(InstallStreamFilter): test for non-zero
	pInFormat to avoid crash with no input.
	
	* src/formats/gamessformat.cpp: Test for "$END" now works on $END$.
	Put size test first. Fixes bug #1738005 and probably #1745066.
	
	* INSTALL.Windows: deleted obsolete file
	
2007-06-30  Chris Morley

	* src/formats/smiles format.cpp(GetSmilesElement):do not always
	output atoms in 2D molecules in bracket form if the chirality
	is not specified (fix for bug #1738355)
	
	* src/GUI/OBGUI.cpp: small change to About text

2007-06-27  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/pdbformat.cpp: Fix for PR#1705895 -- check for
	string length before trying to read the 3rd character. Causes
	crash on Windows.

	* scripts/Makefile.*: Fix for change in Ruby build script.

	* src/formats/gaussformat.cpp (and others): Fix for
	PR#1737209. Return false for reading a molecule with no atoms. In
	these formats, empty molecules are invalid.

2007-06-25  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* tools/obenergy.cpp, tools/obminimize.cpp: Minor feature request
	1722878 to add hydrogens before running force field
	calculations for Chris Swain.

2007-06-24  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* NEWS: Update for upcoming 2.1.1 release.

	* src/formats/pdbformat.cpp (ReadMolecule): Add a new OBPairData
	for any record we don't currently parse. This way all data is
	preserved.

	* src/formats/mol2format.cpp: Fix PR#1739905. Add warning if
	elements cannot be interpreted as atom types correctly (e.g., this
	GaussView file). Instead, attempt to interpret as element names.

	* data/types.txt: Fix two HO typing errors, which masked this
	bug.

	* scripts/openbabel-ruby.i: Fix module declaration -- really
	OpenBabel.

	* tools/obminimize.cpp: Minor fix requested by Chris Swain --
	allow setting output format using -o flag.

	* tools/obfit.cpp: Add RMS output to standard error.

2007-06-23  Noel O'Boyle <baoilleach@gmail.com>
	
	* scripts/*.i (except Perl, which was already done): Added
	groupcontrib.h and updated wrapper code
	* scripts/python/Pybel stuff:
	Added calcdesc() method to Molecules for descriptor calculation 
	Added update() method to MoleculeData
	Convert to string before setting a value in MoleculeData
	Updated tests, and API docs

2007-06-15  Chris Morley
	
	* src/smartsdescriptors.cpp: Added SmartsDescriptor class to 
	allow filters based on SMARTStest (like Number of Hydrogen
	Bond Acceptors) to be defined in a single line.
	A few (SMARTS from JoelLib) are defined: HBA1 HBA2 HBD nF
	
	* src/filters.cpp: in SMARTS filter only look for single match.
	
	* src/formats/inchiformat.cpp: small change in Description()
	
2007-06-14  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* configure.in, configure, Makefile.*: Updates from the Cygwin
	ports project for better compatibility (e.g., shared format
	modules on Cygwin). Thanks to Yaakov of Cygwin ports and Noel.

2007-06-13  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/chemdrawcdx.cpp: Fix a Universal binary problem on
	Mac OS X. We cannot rely on an autoconf test since the compiler is
	run twice: for ppc and i386. Thanks to Mike Stump from Apple for
	help.

	* scripts/java/: Updated classes for vectors of rings and vectors
	of strings.

	* Makefile.am, Makefile.in: Update for Chris's removal of the
	windows directory below.

2007-06-05  Chris Morley

	* src/formats/smilesformat.cpp(PaseSmiles):ignore any char<0
	Caused crash in isspace() in Visual C++8. Fixes bug
	#1730132 for this compiler at least.

	* windows/: Delete. This should have gone before because we are
	no longer supporting VC++6.
	
	* src/GUI/OBGUI.cpp(OnGetInputFile): Delete  | wxHIDE_READONLY 
	so that compiles with v2.8.3 of wxWidgets.

2007-06-04  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/cansmilesformat.cpp (AddHydrogenToChiralCenters):
	Fix PR#1700301. Never attempt to create atoms while iterating
	through the molecule. Safer technique -- keep a list of atoms to
	add hydrogens, add in a separate step.
	(AtomIsChiral): Fix PR#1699418. When determining chiral
	information for canonical SMILES, make sure to check if the atom
	is 3D. Otherwise it will never have wedge/hash bond flags.

	* src/mol.cpp (DeleteHydrogens): Update to fix PR#1704551 with H-H
	bonds not deleted. 

	* src/formats/smilesformat.cpp: Add warning message for unmatched
	ring closures described below.

	* configure, configure.in: Bump to 2.1.1 version.

2007-06-02  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/smilesformat.cpp: Fix bug reported by Craig with
	un-matched ring closures. These should now always be rejected,
	since _rclose will not be empty.

	* test/files/invalid-smiles.txt: Add ring closure tests from
	Craig.

	* test/mol.cpp: Add test for H-H deletion bug reported by Donald,
	PR#1704551.
	
2007-06-01  Noel O'Boyle <baoilleach@gmail.com>

	Final changes for Windows release of OBPython 1.2

	* windows-vc2005/OBPython/setup.py: bumped version up to 1.2
	* scripts/python/pybelapi.py: updated API docs

2007-05-30  Chris Morley

	* include/openbabel/base.h(tokenize): Add \r to default
	delimiters in the two functions. Now Windows or old Mac files
	(esp data files) should be read properly. 
	Cures bug #1727333, I hope.
	
2007-05-30  Chris Morley

	* src/fingerprint.cpp(Tanimoto): return 0.0 if no bits set.
	Should cure bug #1728410.
	
2007-05-30  Chris Morley

	* include/openbabel/lineend.h: remove sync()call from destructor
	so that can delete in OBConversion's destructor after
	istreams have gone.
	
	* include/openbabel/obconversion.h, *src/obconversion.cpp
	Add InstallStreamFilter() and call from Read() and Convert().
	I hope this will cure the Windows Python bug, and is a neater
	method all round.
	 
2007-05-25  Jean Brefort  <jean.brefort@normalesup.org>

	* src/formats/xml/cdxmlformat.cpp: don't clear the molecule
	before writing. [#1725343]

2007-05-22  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* */Makefile.in: Regenerate UNIX build files.

	* src/plugin.cpp: Make sure to #include <iterator> to solve GCC
	compile problem. 

	* src/descriptor.cpp: Change _isnan to IsNan, as discussed on the
	list to solve GCC compile problem.

	* scripts/*: Updated to compile. May have removed functionality
	because of plugin changes.

	* tools/obminimize.cpp, tools/obgen.cpp, tools/obenergy.cpp:
	Switch to OBPlugin::List().

2007-05-17  Chris Morley

	* tools/obprop.cpp: mods to use new versions of logP etc.
	
	* include/openbabel/groupcontrib.h, src/goupcontrib.cpp:
	move declarations of OBGroupContib into header file and delete
	OBLogP etc which should not have been there but still compiled.
	
	* src/plugin.cpp(ListAsVector): Add support for only IDs.
	
	* include/openbabel/fingerprint.h:comment had become
	uncommented.
	
2007-05-16  Noel O'Boyle <baoilleach@gmail.com>

	* Added Chris's header changes to Makefile.am
	* Removed comments starting with //* as they confused SWIG as there
	was no matching */
	* python SWIG interface file: Included the new headers
	Note: the python bindings still don't compile.

2007-05-14  Chris Morley

	* src/obconversion.cpp(Read, Convert): Do not install a 
	FilteringInputStreambuf if stream already contains one. This
	solves my problem with multiple reads on the same input stream.
	 
2007-05-13  Chris Morley

	* src/obconversion.cpp(Read): Ensured that FilteringInputStreambuf
	is used. Previously it wasn't, which could cause errors
	except with unix reading unix files.
	 
2007-05-12  Noel O'Boyle <baoilleach@gmail.com>

	* SWIG interface files: Added template for vectors of strings
	* pybel.py: Added informats and outformats, dictionaries corresponding
	to the supported input and output formats

2007-05-11  Jean Brefort  <jean.brefort@normalesup.org>
	* include/openbabel/format.h: add missing new line (makes gcc happy).
	* include/openbabel/plugin.h: remove ClassName:: from method declaration.
	* src/formats/xml/cmlformat.cpp: ditto.

2007-05-10  Chris Morley

	* src/forcefields/forcefieldmmff94.cpp, .h: Mod for new plugin
	framework.
	Add return values to several functions, so that it would compile.

2007-05-10  Chris Morley

	Revision of plugin classes including OBFormat
	OBFormat, OBForcefield, OBFingerprint and the new
	OBDescriptor all derive from OBPlugin (not OBPluginiter)
	New files:
	include/openbabel/descriptor.h, include/openbabel/format.h
	include/openbabel/plugin.h, src/descriptor.cpp
	src/filters.cpp, src/format.cpp, src/plugin.cpp
	Removed file:
	include/openbabel/pluginiter.h
	Relocation of these and other files probably a good idea
	(incl new folder src/descriptors) but not done yet.
	class OBFormat moved out of obconversion.h, .cpp into
	its own files.

	* tools/babel.cpp: remove -F and add -L option

	* src/transform.cpp: reorganize to include new options
	--filter, --add, --delete

	* src/groupcontrib.cpp: remove OBLogP and similar classes;
	now descriptors which are instances of OBGroupContrib

	* src/formats/* : several forcefield and fingerprint files
	changed to fit new framework, obmolecformat.h to register
	new options.

	* src/formats/xml/cmlformat.cpp: if inchi is a property 
	write to <identifier> not <property> tag.

	* src/GUI/OBGUI.h, .cpp:display plugins in a menu item.

	* windows-vc2005: update Window build

2007-05-10  Noel O'Boyle <baoilleach@gmail.com>

	* pybel.py: Added support for unitcell, and deletion of OBPairData
	(need to update the tests and the API docs)

2007-05-08  Chris Morley

	* include/openbabel.h/base.h, src/base.cpp: corrected
	bug in DeleteData(OBGenericData*) which is the probable
	cause of bug #1715092. Added new function DeleteData(string)
	which makes it easier to use.
	Moved the declarations for Tokenize and Trim from mol.h to
	base.h so that they could be used more widely. Maybe there is
	an even better home.

2007-05-08  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* scripts/*.i: Added casting from OBGenericData to OBUnitCell.

2007-05-08  Noel O'Boyle <baoilleach@gmail.com>

	* scripts/*.i: added a template for a vector of OBRing*
	which is required for OBMol.GetSSSR()

2007-05-08  Noel O'Boyle <baoilleach@gmail.com>

	* scripts/*.i: added a method to cast OBGenericData to
	OBPairData.
	
	* scripts/python/pybel.*: added dictionary-like support for
	accessing molecule data, and updated the tests and the API
	documentation.

2007-04-30  Chris Morley 

	* NSIS installer script: Add some extra data files, replaced
	*.* which was causing extra files to be copied, and deleted
	HKCU/SoftwareOpenBabelGUI/ on uninstall.
	As used in OpenBabel2.1.0_Windows_Installer.exe	

2007-04-26  Noel O'Boyle <baoilleach@gmail.com>

	* NSIS installer script: Updated to install the MS VC++
	run-time installer

2007-04-13  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* Merged 2.1.0 branch into trunk.

	* configure.in, configure: Bump to 2.2.0b1 version for trunk.
	(Not sure if we'll do 2.2 or 3.0, but we'll see.)

	* src/formats/inchi/strutil.c: Bug reported on the InChI mailing
	list.

	* src/formats/inchiformat.cpp: Bug caught during ChemSpotlight
	testing -- some files don't have chirality information (e.g., 3D
	files but with 0.0 coordinates throughout). Warn and give up.

2007-04-07  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* NEWS: Minor fixes for 2.1.0 final release.

2007-04-05  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* data/psa.txt: corrected smiles for 3-rings.

	* src/groupcontrib.cpp: call ConvertDativeBonds before assigning
	contributions, is needed for TPSA (e.g. [N](-*)(=*)=* ). Update to
	documentation.

	* include/openbabel/groupcontrib.h: documentation update.

2007-04-02  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* include/openbabel/residue.h: Undo previous change. Rich Apodaca
	suggested some SWIG-fu instead.

	* scripts/ Update accordingly. Includes ruby changes, new README
	and examples.

2007-03-30  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/base.cpp: Additional "What's new" documentation for 2.1
	release.

	* include/openbabel/residue.h: Hide some residue names (e.g.,
	_1MG) from SWIG wrappers -- such constants are not valid symbols
	in some languages like Ruby.

	* scripts/ Update accordingly.

2007-03-29  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* scripts/: Updated interface wrappers, including new Java
	README. (Java is confirmed to work on Mac OS X.)

2007-03-27  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/obconversion.cpp: Make sure to always return from any
	exception. Otherwise we could crash running code.

	* src/formats/mdlformat.cpp: Avoid infinite loop in
	ParseAliasText.

	* src/formats/acrformat.cpp: Minor formatting change.

	* test/Makefile.am, test/Makefile.in, test/wrapper.sh: Add
	inchiwrite tests to suite.

	* test/inchiwrite.cpp, test/inchi.pl: Formatting to integrate into
	Perl "prove" test suite.

2007-03-26  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* tools/obprop.cpp (main): Fix PR#1688251 with while/for loop on
	CML files. Thanks to Tapani Kinnunen for the report.

	* src/formats/mol2format.cpp: Fix problem reported by Noel with
	"USER_CHARGES" appearing instead of Gasteiger.

	* src/data.cpp, src/groupcontrib.cpp: Fix doxygen warnings.

	* include/openbabel/groupcontrib.h: Documentation fixes.

	* NEWS: Minor fixes.

	* doc/*.1, doc/*.html: Documentation updates.

2007-03-24  Benoit Jacob <jacob@math.jussieu.fr>

	* include/openbabel/atom.h, src/atom.cpp: Change SetVector to
	const parameter.

2007-03-23  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* tools/obprop.cpp: Function string sequence(OBMol) was not returning
	any string.

2007-03-23  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* data/psa.txt, data/mr.txt, data/logp.txt: Small changes -- DOS
	to UNIX line endings. 

	* test/Makefile.am, test/Makefile.in: Make sure to add inchiwrite
	to compile list.

	* test/wrapper.sh: Add notes on passing arguments to "prove."

	* tools/obprop.cpp: Fix formatting problems - PR#1685879, reported
	by Tapani Kinnunen.

	* src/formats/mol2format.cpp: Add new -xl flag to output "ligand
	only" data (i.e., no residue info). Fixes PR#1683788.

	* src/formats/smilesformat.cpp: Fix PR#1680070 with output of
	chiral root (first) atoms. Really need to clean up BuildTree()
	since that if() statement is messy, but works for 2.1 release.

2007-03-23  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* data/psa.txt: Added ";heavy", fixes the logp_psa test.

2007-03-22  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/forcefield.cpp: When determining length, if two atoms are
	really close, add a small random separation (~0.1Ang). Fixed
	PR#1684479.

2007-03-22 Chris Morley

	* windows-vc2005: Simplified projects to OpenBabelDLL with driver
	programs for commandline, GUI, and Python interface.

	* include/openbabel/forcefield.h: So that the Python build
	in Windows will work, added a dummy function so that the 
	compiler will really make some functions of the templated class
	OBIter<OBForceField> which SWIG is expecting. The needs to be
	done properly, but needed to get it working for the 2.1 release. 
	
	* include/openbabel/obconversion.h and src/obconversion.cpp:
	added the patches supplied by Jerome Pansanel for providing a
	list of available formats.
	
2007-03-20 Chris Morley

	* src/formats/xml/cmlformat.cpp: Add code to write W and H in
	bondstereo. Ensure <bondStereo> is written in array form.
	
	Mods inDoAtoms to read the right set of atom coordinates.
	
	Add option to write bonds as aromatic.
	
2007-03-19  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/obconversion.cpp: Amend yesterday's change to address double
	free() bug, PR#1683541. Still don't like this, as it could leak
	the zip_istream we create.

	* src/parsmart.cpp: Fix PR#1683890 for SMARTS pattern 'x' with no
	number. Default is "at least one ring bond."

	* test/files/smartstest.txt, test/files/smartsresults.txt: Update
	for above. 'x' pattern and 'x0' pattern.

2007-03-19  Donald E. Curtis <dcurtis3@sourceforge.net>

	* src/mol.cpp: OBMol::DeleteAtom - Moved DeleteAtom to *after* the
	EndModify call.  At this point the atom is already removed from the _vatom
	vector.  OBMol::DeleteBond - Moved DeleteBond to *after* the EndModify
	call.  At this point the bond is already removed from the _vbond vector.

2007-03-18 Chris Morley

	* src/formats/mdlformat.cpp: Added support for atom aliases when
	reading. It's not much described in the main MDL specification,
	so this implementation is just adequate to handle the InChI
	samples, where for some reason, this antiquated feature is
	used in several molecules.
	
	* src/formats/inchiformat.cpp(ReadMolecule): Now reads implicit
	H isotopes.
	(WriteMolecule): rewrote option to not display routine warnings.
	
	* test/: Added inchiwrite.cpp, two NIST sample molecule sets and
	annotated results sets.
	
	* src/formats/getinchi.cpp: Added declaration of GetInChI().
	
	* src/canon.cpp (FixCisTransBonds): changed | to || in if statement
	
	* src/forcefield (GenerateCoordinates): initialize torang to 0,
	to avoid compiler warning. This variable doesn't seem to be
	doing much but please could somebody check this is ok.
	
2007-03-18  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/mol.cpp (Separate): Add support for copying, updating
	OBChiralData. Fixes PR#1680730.

	* src/obutil.cpp: Fix typo in yesterday's change.

	* test/logp_psa.cpp: Update to output predicted values, even if
	they match.

	* src/obconversion.cpp: Make sure to declare the new readbuf
	outside of the if() scope.

2007-03-17  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/molchrg.cpp: Add new OBPairData descriptor "PartialCharges"
	to express origin as Gasteiger charges.

	* src/formats/qchemformat.cpp, src/formats/mopacformat.cpp, 
	src/formats/gamessformat.cpp, src/formats/gaussformat.cpp: 
	Set PartialCharges descriptor to express origin as Mulliken
	charges.

	* src/formats/mol2format.cpp: Use above.

	* src/*: Strip out 0.0f and similar floating-point casts,
	extending yesterday's changes with forcefield.cpp. Defensive
	programming against similar floating-point issues.

2007-03-16  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* include/openbabel/atom.h, include/openbabel/mol.h: Fix
	PR#1626789 with large PDB files. Fixes regression to 2006-09-25
	changes supporting >2^16 atoms or bonds.
	
	* src/mol.cpp(EndModify): Ensure idx is unsigned (to match atom indexes).

	* include/openbabel/chains.h, src/chains.cpp: Make sure atomids is
	int, not short. Atom IDs can go up to a full unsigned int.

	* src/formats/chemdrawcdx.cpp: Some code cleanups, including use
	of obErrorLog.

	* src/forcefield.cpp: Fix PR#1680717. Seems to be an issue with
	floating-point roundoff. When 0.0f and similar tags were removed,
	works great.

2007-03-16  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/groupcontrib.cpp, include/openbabel/groupcontrib.h: General
	class to handle group contribution algorithms (LogP, TPSA, MR, ...).
	Also contins OBLogP, OBPSA and OBMR. Should these simple classes be
	bundled in a OBDescriptors class?

	* src/logp.cpp, src/psa.cpp, include/openbabel/logp.h,
	include/openbabel/psa.h: moved to groupcontrib.cpp/h

	* data/mr.txt: data for molecular refractivity.

	* test/logp_psa.cpp: forgot to commit.

2007-03-14  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/inchiformat.cpp, src/formats/cmlformat.cpp: Fix compile
	problems with GCC and last changes. (Return value from
	OBChiralData should be assigned to a full object.)

	* src/obconversion.cpp, src/obconversion.h: Tackle some gzip
	problems, including PR  #1617838. We need to be sure we don't try
	to gzip twice. Create a zip_istream pointer, then free it as
	needed.

	* scripts/*: Updated for recent library changes.

2007-03-13 Chris Morley
	
	* src/formats/inchiformat.cpp: Add bond stereo handling to
	ReadMolecule(). Correct 0D stereo in reading and writing.
	Remove the waring message about stereochemistry. Apart from
	a few special cases, e.g. allenes, 'either' parity, I think
	the InChI writing and reading is now ok., but still more 
	testing needed...
	TestFormat messages improved.
	
	* src/formats/xml/cmlformat.cpp: Correct handling of 0D
	atomParity on reading and writing.
	
	* src/GUI/optswx.cpp: Added documentation

2007-03-13  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefields/forcefieldghemical.cpp: Fix 1,4-scaling problem.

2007-03-13  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/forcefields/forcefieldmmff94.cpp: Switch pow() to use
	doubles to prevent compile problems on older Linux/GCC systems.
	Switch to using OpenDatafile.

	* src/logp.cpp, src/psa.cpp: Switch to use OpenDatafile() call.

	* src/fingerprints/finger3.cpp: Likewise.

	* src/forcefields/forcefieldmm2.cpp,
	src/forcefields/forcefieldghemical.cpp: Likewise.

	* src/formats/xml/Makefile.am, src/formats/xml/Makefile.in: Fix
	problems with compiling XML formats on Mac OS X.

	* include/openbabel/Makefile.am: Make sure to include psa.h and
	logp.h in distribution.

	* src/data.cpp: Move comments to provide better documentation for
	OpenDatafile. Switch OBGlobalDatabase::Init to OpenDatafile.

	* include/openbabel/data.h: Add envvar argument to OpenDatafile.

	* config.sub, config.guess, configure, Makefile.*: Update with
	automake-1.10 and autoconf-2.61.

2007-03-13  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* tool/obminimize.cpp: added '-sd', '-cg', '-c criteria' options

	* doc/obminimize.1: update for added options (man pages for obenergy
	and obminimize are also on wiki now) 

2007-03-12  Geoffrey Hutchison  <babel@geoffhutchison.net>	

	* src/formats/mopacformat.cpp: Added patch #1676963
	for MOPAC 2007 output format. Thanks to 'dn2010.'
	(Daniil Bratashov). Solves PR#1654907.

	* src/formats/qchemformat.cpp: Added support for keywords.

	* src/formats/acrformat.cpp: New format, contributed by Daniel
	Mansfield.

	* src/formats/Makefile.am, src/formats/Makefile.in: Add acrformat.

	* src/formats/gaussformat.cpp: Add feature to write bonds,
	contributed by Daniel Mansfield.

	* src/formats/fchkformat.cpp: Add initial support from Maxim
	Fedorovsky. (Maxim's contribution also supported vibrational data
	using Eigen and matrix operations.)

	* include/openbabel/generic.h, src/generic.cpp: Include
	OBVibrationData class (even if the matrix operations to use it
	aren't in Open Babel yet).

	* tools/obprop.cpp: Additional properties, including canonical
	SMILES and InChI. Fixes request PR#1620842.

	* THANKS: Work on updates for 2.1 release.

	* NEWS: Likewise.

2007-03-11 Chris Morley
	
	* src/data/atomtyp.h: Aggressive simplification of 
	IMPVAL for oxygen and new value for Si. Read and test with
	/test/files/FormulaTest.smi. Solves bugs 1635901 and
	1474930
	
	* include/openbabel/forcefield.h: Remove unused 
	#ifndef isnan

2007-03-11 Chris Morley

	* src/formats/inchiformat.cpp: Moved handling of InChI
	options to new subroutine and it added options to 
	ReadMolecule().
	In WriteMolecule() removed deletion of OBChiralData and
	re-zeroed z coords, so that OBMol is unchanged.
	
	* src/GUI/OBGUI.cpp, OBGUI.h: Made default ostream a 
	stringstream which is written to textbox at end. Solves
	bugs 1596906 and (probably) 1669973.
	Added facility for copying output to input.
	
	* src/GUI/optswx.cpp,stdwx.cpp:Leave header files in src/GUI

2007-03-10  Tim Vandermeersch <tim.vandermeersch@gmail.com>
	
	* include/openbabel/psa.h, src/psa.cpp, src/Makefile.am,
	src/Makefile.in, data/psa.txt: Added OBPSA class.

	* tools/obprop.cpp: Added PSA property.

	* test/logp_psa.cpp: LogP and PSA test for 3 molecules.

2007-03-10 Chris Morley

	* src/formats/inchiformat.cpp(WriteMolecule): For 2D molecules
	use a modified CalculateChiralVolume() to add psueudo z
	coordinates, rather than using InChI's 2D bond stereo method.
	I think we are close to getting the InChI write stereochemistry
	right at last, but systematic checking needed.
	
	* include/openbabel/chiral.h, src/chiral.cpp
	(CalculateChiralVolume): add backwards-compatible extra 
	parameter to facilitate use of pseudo z coordinates.
	
	* src/formats/cansmilesformat.cpp(BuildCanonTree): two more
	instances of the bug corrected yesterday.

2007-03-10  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* configure, configure.in: Bump for 2.1.0b7 snapshot.

	* Doxyfile: Bump version for eventual 2.1.0 release.

	* src/*, src/formats/*: Add OBGenericData::SetOrigin calls to
	provide attribution to sources of data: file input, user input,
	perceived, etc.

	* tools/obfit.cpp: Likewise.

2007-03-09  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/logp.h, src/logp.cpp, src/Makefile.am,
	src/Makefile.in, data/LogP.txt:
	Added OBLogP class (see mailing list).

	* tools/obprop.cpp: Added LogP property.

2007-03-09 Chris Morley

	* src/formats/cansmilesformat.cpp(BuildCanonTree):The insert in 
	line 893 invalidates iterator ai. Add a line so that the subsequent
	test (outside the loop) does not crash my debug build but always
	is false - no push_back. Solves bug 1650790. I hope that Craig or
	somebody can check whether the cannonical SMILES output is still ok.

2007-03-09  Donald E. Curtis <dcurtis3@sourceforge.net>

	* include/obiter.h: added deconstructor functions.  Lack of these can
	cause problems when using the FOR_*_OF_* macros.

2007-03-08  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* forcefield.h/cpp: documentation update.

2007-03-08  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/smilesformat.cpp: Fix problem with "invented" stereo
	from 2D files -- make sure to check bond torsion ~0.0 and
	~180.0. Fixes PR#1663814.

	* doc/*.1: Initial cleanups of man pages, including new pages for
	obenergy, obminimize, and obrotamer.

	* Doxyfile-man: Update to point to new babel location.

	* src/chains.cpp: Fixing bug with chain perception related to
	PR#1626789, and 1577248. Setting visit flags skipped
	marking some atoms as members of residues.

	* test/residue.cpp: Add new tests for PR#1577248.

	* data/types.txt, data/types.h: Add Lp atom type for Sybyl based
	on PR#1672575.
	
2007-03-08  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/obutil.cpp: moved IsNan() to here. Hopefully this will eliminate
	the problem with non C99 compatible compilers.

	* src/forcefield.cpp: update documentation + small optimization
	changes.

	* include/openbabel/forcefield.h: update documentation (in progress).

	* tools/obenergy.cpp: Added man page.
	
	* tools/obminimize.cpp: Added man page.

2007-03-07 Chris Morley

	* src/for,ats/smilesformat.cpp(FixCisTransBonds): replace
	bitwise | by logical ||. 
	I guess if (v1 < 2 || v1 > 3 || v2 < 2 || v2 > 3) was meant.
	
	* include/openbabel/base.h(GetData(DataOrigin), base.cpp: 
	This was returning a reference to a local object. 
	Return a copy of it instead.
	
	* src/formats/inchiformat.cpp: Reformat Description().
	In WriteMolecule, modify bond stereo to work with new Up/Down
	usage.
	
	* src/formats/xml/cmlformat.cpp: For reading and writing,
	modify bond stereo to work with new Up/Down usage.
	Now writes bondStereo elements in array form.
	
2007-03-06  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* tools/obdoc.cpp: Update for wiki format to facilitate updates
	after 2.1 release. 

	* src/formats/pdbformat.cpp: Mark that chain/residue
	perception is not needed. Make sure that code anticipates atoms
	with no residue.

	* src/data.cpp (OBResidueData): Anticipate that some atoms will
	have no residue.

	* src/formats/mopacformat.cpp: Add keyword support, fix problem
	with writing molecules (i.e., molecule was cleared before
	cartesians written).
	
	* src/formats/smilesformat.cpp, src/formats/mol2format.cpp, 
	src/formats/xml/cmlformat.cpp, src/formats/carformat.cpp,
	src/formats/cifformat.cpp, src/formats/fastaformat.cpp,
	src/formats/gaussformat.cpp, src/formats/gamessformat.cpp,
	src/formats/alchemyformat.cpp, src/formats/cansmilesformat.cpp:
	Clean up descriptions and indentation.

2007-02-28  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/forcefield.cpp, src/forcefield.h: Cut out some compiler
	warnings from	GCC. Remove is14(), already available through
	OBAtom::IsOneFour.

	* src/forcefields/forcefieldghemical.cpp: Make sure to return from
	all functions.

	* src/dlhandler_unix.cpp: Use global loading. May improve script
	language interface on Linux.

	* include/openbabel/base.h, src/base.cpp: Support for filtering
	OBGenericData based on the source.

	* include/openbabel/generic.h, src/generic.cpp: Likewise.

	* test/files/smartsresults.txt: Fix results based on Craig's
	SMARTS changes today.

2007-02-28  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp: Replaced isnan() by OBIsNan(). 

2007-02-28  Craig James <cjames@emolecules.com>

	* src/formats/smilesformat.cpp: Fixed PR#1663854 "Canonical SMILES
	gives incorrect cis/trans" in cansmilesformat.cpp, also fixed the
	same problem in smilesformat.cpp.

	* Disabled SMARTS parsing of cis/trans '/' and '\', these are
	temporarily treated as ordinary single bonds, due to severe bug
	in SMARTS matching.  See PR#1663730, this is a temporary workaround.

2007-02-27  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/mol2format.cpp: Fix PR#1666406 with mis-typed Sybyl
	atom types.

	* data/types.txt, data/types.h: Likewise.

2007-02-26  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/inchiformat.cpp: Fix compile problems on GCC.

	* src/mol.cpp: Fix PR#(PR#1665519) with AddHydrogens when no
	conformers are available.

	* Doxyfile: Remove babelconfig and config from header list.

	* src/patty.cpp: Mark as deprecated.

	* src/fingerprint.cpp, src/mol.cpp, src/typer.cpp
	src/parsmart.cpp, : Documentation updates.

	* include/obmolecformat.cpp, src/formats/obmolecformat.cpp,
	include/openbabel/xml.h, include/openbabel/typer.h,
	include/openbabel/parsmart.h, include/openbabel/rand.h, 
	include/openbabel/mol.h: Likewise.

2007-02-26 Chris Morley

	* src/formats/inchiformat.cpp(WriteMolecule): Mods to 0D and 2D
	stereochemistry; more to be done, work in progress.
	Added Option to use InChI options.
	
	* src/formats/mdlformat.cpp(ReadMolecule):Use the content of
	any "NAME"(case independent) property as OBMol title if there
	is not already one.
	
	* src/format/xml/cmlformat.cpp, xml.cpp(GetContent): Add Trim()
	after several cases of xmlTextReaderConstValue to remove any \n
	
	* src/obconversion.cpp(Convert): Add test for pInFormat to avoid
	crash with erroneous input.
	
	* src/mol.cpp(Separate): Copy dimension to each fragment.

2007-02-26  Donald E. Curtis <dcurtis3@sourceforge.net>

	* src/mol.cpp: OBMol::AddBond() / OBMol::DeleteBond() 
	Bond indexing starts at one.  Had to undo the change made by Tim and
	correct the fix on 2007-01-07 as a result of the bulk resizing.

2007-02-25  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/ring.cpp (FindRings): Don't return early if all atoms are
	visited. Some atoms may be in multiple rings and will be visited
	more than once on a graph traversal.

2007-02-25  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/mol.cpp: OBMol::DeleteBond()
	_vbond.erase(_vbond.begin() + bond->GetIdx());
	Since _vbond indices start at 0 and bond->Getdidx() indices start at
	1, the line is replaced by:
	_vbond.erase(_vbond.begin() + bond->GetIdx() - 1);

2007-02-25  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/forcefield.h: comment out Description() (comply
	with new pluginiter).

	* obmm, obenergy, obminimize, obgen: comment out the use of
	Description().

2007-02-25 Chris Morley

	* windows-vc2005/OpenBabelDLL: Updated OpenBabelDLL.vcproj.
	Temporarily added OpenBabelDLL.dll and OpenBabelDLL.lib
	(without forcefield)
	
	* include/openbabel/kinetics.h, lineend.h, pluginiter.h:
	documentation changes.
	
2007-02-25  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/ring.cpp: Added a check in FindRings to make sure the depth is
	not larger than the number of atoms we have. (see mailing list)

2007-02-24  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp: Added ConjugateGradientsInitialize() and
	ConjugateGradientsTakeNSteps(). ConjugateGradients() still exists and
	uses these two new function.
	Idem for SteepestDescent.

2007-02-24  Tim Vandermeersch <tim.vandermeersch@gmail.com>
	
	* src/mol.cpp: changes OBMol::NewBond, fixes PR#1666785. AddBond() was
	resizing the _vbond vector and NewBond() used push_back to add items.
	This created a gap bewteen the bonds added by NewBond() and AddBond().
	The FOR_BONDS_OF_MOL iterator expects all bonds to be at the begin of
	the vector. Note: this also fixes the initial problem with the
	OBAngleData and OBTorsionData.

	* test/addhydrogens.cpp: added/deleted... (was used for debugging)

	* src/forcefield.cpp: changes "*logos << ..." to OBFFLog(...)

	* src/forcefields/forcefieldghemical.cpp: changes "*logos << ..." to 
	OBFFLog(...)

2007-02-23  Tim Vandermeersch <tim.vandermeersch@gmail.com>
	
	* data/ghemical.prm: Final update. All molecules from the validation
	ste are given correct atom types and charges.

	* src/forcefields/forcefieldghemical.cpp: Calculated energies comply
	with those from ghemical except for 1,4-scaling. Ring atoms are not
	always scaled in ghemical, not sure why.

	* src/forcefield.cpp: Added OBFFLog, fixes PR#1664279. (tested, but
	needs to replace all "*logos << ..." lines)
	Moved IsInSameRing from OBForceFieldMMFF94 to OBForceField.
	Test molecule from PR#1665765 minimizes correctly, but added cutoff
	accuracy to make sure.

	* tools/obmm.cpp: Added commands for DelHydrogens, GenerateCoordinates,
	SystematicRotorSearch and NumConformers.

	* include/openbabel/forcefield.cpp: Added a definition for isnan.
	(should be replaced with a better method in the math class??)

2007-02-22  Donald E. Curtis <dcurtis3@sourceforge.net>

	* src/mol.cpp: Added SetParent call to NewBond function.  Should resolve
	segfault issues related to bug 1665519.

2007-02-21  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/mol.cpp (NewBond): Fix PR#1665649. Make sure to set the
	parent of a newly-created bond.

	* test/mol.cpp: Add test for above.

	* src/formats/Makefile.am, src/formats/Makefile.in: Fix linking
	problems on Linux discovered by Craig.

2007-02-20  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* scripts/*.i, scripts/*: Add access to OBForceField classes and methods.

	* tools/obprop.cpp: Remove "test" methods, introduced sometime
	since the last release.

	* tools/obmm.cpp: Make sure to set the OBForceField log to prevent
	crashes (e.g., PR#1664279).

	* Doxyfile: Bump version number to 2.1.0b6 for new snapshot.

	* configure.in, configure: Bump to 2.1.0b6 for new snapshot.

	* src/forcefield.cpp, tools/obrotamer.cpp: Update to use
	std::vector instead of arrays.

	* src/rotamer.h, src/rotamer.cpp: Update documentation to use
	std::vector. Fixes compile problems on Windows.
	AddRotamer(std::vector) New method for above.

	* src/base.cpp: Documentation updates.

	* src/canon.cpp, src/forcefield.cpp: Likewise.

	* include/openbabel/ring.h, generic.h, pluginiter.h, canon.h,
	forcefield.h, lineend.h: Likewise.

	* src/all.h, src/formats/all.h, src/Makefile.am, src/Makefile.in,
	src/formats/Makefile.am, src/formats/Makefile.in: Update to allow
	using precompiled headers again.

	* src/canon.cpp, src/formats/cansmilesformat.cpp: Fix crash caused
	by linking problem. CanonicalLabels() moved to the Open Babel namespace.

2007-02-20  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp: UpdateCoordinates now 'knows' about conformers
	and selects the correct one before returning.

	* tools/obminimize.cpp: Implemented (was copy of obmm).

2007-02-18  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefield.cpp: Added vector analysis methods 
	VectorLengthDerivative(), VectorAngleDerivative(), 
	VectorTorsionDerivative()

	Removed SetEnergyCalculated and related methods for the moment.

	* src/forcefields/forcefieldghemical.cpp: Updated to use the vector
	analysis methods.
	
	* src/forcefields/forcefieldmmff94.cpp: Updated to use the vector
	analysis methods.

	* tools/obgen.cpp: Added -ff option.

	* tools/obenergy.cpp: Added. Calculate the energy of a molecule.
	
	* tools/obminimize.cpp: Added. Minimize the energy of a molecule.

2007-02-18  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/typer.cpp: Fix PR#1594657 -- long recursion for large
	multi-ring systems like fullerenes. This started by two calls to
	CheckAromaticity, including one allowing recursion depth of
	20. Discussion with Henry Rzepa suggested 14 as a reasonable
	cutoff.

	* src/forcefields/forcefieldmmff94.cpp: Fix compilation problem
	with call to NumericalDerivative.

2007-02-17  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/forcefield.h: Some doxygen comments updated.

	* src/forcefield.cpp: Added SystematicRotorSearch(), uses RotamerList
	class to rotate all torsions, select the best conformation (lowest
	energy) and minimize it (1000 steps).

	SteepestDescent(int steps, int method) and 
	ConjugateGradients(int steps, int method): 
	the "int method" argument is added, can be set to
	OBFF_ANALYTICAL_GRADIENTS (default) or OBFF_NUMERICAL_GRADIENTS.

	Added ValidateGradientError(vector3 &numgrad, vector3 &anagrad):
	calculate the difference in % between the analytical and numerical
	gradient.

	NumericalDerivative(OBAtom *atom, int terms) and
	GetGradient(OBAtom *a, int terms):
	the added argument terms can be set to OBFF_ENERGY (total gradient,
	default), OBFF_EBOND (gradient for bond stretching), ... (Mainly used
	for ValidateGradients

	* src/forcefields/forcefieldghemical.cpp: All analytical gradients are
	now correct (errors can still be minimized by limiting the number of
	devisions etc...) ValidateGradients also compares gradients for
	individual energy terms. 
	
	Electrostatic term implemented.

	* data/ghemical.prm: Added charge parameters.

	* tools/obgen.cpp: Changed to SystematicRotorSearch().
	
	* tools/obmm.cpp: Added help command.

2007-02-17  Jean Brefort  <jean.brefort@normalesup.org>

	* src/formats/chemdrawcdx.cpp: don't center molecules.

2007-02-16  Jean Brefort  <jean.brefort@normalesup.org>

	* src/formats/obmolecformat.cpp: make it compile again (gcc-4.1.2).

2007-02-15 Chris Morley

	Sorry that incomplete code keeps escaping. I'll put up Separate
	code now, although the performance for 0D stereochemistry (sigh)
	needs sorting out. Fulfills Feature Request 1581542
	* include/openbabel/obiter.h, src/formats/obiter.cpp: Extend
	OBMolAtomDFSIter operator* to return NULL to indicate end of a fragment.
	Add parameter to constructor allow the iteration to start at any atom.
	
	* include/openbabel/mol.h, src/formats/mol.cpp: Add API function
	OBMol::Separate() to return disconnected fragments in OBMol vector.
	
	* include/openbabel/obmolecformat.h, src/formats/obmolecformat.cpp:
	Code for applying Separate() in conversion process.
	Also, add ReadNameIndex() for indexing names in multiobject files.
	Requires further testing.
	
	* src/formats/transform.cpp: Added options --separate and 
	renamed -j as --join. (-j still works)

2007-02-15  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/forcefields/forcefieldmm2.cpp,
	src/forcefields/forcefieldmmff94.cpp: Remove exit() calls in favor
	of error messages and default return values. Fixes PR#1650132.

	* src/forcefields/forcefieldghemical.cpp: Add default
	electrostatic function (return 0.0) to fix compilation error.

	* tools/obmm.cpp: Add cg command for conjugate gradients.

2007-02-15  Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* include/openbabel/obconversion.h: Removed OBConversion:: before
	CheckForUnintendedBatch(...); to fix compilation error.

	* src/forcefield.cpp: Added/Updated LineSearch, SteepestDescent,
	ConjugateGradients. Also added the same functions as Validate... to
	test the implementation for x^2 + 2 y^2.
	Added bool is14(OBAtom *a, OBAtom *b). Should move to atom.cpp??
	Started working on DistanceGeometry (needs more sophisticated matrix
	operations than OB currently supports).

	* src/forcefields/forcefieldghemical.cpp: Now uses
	OBFFXXXCalculationYYY to improve performance. All energy functions have
	analytical derivatives. Small corrections to the energy expressions to
	match energies produced by ghemical, added 14-scaling for non bonded 
	energy terms. Different bondtypes in ghemical.prm are no longer
	ignored. Added ValidateGradients().

	* src/forcefield/forcefieldmmff94.cpp: Continue work on MMFF94 to
	comply with the validation suite.
	Added ValidateGradients().
	
2007-02-14  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/obmolecformat.cpp: Comment out sections of
	ReadChemObjectImpl -- looks like code from Chris invoking
	OBMol::Separate().

2007-02-13 Chris Morley

	Clear OBMol objects by default at start of ReadMolecule.
	
	* include/openbabel/base.h: Add CastAndClear().
	
	* src/*format.cpp(ReadMolecule): Replace dynamic_cast by a call
	to CastAndClear().
	
	* include/openbabel/obconversion.h, src/obconversion.cpp
	(Read, ReadString, ReadFilemove): Remove clearFirst parameter,
	since it is no longer needed. 
	
2007-02-13 Chris Morley

	* include/openbabel/obconversion.h, src/obconversion.cpp:
	Corrected bug 1657817 - wrong name for batch conversion
	of one file - which was due to misinterpretation as 
	splitting operation. Solution requires that the base name
	for output files splitting is not empty - not a big constraint.
	Added extra warning messages and checks in 
	CheckForUnintendedBatch(). Made this function and 
	BatchFileName() and IncrementedFileName() protected.
	
2007-02-12  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/cansmilesformat.cpp
	(OBMol2Cansmi::AddHydrogenToChiralCenters): Fix PR#1658317 with
	chirality on last atom. Switched iterator to use obiter.h macros.

	* configure.in, configure, src/config.h.in: Add big-endian,
	little-endian check,	which defines WORDS_BIGENDIAN for
	chemdrawcdx.cpp (and other binary formats in the future).

	* src/formats/chemdrawcdx.cpp: Solve compilation problems with
	previous change. (endian.h and byteswap.h are GNU and Linux
	extensions.) Requires declaration of WORDS_BIGENDIAN in
	babelconfig.h (as above for Unix).

	* src/Makefile.am, include/openbabel/Makefile.am,
	src/obconversion.cpp: Remove references to newline.[h, cpp].

	* include/openbabel/lineend.h: Add std namespace declarations to
	solve compilation problems with GCC.

	* include/openbabel/ring.h, src/ring.cpp: Documentation updates,
	added new constructor to simplify OBRingSearch::SaveUniqueRing().

	* src/generic.cpp, include/openbabel/generic.h: Change reference
	of DataSource to DataOrigin, as suggested by Noel.

	* include/openbabel/bitvec.h: Fix bug (and documentation) with
	FirstBit().

	* include/openbabel/obutil.h: Fix GCC compile warning.

	* test/cansmi.cpp: New test program for Canonical SMILES format.

	* test/wrapper.sh, test/Makefile.am, test/Makefile.in: Use it.

	* data/types.txt, data/types.h: Fix PR#1650239 with incorrect
	Sybyl Mol2 atom types.

2007-02-11 Chris Morley

	Replaced filter for line endings with a version which works
	with fastsearch. Solves bug 1617324.
	* include/openbabel/newlinebuf.h and src/newlinebuf.cpp:
	replaced by include/openbabel/lineend.h
	
	* src/obconversion.cpp: code in Convert() and Read() replaced.
	
	Removed peek() in the Convert()loop. This was needed for 
	some other mod, which has probably not yet been committed.
	This is not causing any problems for me, but is rather
	central to the conversion process.
	
	Added some documentation on GetOutputIndex. 

2007-02-08  Noel O'Boyle <baoilleach@gmail.com>

	* scripts: Regenerated bindings for scripting languages
	
2007-02-07  Jean Brefort  <jean.brefort@normalesup.org>

	* src/formats/chemdrawcdx.cpp: make it work on little-endian
	machines.

2007-02-02 Chris Morley

	* include/openbabel/mol.h: Remove definition of Separate()
	which was added prematurely.
	
2007-02-05  Noel O'Boyle <baoilleach@gmail.com>

	* scripts: Removed %apply of OUTPUT and regenerated scripts

2007-02-02 Chris Morley

	* windows-vc2005/Distribution: remove the Windows DLLs added
	yesterday.

2007-02-01 Chris Morley

	* windows-vc2005/Distribution: add some Windows DLLs for the 
	installer.

2007-01-31  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* include/openbabel/canon.h, src/canon.cpp: Add canonical
	numbering code from Craig James. (Eventually needs integration
	into other methods -- these duplicate since they support
	fragments.)

	* src/formats/cansmilesformat.*: Add CANSMI format for Canonical
	SMILES output. Eventually needs better integration into current
	SMI format rather than duplication.

	* src/Makefile.* include/openbabel/Makefile.*: Add above files.

2007-01-27  Jean Brefort  <jean.brefort@normalesup.org>

	* src/formats/cdxmlformat.cpp: add support for formal charges.

2007-01-26  Jean Brefort  <jean.brefort@normalesup.org>

	* src/formats/xml/cdxmlformat.cpp: fixed issues in writing
	multi-molecules files.

2007-01-26 Chris Morley

	* src/obconversion.cpp, include/openbabel/obconversion.h: Mitigate
	some of the uncertainties in writing multi-molecule files.
	pointed out by Jean Brefort, including bug 1644241.
	Added SetLast as an alternative name for SetOneObjectedOnly.
	Added documentation to GetOutputIndex().
	
2007-01-25  Jean Brefort  <jean.brefort@normalesup.org>

	* src/formats/xml/cdxmlformat.cpp: scale bond lentghs to 30 (using the
	first molecule) and enable write support.

2007-01-25  Jean Brefort  <jean.brefort@normalesup.org>

	* src/formats/xml/cdxmlformat.cpp: add some stereochemistry and initial
	write support (not enabled).

2007-01-24  Jean Brefort  <jean.brefort@normalesup.org>

	* src/formats/xml/Makefile.am: add cdxmlformat.
	* src/formats/xml/cdxmlformat.cpp: make it basically work.
	* src/formats/xml/xml.cpp: fix a memory leak.

2007-01-23  Donald E. Curtis <dcurtis3@sourceforge.net>

	* tools/obmm.cpp: Added check for cin.eof resolving bug 1639880.

2007-01-22  Donald E. Curtis <dcurtis3@sourceforge.net>

	* include/openbabel/bond.h: Added const versions of GetBeginAtom and
	GetEndAtom.

	* include/openbabel/atom.h: Added const version of GetVector.  Required
	changing _v to mutable.

	* src/atom.cpp: Added implementation of GetVector.

	* include/openbabel/math/vector3.h: Added const to function definition of
	AsArray function.

2007-01-17  Noel O'Boyle <baoilleach@gmail.com>

	* windows-vc2005/Distribution: Added all of the remaining files to the
	installer script so that you can now make an installer directly after
	compiling the relevant projects (OBGUII and OBComLn). Have also
	checked in the example files included with the Windows distribution.

2007-01-16  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* include/openbabel/mol.h, src/*: Documentation updates.

	* include/openbabel/Makefile.am: Make sure pluginiter.h is included.

2007-01-14  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/snprintf.c: Update with declaration of GPL license in
	addition to Artistic. Checked with author:
	http://www.ijs.si/software/snprintf/

	* configure.in, configure, Makefiles: Bump version number to
	2.1.0b5.

	* src/forcefields/forcefieldmmff94.cpp: Added stub for
	electrostatic calculation. Solves linking problems on Mac OS X.

2007-01-14  Noel O'Boyle <baoilleach@gmail.com>

	* windows-vc2005/Distribution: Edited the installer script to make it
	easier to set the version number. Also added explicit paths to some of
	the DLLs in the SVN repository.

	* COPYING: Removed the text after the terms and conditions. This is
	the text describing how to apply the license.

2007-01-13  Noel O'Boyle <baoilleach@gmail.com>
	
	* windows-vc2005/Distribution: Added files necessary for creating an
	installer using NSIS, an open source software for creating Windows
	installers. The current script needs to be edited to be able to pick
	up the files from the OpenBabelGUI build.

2007-01-12  Noel O'Boyle <baoilleach@gmail.com>

	* scripts/openbabel-python.i: quick fix to allow the openbabel module
	to be imported without errors. The OBFingerprintIter issue remains
	unresolved.

2007-01-09 Chris Morley <ob@gaseq.co.uk>

	* scipts/openbabel-python.i: changes to OBFingerprintIter. Not tested
	yet!
	
	* include/openbabel/pluginiter.h: comment out PluginIter::Description()
	and operator* which are causing problems with the Python build - 
	I suspect because they are not used in the C++ code.
	
	* include/openbabel/forcefield.h: src/forcefields/forcefieldghemical.cpp,
	 src/forcefields/forcefieldmm2.cpp: changes to several return values
	to avoid compiler errors. 

2007-01-08 Chris Morley <ob@gaseq.co.uk>

	* include/openbabel/pluginiter.h: correct documentation on 
	the use of FOR_EACH to iterate over all objects.

2007-01-07  Donald E. Curtis <dcurtis3@sourceforge.net>

	* src/mol.cpp: Moved all Destroy* calls to the end of Delete* functions so
	that indexes are updated and other meta information.

	* src/mol.cpp: NewBond was assigning indexes based on the size of the
	_vbond vector but since the vector is incremented in chunks of 100 this
	was producing incorrect index numbers.  Updated misc docs.  Also had a bug
	in DeleteBond using the bond variable for more than one purpose (added
	bondi for iterator usage).

2007-01-07 Tim Vandermeersch <tim.vandermeersch@gmail.com>
	
	* src/math/vector3.cpp: Added Point2PlaneAngle(vector3 a, vector3 b,
	vector3 c, vector3 d) (moved from OBForceField)
	
	* src/forcefield.cpp: Added logging features

	* src/forcefields/forcefieldmmff.cpp: All energy functions except
	E_Electrostatic() now use a OBFFXXXCalculationYYY class. Runs much
	faster.

	* src/formats/mopacformat.cpp: Added MOPAC Internal format (mopin)
	
	* data/exttype.txt: Updated for MOPAC Internal format (mopin)

2007-01-06 Noel O'Boyle <baoilleach@gmail.com>

	* windows-vc2005/OBPython/setup.py: Bumped up version number to 1.0.
	Added a postinstall script that sets BABEL_DATADIR. Included
	zlib1.dll.

	* Added windows-vc2005/OBPython/openbabel_postinstall.py: A post
	install script that sets the value of BABEL_DATADIR.

	* windows-vc2005/OBPython/README.txt: Updated instructions on how to
	run setup.py to create the distribution.

2007-01-06 Noel O'Boyle <baoilleach@gmail.com>

	* scripts/openbabel-[python,java,perl,ruby].i: Added ability to handle
	the new pluginiter.h, and in particular, its use in
	OBFingerprint.Iter. Also, regenerated all of the dependent files.

	* scripts/openbabel-python.i: Removed python code added on 2006-12-20
	to set BABEL_DATADIR as it actually had no effect.

2007-01-06 Tim Vandermeersch <tim.vandermeersch@gmail.com>

	* src/forcefields: Ghemical now uses SMARTS for atomtype setting.
	
	* src/forcefields: Added initial MMFF94 implementation. (uses new
	OBFFCalculation class for better performance)

	* tools/obgen.cpp: Now uses OBForceField::GenerateCoordinates().

	* data/: Added SMARTS patterns to ghemical.prm for typing. Added
	ghemical.prm to Makefile.*
	Added parameters for MMFF94 (files for validating MMFF94 not included)
	Data needs forcefield subfolder??

	* test/obmmff94validate.cpp: Validate MFF94 using the validation
	suite.
	
2007-01-05 Chris Morley <ob@gaseq.co.uk>

	* include/openbabel.residue.h: Added EXTERN macro for global 
	variables for DLL builds. (Does nothing otherwise).
	
	* Updated OpenBabelDLL project file.
	
2007-01-05  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/*.cpp, include/openbabel/*.h: Compiler warning fixes from
	Jean Brefort.

	* include/openbabel/residue.h, include/openbabel/generic.h: Remove
	static declarations for OBGenericDataType and residue properties.

2007-01-05 Chris Morley <ob@gaseq.co.uk>

	* include/openbabel/fingerprint.h: Give OBFingerprint a virtual
	destructor. Noel found this was why SWIG was failing.
	
2007-01-04  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/forcefields/forcefieldghemical.cpp: Fix typo from file
	renaming. (Can't use Tripos since that's a copyright.)

	* Makefile.in: Regenerate all Makefiles to fix build problems.

2007-01-03  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/forcefields: New code from Tim for MM2 and Ghemical force fields.

	* include/Makefile.*: Updates for Chris's changes earlier today.

	* include/inchi/*.c: Moved actual inchi source files back to src/.

	* configure, */Makefile.in: Updates for inchi move and forcefield directory.

2007-01-03 Chris Morley <ob@gaseq.co.uk>

	* Update Windows project files. But Python SWIG interface isn't
	working on Windows.
	
	* Moved libxml and inchi header files to include.

2006-12-28  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* Doxyfile: Change format slightly for better API documentation.

	* src/*, include/openbabel/*: Many API documentation updates.

	* include/openbabel/base.h, src/base.cpp (OBBase::Clear): New method in base
	class to improve OBConversion::Read() syntax.

2006-12-27 Chris Morley <ob@gaseq.co.uk>

	* src/newlinebuf.cpp: Revert to as in rev 1652.

2006-12-22 Chris Morley <ob@gaseq.co.uk>

	* include/openbabel/pluginiter.h, fingerprint.h: Modify so that most
	of code to implement plugin module behaviour is in pluginiter.h,
	making it easy to give this behaviour in future to other classes.
	Compatibility for OBFingerprint maintained except for iteration
	through fingerprint types which is now in the style of obiter,
	hopefully making it compatible with Python (binding not yet done).
	
	* formats/fastsearchformat.cpp: change implementation of F option
	to new iteration style.
	
	* src/fingerprint.cpp, include/openbabel/fingerprint.h: remove 
	the replaced static variable _pDefault and GetNxtFPrt().
	Add FastSearch::ReadIndexFile() alterantive to avoid 
	std::stream parameter which is no good for scripting.
	Add FastSearch::FindMatch() which is simialr to Find() but requires
	all bits of fingerprint to match.
	
	* src/obconversion.cpp: added NO_NEWLINEBUF to avaoid compiling
	newline buf which is currently incompatible with FastsearchFormat
	and OBConversion::SkipObjects().
	All types of line ending seem to work ok with VC++8 on Windows.

2006-12-20  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/obiter.cpp (OBAtomAtomIter): Fix bug reported by Zhiguo Liu,
	with obvious typo.

	* src/formats/pdbformat.cpp: Fix atom typing bug reported by
	Zhiguo Liu. Fix problems with unknown elements (due to atom
	parsing) from PR#1577238.

2006-12-20  Noel O'Boyle <baoilleach@gmail.com>

	* windows-vc2005/OBPython/setup.py: Install data files (e.g.
	patterns.txt needed for FP3) into site-packages/openbabel_data

	* scripts/openbabel-python.i: For Windows installs, set BABEL_DATADIR
	to the location into which the binary installer installs the data files

	* src/fingerprints/finger3.cpp: Replace instances of "/" by
	FILE_SEP_CHAR

2006-12-18  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* scripts/python/setup.py, scripts/perl/Makefile.PL: Updates from
	Dominik Mierzejewski to check for src/.libs directories. Prevents
	"chicken and egg" problem with what component is built first.

2006-12-16  Noel O'Boyle <baoilleach@gmail.com>

	* fingerprint.cpp/.h: Changed the FindFingerprint method to accept
	const string& instead of string&. This is necessary for access to this
	function from Python.
	
	* scripts/python/pybel.py, testpybel.py, pybelapi.html: Added a method
	to Molecule for calculating a molecular fingerprint, handled by a new
	Fingerprint class.
	
2006-12-15  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* configure.in, configure, Doxyfile: Bump to 2.1.0b4 for upcoming snapshot.

	* src/*.cpp: Update class documentation (for many classes) to
	reflect <openbabel/header.h> syntax. Makes API documentation
	consistent with usage.

	* src/obconversion.cpp, src/obconversion.h: Enable on-the-fly line
	ending translation for input. Windows and Classic Mac files should
	now translate without problems. Right now, XML files are excluded
	through the new READXML flag.

	* src/formats/xml: Update for READXML flag and move of xml.h
	header.

	* include/openbabel/xml.h: Move header for public use.

	* src/formats/fastsearchformat.cpp: Add READBINARY flag.

	* include/openbabel/Makefile.am, Makefile.in: Fix "make dist"
	target to remove generated babelconfig.h header for snapshots and
	releases.

	* scripts/Makefile.am, scripts/Makefile.in: Make sure to clean
	java targets.

	* data/mm2.prm, data/Makefile.am, data/Makefile.in: MM2 parameters.

2006-12-15 Chris Morley <ob@gaseq.co.uk>

	* tools/babel.cpp, src/obconversion.cpp, src/formats/obmoleculeformat.h:
	Move -k option help info into OBConversion::Description, where it can
	be used by other front-ends. (The info in help() is specific to the
	command-line interface.) Register it as having no parameters.
	
2006-12-14  Donald E. Curtis <dcurtis3@sourceforge.net>

	* src/formats/gaussformat.cpp: Will export "model/basis,method" if keyword
	translation is enable however is not tested accurate.
	
	* src/formats/ghemicalformat.cpp: Re-wrote and tested the GAMESS keyword
	export.
	
	* src/formats/gamessformat.cpp: Modified keyword import operations.
	Should now import the model,basis,method for keywords it knows about.
	This method is all statically implemented.  We need a new way to do this
	translation such as OBKeyword class.
	
	* tools/babel.cpp: Added help information for the '-k' parameter which
	attempts to translation keywords along with molecule information.

2006-12-13  Noel O'Boyle <baoilleach@gmail.com>

	* scripts/openbabel-[python,ruby,java,perl].i: Updated to include all
	iterators in obiter.h. Note: there is a problem getting
	OBMolPairIter to work even if std_pair.i is included and a template
	<int, int> created (compile of openbabel_python.cpp fails in this case
	so these additions have not been included). 

2006-12-13  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* tools/babel.cpp: Moved src/main.cpp here -- more consistent with
	new directory structure.

	* configure, configure.in, src/Makefile.*, tools/Makefile.*: Ditto.

	* scripts/: Regenerated files based on Noel's changes today.

	* test/files/smartsresults.txt: Updated after Craig's bug-fixes.

	* test/cmltest/: Update scripts to handle new location of babel
	binary.

2006-12-13  Craig A. James <cjames@emolecules.com>

	* src/parsmarts.cpp, src/formats/smilesformat.cpp: Fixed bug in
	SMILES parser/writer and SMARTS parser that reversed Cis/Trans
	chirality when the "/" or "\" followed an open-parenthesis "("
	character.  Commented out an unused function from parsmarts.cpp.
	Fixed a bug where a semicolon ";" was printed for an aromatic bond
	instead of a colon ":" for external bonds.
	
2006-12-13  Noel O'Boyle <baoilleach@gmail.com>

	* scripts/openbabel-[python,ruby,java,perl].i: Tidied up the
	references to classes in obiter.h (e.g. there's no such thing
	as OBResidueBondIter). Added some comments. Added wrappers for Python
	to allow iteration over atoms in a molecule, etc.
	This involved renaming the original OB method, and replacing
	it by a Python class implementing the iterator protocol.

2006-12-12  Noel O'Boyle <baoilleach@gmail.com>

	* scripts/openbabel-[python,ruby,java,perl].i: Added a line to
	create a vector of unisigned ints, required to use the Fingerprint
	class. Also, added lines to prevent warnings due to shadowed classes
	in obiter.h.

2006-12-10  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* include/openbabel: New directory for public headers. Ensures
	internal and external code use the same 
	#include <openbabel/header.h> syntax.

	Also, all related UNIX-based build changes.

2006-12-04  Vincent Favre-Nicolin <Vincent.Favre-Nicolin@ujf-grenoble.fr>

	* src/format/ciffformat.cpp: Added new OBFormat-derived class to
	handle Crystallographic Information Files. Initial implementation
	handles reading & writing atomic coordinates, reading unit cell
	and spacegroup name but no interpretation of symmetry is done.

2006-12-04  Benoit Jacob <jacob@math.jussieu.fr>

	* src/math/vector3.cpp: optimize createOrthoVector(), update doc.

2006-12-08  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/generic.h, src/generic.cpp (OBRingData): Add new methods for
	iterating over rings. (OBAngleData): Modifications from Tim
	Vandermeersch to facilitate iteration over angles in an OBMol.

	* src/mol.h, src/mol.cpp (FindAngles()): New method to parallel
	FindTorsions() for filling an OBAngleData record in an OBMol,
	contributed by Tim.

	* src/obiter.h, src/obiter.cpp: New classes and macros, including
	FOR_RINGS_OF_MOL, FOR_ANGLES_OF_MOL, FOR_TORSIONS_OF_MOL
	FOR_PAIRS_OF_MOL, contributed by Tim.

	* src/forcefield.h, src/forcefield.cpp, src/Makefile.am,
	src/Makefile.in: New classes for mol. mechanics force fields
	contributed by Tim Vandermeersch.

2006-12-07  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* test/Makefile.am, test/Makefile.in: Remove outdated vector3 and
	matrix tests.

	* scripts/: Added fingerprint.h header for direct access to
	OBFingerprint classes.

	* src/grid.h, src/grid.cpp (OBGrid): New base class, derived from
	OBBase to allow conversion to handle grids. Also simplifies
	OBFloatGrid and OBProxGrid code.

	* src/*: Documentation updates.

	* src/formats/xml/cdxmlformat.cpp: New file for ChemDraw CDXML format.

	* src/formats/inchiformat.cpp (InChIFormat::ReadMolecule): Fix
	compile error with GCC. OBMol::SetTitle() can't handle implicit
	string operations.

2006-12-07 Chris Morley <ob@gaseq.co.uk>

	* src/formats/inchiformat.cpp: Read capability added using the NIST
	code but stereochemistry not yet implemented.
	
	* src/formats/getinchi.cpp: parser to extract InChIs (possibly
	split) from other text. Examples in the file.
	
2006-12-06 Chris Morley <ob@gaseq.co.uk>

	* src/formats/mdlformat.cpp: SDFormat and MOLFormat now derived from
	base class MDLFormat. SD files now always output with $$$$
	(cures bug 1604992), mol files do not output properties.

2006-12-04  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* test/math.cpp: Improve speed by switching from endl (causes
	flush) to "\n". Make sure to output number of tests 1..testCount.

	* test/wrapper.sh: Switch to call new math test program.

2006-12-04  Benoit Jacob <jacob@math.jussieu.fr>

	* test/math.cpp: match the Test::Harness output format. Fix a bug
	in testEigenvalue.

	* src/obutil.h, src/math/vector3.cpp, src/mol.cpp: revert to using
	std::min instead of fmin.

2006-12-03  Benoit Jacob <jacob@math.jussieu.fr>

	* src/math/vector3.h, src/math/matrix3x3.h,
	  src/math/vector3.cpp, src/math/matrix3x3.cpp:
	 --- IMPORTANT: disable floating-point checks and exception-throwing
	     by default. Now that is compiled only if OB_OLD_MATH_CHECKS is
	     defined.
	 --- Fix compilation error on Windows reported by Noel O'Boyle.
	     (another compilation error on Windows remains to be fixed).
	 --- Fix some more methods. Now all the floating-point code
	     should be quite sane.
	 --- Optimize/simplify several more methods.
	 --- add matrix3x3::operator*=( const double &), make operator /=
	     use it.
	 --- remove #define PI, use the standard M_PI instead.
	 --- replace #define SQUARE() by a static inline function.
	 --- remove hyper-dangerous #define x,y,z

	* test/math.cpp: extend tests, merge (an improved version of)
	matrixtest.cpp. Now math.cpp covers all what vector3.cpp and
	matrixtest.cpp did cover, plus a lot more. Geoff: maybe it's time
	to remove the tests vector3 and matrixtest?

        * test/vector3.cpp: fix bugs, if that still matters.

	* src/obutil.h: add note clarifying that to check if x is zero, one
	should use IsNegligible( x, 1.0) instead of IsApprox( x, 0.0 ).

	* src/rotor.cpp, tools/obxyz.cpp: use M_PI instead of PI.

2006-12-02  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* scripts/*: Cleanups and fixes, including for compilation
	problems with Perl. (Derives from some macro expansion for THR.)

2006-12-01  Benoit Jacob <jacob@math.jussieu.fr>

	* src/grid.h, src/grid.cpp: In class OBFloatGrid:
	cleanup and simplifications, minor optimizations, add a FIXME
	comment in operator<< about endianness issues, replace a dangerous
	memset by a for loop. (This memset relied on the fact that the
	floating-point value 0.0 is represented by the bits 0....0, which
	happens to be true, but is not something we want to depend on.
	Plus, compilers are/should be clever enough to make the for loop
	just as fast.)

2006-11-29  Noel O'Boyle <baoilleach@gmail.com>

	* scripts/openbabel-python.i: Added some SWIG magic that allows the
	creation of a C doubles array. Also added a Python convenience
	function that converts a list to a C doubles array. This will allow
	users to access functions such as OBMol::Rotate.

2006-11-29  Benoit Jacob <jacob@math.jussieu.fr>

	* math/vector3.cpp: fix a bug that I had introduced a few days ago
	in createOrthoVector. Thanks go to the new unittests.

	* math/matrix3x3.h, math/matrix3x3.cpp: fix some defines in the
	same way as in vector3.h, add both constant and non-constant
	operator()(int,int) to access the matrix elements easily.
	Fix isUnit(), isOrthogonal(), isDiagonal().

	* test/math.cpp, test/Makefile.am, test/Makefile.in:
	New tests for the math/ subdirectory. Covers the constructors, access
	methods, various operators, operations on rows and columns and
	(partly, will be completed) the distances/angles/orthogonality stuff.

	* src/obutil.h: add new function IsNegligible(), checks whether a is
	much smaller than b with given precision.

2006-11-28  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* tools/obrotate.cpp: Use a simpler implementation with
	OBMol::SetTorsion(). (Need to rewrite command-line parsing to
	allow setting torsions of all matches, but no time now.)

	* tools/obrotamer.cpp, src/Makefile.am, src/Makefile.in: New tool
	to generate random rotamers using OBRotamerList and
	company. Additional example of using rotamer code.

	* src/rand.h, src/obutil.h, src/Makefile.am, src/Makefile.in:
	Split out OBRandom to mirror rand.cpp.

	* src/rotamer.cpp, src/rotamer.h, src/rotor.h, src/base.cpp:
	Documentation updates. 

	* src/rotor.cpp (OBRotorRules): Make sure Init() is called before
	any action, i.e.., GetRotorIncrements(). Fixes a bug uncovered
	with obrotamer.cpp

2006-11-27  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/*.cpp: Update to switch from OBNodeBase and OBEdgeBase
	iterators to OBAtom and OBBond respectively. Follows on 2006-11-20
	change contributed by Gerd Menche. Switch many iterators to
	preincrement for minor optimization.

	* tools/*.cpp: Ditto.

	* scripts/*: Regenerate for continuing API changes (e.g., vector3,
	etc.)

2006-11-27  Benoit Jacob <jacob@math.jussieu.fr>

	* src/math/vector3.h, src/math/vector3.cpp: Remove some inline
	keywords from yesterday's patch, further optimize
	vector3::createOrthoVector().

2006-11-26  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/obutil.h, src/obutil.cpp: Optimizations and improvements
	from Benoit Jacob, including documentation clarifications.

	* src/math/vector3.h, src/math/vector3.cpp: Optimizations and
	improvements, including documentation clarifications. Inline some
	small methods, mark 'const' where possible, remove 'friend'
	declarations, etc. contributed by Benoit Jacob.

	* src/math/matrix3x3.h, src/math/matrix3x3.h: Use it.

	* Doxyfile: Update for 2.1.0b3 snapshot and current Doxygen
	version (1.5.1).

	* src/rotamer.h, src/rotamer.cpp, src/rotor.h, src/rotor.cpp:
	First step at documentation updates on rotamer/conformer
	generation routines.

	* src/fingerprint.cpp, src/tokenst.cpp, src/generic.h: Eliminate
	minor Doxygen warnings.

	* src/data.h, src/data.cpp (OBTypeTable::Translate): Add new
	method for returning the translated string as a value --
	simplifies scripting language access.

	* src/mol.h: Documentation updates.

2006-11-25  Noel O'Boyle <baoilleach@gmail.com>

	* windows-vc2005/OBPython/logo.bmp: Replaced logo with one that Geoff
	sent me.

	* scripts/python/pybel.py, testpybel.py, pybelapi.html: Added a
	.close() method to the Outputfile class of Pybel. This uses the
	CloseOutFile() method added by Chris Morley in r1606. This is
	necessary to ensure that all tests pass on Windows.

2006-11-24 Chris Morley <ob@gaseq.co.uk>

	* src/obconversion.cpp(Write),(Read): Check for stream pointers
	being NULL.

	* src/obconversion.h, src/obconversion.cpp: Added CloseOutFile()
	at the suggestion of Noel O'Boyle.
	
2006-11-24  Noel O'Boyle <baoilleach@gmail.com>

	* windows-vc2005: added libxml2.dll (taken from Chris' Windows OB GUI
	distribution)
	* windows-vc2005/OBPython/logo.bmp, setup.py: new files added that
	allow the creation of a Windows OB scripting installer
	* windows-vc2005/OBPython/Readme.txt: Updated with instructions on
	running setup.py

2006-11-23 Chris Morley <ob@gaseq.co.uk>

	* windows-vc2005: Added OBPython project to allow OB to be used
	form Python on Windows.
	
	* src/parsmart.h(SmartsLexReplace), src/ring.h(CompareRingSize):
	Added OBAPI to declarations of these exported global functions.
	
2006-11-20  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/atom.h, src/base.h, src/bond.h, src/residue.h, src/mol.h,
	src/ring.h, src/mol.cpp, src/base.cpp, src/obiter.h: Remove
	OBNodeBase, OBEdgeBase, and OBGraphBase classes, contributed by
	Gerd Menche.

	* tools/obprop.cpp: Ditto. Example of changing iterators to new format.

	* scripts/*: Updated based on above changes.

	* src/formats/xml/cmlformat.cpp: Change size_t to
	string::size_type to be sure of 64-bit correctness.

2006-11-17 Chris Morley <ob@gaseq.co.uk>

	windows-vc2005: Added projects for OpenBabelDLL, OBComLn, and OBGUII
	
2006-11-18  Michael Banck <mbanck@gmx.net>

	* test/textbuffer.cpp: Do not include "zipstream.h" if HAVE_LIBZ is 
	not defined.  Do not check for a gzip'd input stream if HAVE_LIBZ is
	not defined.

2006-11-18  Noel O'Boyle <baoilleach@gmail.com>

	* scripts/python/testpybel.py: Needed to relax one of the tests of
	molecular weight, as it was failing for the OB2.1b2 snapshot (there
	must have been some changes to the atomic masses). Also,
	corrected tolerance tests to use the absolute value of the difference
	rather than the actual value.
	
2006-11-18  Noel O'Boyle <baoilleach@gmail.com>

	* scripts/python/setup.py, pyopenbabel.py, testpyopenbabel.py,
	pyopenbabelapi.html: Changed all references to pyopenbabel to pybel
	(new name). Also, corrected minor typo in docstring in pybel.py.

2006-11-17 Chris Morley <ob@gaseq.co.uk>

	* src/formats/xml/cmlformat.cpp: mods to input and output properties
	with the title attribute on <property>, as requested by Carsten Niehaus. 
	
2006-11-17 Chris Morley <ob@gaseq.co.uk>

	* src/formats/turbomoleformat.cpp: Added input and output options to
	read and write in Angstroms (default is bohr).
	Modified WriteMolecule() so that the use of strlwr doesn't corrupt
	etab. (Was apparent only in GUI where etab persists between molecules.)
	
	* src/obconversion.cpp: changed some results of string finds to
	std::string::size_type. 

2006-11-15  Noel O'Boyle <baoilleach@gmail.com>

	* scripts/python/pyopenbabel.py: Updated to be consistent, fast, pass
	all unit tests, and to have API documentation in docstrings.

	* scripts/python/testpyopenbabel.py: Added complete coverage unit tests
	for pyopenbabel.py.

	* scripts/python/test/*: Removed previous attempts at testing

	* scripts/python/pyopenbabel.txt: Removed previous attempts at
	providing documentation (we now have a wiki, and API documentation)

	* scripts/python/head.sdf: Added small test file, used by
	testpyopenbabel.py.

	* scripts/python/pyopenbabelapi.html: Added API documentation for
	pyopenbabel.py, automatically generated using "pydoc -w"

2006-11-09  Donald E. Curtis <dcurtis3@sourceforge.net>

	* src/formats/gamessformat.cpp: Gamess output parsing now only gathers
	run information from the input deck rather than gather all and defaults
	from gamess.  we may need to reconsider this in the future or add an
	option for it.

2006-11-08  Donald E. Curtis <dcurtis3@sourceforge.net>

	* src/formats/gamessformat.cpp: Bug fixes after further testing.

	* src/formats/gamessformat.cpp: For now keywords are in uppercase.  This
	needs to be decided on by the dev community and will be discussed with
	the gamess developers for gamess-specific keywords.

	* src/formats/ghemicalformat.cpp: Read GAMESS info from the "gamess"
	namespace

	* src/generic.h: Added GetData(const char *s) to OBSetData
	so that you can retrieve data from a const char rather than
	having to instanciate a string.

	* src/formats/gamessformat.cpp: More improvements on reading generic
	computational meta data.  (added runtyp / dfttype / basis).  Also modified
	the location of gamess extra information.  GAMESS now stores it's
	information in an OBSetData with attribute "gamess" which is part of the
	molecule.

2006-11-07 Chris Morley <ob@gaseq.co.uk>

	* src/formats/xml/cmlformat.cpp(WriteMolecule): Output new
	namespace URL rather than the old one.
	
	* src/obutil.cpp" Remove static from Solvelinear() and 
	SolveQuadratic() so that would compile on VC8.
	
	* windows-vc2005/babelconfig.h: Extra macro definitions.
	
	* windows-vc2005/libinchi.dll,  windows-vc2005/libinchi.lib:
	1.01 versions from NIST

2006-11-06  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/main.cpp, src/obutil.cpp, src/fingerprints/finger3.cpp,
	src/format/fastsearchformat.cpp: Patch from Martin Vogt to address
	PR#1590609. Crashes due to incorrect handling of string parsing on
	64-bit platforms.

2006-11-03  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* configure.in, configure, Makefile.in: Add back support for
	optional compile of wxWidget GUI in src/GUI.

	* scripts/*: Split openbabel.i into individual copies for each
	language.

	* scripts/java/*: Initial attempt at a java interface from SWIG. Untested.

2006-10-30  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/molreport.cpp: New psuedo-format to generate atom
	and bond information as suggested by Rich Apodaca. Addresses
	PR#1587499.

2006-10-27  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* scripts/openbabel.i, scripts/*: Updated with changes from Martin 
	Vogt to fix break (likely dating back to header split of atom.h,
	bond.h, residue.h). 

2006-10-20 Chris Morley <ob@gaseq.co.uk>

	* src/formats.xml/xml.cpp (ReadChemObject): added extra error
	message and convert the rest to use obErrorLog.
	
	* src/formats/mdlformat.cpp: modify description to work around
	bug in wxWidgets radiobuttons.
	
2006-10-18  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/obconversion.h, src/obconversion.cpp: Make sure to free
	streams created using ReadString, ReadFile, or WriteFile()
	methods. Fixes PR#1578916.

2006-10-17  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/chemdrawcdx.cpp: Fixed corruption of 2D coordinates
	caused by attempted conversion from CDX scale to Angstroms. Fixes
	PR#1576703.

	* configure.in, configure, Makefile.*: Bump to version 2.1.0b2 for
	next snapshot (now using autoconf-2.60).

	* data/*, src/fingerprints/finger3.cpp: Rename pattern file to
	SMARTS_InteLigand.txt.

	* src/obiter.h: Fix GCC warning reported by Carsten.

	* src/formats/*format.cpp: Update chemical MIME types,
	specification URLS and extensions from the chemical MIME project:
	http://sf.net/projects/chemical-mime 

	* scripts/openbabel.i: Add output string for
	OBTypeTable::Translate().

	* scripts/*: Regenerate.

	* test/textbuffer.cpp, test/vector3.cpp: New tests for newline
	translation and vector3 manipulations.

2006-09-30 Chris Morley <ob@gaseq.co.uk>

	* src/formats/fastsearchformat.cpp(ReadChemObject):
	Output message with the properties of the index if no
	SMILES structure provided.
	
	* src/fingerprint.h: Added FastSearch::GetIndexHeader()
	Reformat tabs.
	
2006-09-30 Chris Morley <ob@gaseq.co.uk>
	
	* src/formats/chemdrawcdx.cpp (Flags): added NOTWRITABLE
	
	* src/formats/fastsearchformat.cpp: Made timing of indexing
	work properly.
	
	* src/oberror.cpp(ThrowError) : return immediately if _logging is
	false; do not add to list of messages.
	
	* src/generic.cpp(GetLatticeType, GetSpaceGroupNumber) : ensured
	all paths returned value to avoid compiler warning (no real effect)

2006-09-27  Donald E. Curtis <dcurtis3@sourceforge.net>

	* src/generic.h: Updated OBSetData to initialize to correct
	OBGenericDataType enumeration.
	* src/formats/ghemicalformat.cpp: GPR format now exports GAMESS
	information correctly if it exists as part of the molecule.

2006-09-26  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* scripts/ruby: Add new ruby interface -- probably needs to be
	moved to allow compilation into main libopenbabel.

	* scripts/*: Updated for above changes.

2006-09-25  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/base.h, src/atom.h, src/bond.h: Update internal atom
	indexing to use an unsigned int, rather than short. Fixes
	PR#1556819, caused by large molecules (i.e. >2^16 atoms or bonds).

	* src/newlinebuf.h, src/newlinebuf.cpp: Fix bugs uncovered during
	ChemSpotlight testing. Now appears to smoothly handle old Mac OS
	9, DOS, and Unix line endings with no problems.

	* src/generic.h, src/generic.cpp: Incorporate patches from Carsten
	for lattice type and space groups.

	* src/formats/chemdrawcdx.[h, cpp]: New format code for ChemDraw
	CDX binary code, contributed by Fredrik Wallner.

	* src/formats/Makefile.am, src/formats/Makefile.in: Update for
	above.

	* tools/obgen.cpp, tools/Makefile.am: New "obgen" tool for
	creating simple 3D coordinates for SMILES and other 0D
	formats. Contributed by Tim Vandermeersch.

2006-09-06  Donald E. Curtis <dcurtis3@sourceforge.net>

	* src/generic.h: Added new OBGenericData subclass: OBSetData

2006-08-30  Donald E. Curtis <dcurtis3@sourceforge.net>

	* src/mol.cpp: Added OBMol::CreateResidue() function.

2006-08-08  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/inchi/: Update InChI library with final release of
	1.0.1. Need to update configure script to detect libinchi version
	to only build newer revisions when needed.

2006-08-06  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/smilesformat.cpp (ParseComplex): Ensure complex
	expressions end in a ']' character. Added patch from Nick England
	for handling chiral output using OBChiralData. Should fix
	PR#1508741.

	* test/files/invalid-smarts.txt: Add additional complex expression
	for tests.

	* src/generic.cpp (OBUnitCell): Update lattice detection to use
	IsApprox instead of IsNear.

	* src/mol.cpp (PerceiveBondOrders): Ditto.

2006-08-04 Chris Morley <ob@gaseq.co.uk>
	
	* src/kinetics.h(OBRateData): Change constructor to fit in with
	the recent change in OBGenericData constructor.
	
2006-08-03 Chris Morley <ob@gaseq.co.uk>
	
	* src/formats/smilesformat.cpp (ParseSimple)(ParseComplex)
	Removed extension labelled "is this safe" and added support for
	* and [*] as wildcard elements. arom = false was also needed.
	
	* src/kekulize.cpp(getorden): Treat Te (atNo=52) the same as Se.
	Allows c1cc[te]c1 to be interpreted as better rubbish.

2006-08-02 Chris Morley <ob@gaseq.co.uk>
	
	* src/formats/smilesformat.cpp (ParseSimple)(ParseComplex)
	Accept, with a warning, the illegal aromatic elements
	b [si] [ge] [sb] [bi] [te] [sn]
	
2006-07-21  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/cmlformat.cpp (BeginElement): Make sure to call
	BeginModify() on a <molecule> tag, since EndModify() is already
	called. Fixes PR#1512054 and probably PR#1523956.

2006-07-21 Chris Morley <ob@gaseq.co.uk>

	* src/obconversion.cpp(AddChemObject): remove compiler warning by
	returning Count!=0 rather than Count.
	
	* src.obutil.cpp(IsApprox): replaced fmin, which is not known to
	MS compiler, with std::min.

2006-07-20  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/internalcoord.h: New header to encapsulate OBInternalCoord.

	* src/Makefile.am, src/Makefile.in, src/mol.h: Updates for above.

	* src/obutil.h: Remove old-style casts, and minor documentation
	updates. 

	* src/data.h, src/generic.cpp, src/generic.h, src/math/vector3.h
	src/obiter.h: Update to use initialization lists more
	consistently.

	* src/formats/inchiformat.cpp: Use obiter classes to remove
	shadowed temporary variables.

	* src/typer.cpp: Fix bug with aromatic typer claiming errors on
	blank lines. 

	* src/data.cpp: Fix bug with reading data files from versioned
	directories. 

	* data/phmodel.txt, data/phmodel.h: Fix bug with seed charge on
	hydroxamic acid reported by Noel.

2006-07-18  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/math/vector3.h, src/math/vector3.cpp: (IsApprox) Add new
	method to compare vectors based on approximate floating-point
	comparisons, rather than potentially dangerous == and !=
	operators.

	* src/chiral.cpp: Use vector3::IsApprox instead of ==.

	* src/residue.cpp, src/bond.cpp, src/atom.cpp, src/bond.h: Add
	back needed headers for compilation, removed with yesterday's
	change dividing up mol.h

2006-07-17  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/atom.h, src/bond.h: New headers to encapsulate OBAtom and
	OBBond interfaces, respectively.

	* src/bond.cpp: Switch #include of mol.h to new header.

	* src/atom.cpp: Ditto. (SetHybAndGeom): Fix missing break
	statement, uncovered using AntiC static analysis program.

	* src/Makefile.am, src/Makefile.in: Make sure to include above in
	distributions. 

	* src/residue.h, src/residue.cpp: Move OBResidue class declaration
	from mol.h. 

	* src/mol.h: Remove OBAtom, OBBond, and OBResidue, as above.

	* src/obutil.h, src/obutil.cpp: Add IsApprox() and CanBeSquared()
	contributed by Benoit Jacob.

	* src/math/vector3.h, src/math/vector3.cpp: Add new implementation
	of vector3::normalize and createOrthoVector, contributed by Benoit.

2006-07-14  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/obconversion.cpp, src/main.cpp: Remove unneeded semicolons,
	which prevent compilation with GCC at high warning levels.

	* src/mol.h: Remove extra OBMol:: specification -- prevents
	compilation with GCC and confuses Doxygen.

	* src/gaussformat.cpp: Add -xk and -xf write options to output
	supplied keywords to Gaussian input. Allows batch output of files
	with the same options.

	* src/gamessformat.cpp: Ditto. Add contributions from Donald
	Curtis for reading GAMESS input files.	

2006-06-30  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/chains.cpp: In TracePeptideChain and TraceNucleicChain, test
	for atom visit before recursing. Otherwise, leads to an infinite
	loop and crash. Fixes PR#1515198, reported by Noel.

2006-06-29  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* configure, configure.in: Fix logic in last change.

	* Doxyfile: Update to grab obmolecformat.h now in src/format/.

	* src/*.cpp, src/*.h, src/formats/*.cpp:
	Cleanup #includes for iostream, fstream -- only use iostream when
	needed (i.e. for cout, cerr, cin, clog declarations).

	* src/all.h, src/formats/all.h: Trim precompiled header templates
	to most common headers.
	
	* src/patty.cpp: Remove unused "COMPILE_PATTY_MAIN" #ifdef.

	* src/chiral.cpp: Remove unused floating-point methods.

	* src/rand.cpp: Remove unused #ifdef DEBUG code.

	* src/parsmart.cpp, src/formats/crkformat.cpp: Update calls to
	printf with calls to obErrorLog.

	* src/obutil.cpp (InternalToCartesian): Check index requests to
	avoid requesting past the vector end.
	(#ifdef): Remove ifdef, leave code for roots.

	* src/formats/ghemicalformat.cpp: Remove dummy atoms, which can
	cause problems. Mark all aromatic bonds as bondtype 'C'.

	* test/files/attype.00.smi: Add unspecified chiral alkane for @?
	SMARTS testing.
	
	* test/files/formalchargeresults.txt, test/files/ringresults.txt,
	test/files/formularesults.txt, test/files/smartsresults.txt:
	Update for changes to attype.00.smi using generate.sh.

	* test/Makefile.am: Cleanup.

2006-06-28  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* configure, configure.in, src/all.h, src/formats/all.h,
	Makefile.in: Add experimental support for precompiled headers with
	GCC, using the --enable-precompiled-headers flag to the configure
	script. Haven't performed much timing/optimization -- appears to
	help about 10-12%.

	* src/base.h, src/mol.h, src/obconversion.h, src/generic.h:
	Warning eliminations and documentation improvements from Carsten.

	* src/obiter.cpp: Further improvements to documentation on DFS and
	BFS iterators.

	* src/chains.cpp: Updated call to fprintf(... stderr) to use
	modern OBMessageHandler.

	* scripts/*: Regenerate for latest header changes.

	* Doxyfile, doc/api-style.css: Updated for doxygen-1.4.7 and new
	style changes.

2006-06-28 Chris Morley <ob@gaseq.co.uk>

	* src/obiter.cpp: Some of the examples wouldn't compile - need 
	&*a rather than a in parameter calls. Added comment in all the
	examples. I ran into this personally with FOR_NBORS_OF_ATOM(b, &*a)
	but haven't tested the similarly modified OBResidue example.
	
	* src/formats/mdlformat.cpp(GetTimeDate): Change second parameter
	which was corrupting output of mol file line 2.  
	
2006-06-27  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/obiter.cpp: Add improved documentation on DFS and BFS atom
	iterators. Fix bug with disconnected fragments uncovered with unit
	testing.

	* test/iterators.cpp, test/wrapper.sh, test/Makefile.am,
	test/Makefile.in: New test for atom and bond iterators.

2006-06-26  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/base.h src/generic.cpp, src/generic.h, src/mol.h,
	src/bond.cpp: Documentation changes, including several from Carsten.

	* src/*.cpp: Remove un-needed header #includes turned up by a
	script adapted from KDE suggested by Carsten.

2006-06-23  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/obiter.h, src/obiter.cpp: Add depth-first and breadth-first
	search iterators for atoms through an OBMol. Fixes feature request
	PR#1273213.

	* src/bitvec.h: Minor cleanup of #include paths.

2006-06-22  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/generic.h, src/generic.cpp (OBUnitCell): Add lattice type
	definition, requested by Carsten Niehaus and add GetCellVolume()
	method contributed by Carsten.

	* src/newlinebuf.h, src/newlinebuf.cpp: New "filtering streambuf"
	class to filter line-endings, e.g. \r\n or \r -> \n expected by
	much of the code. Fixes PR#1510008 and goes towards feature
	request PR#1499615. Currently unused until testing is complete.

	* src/Makefile.am, src/Makefile.in: Add newlinebuf.

2006-06-21  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/mol.h, src/atom.cpp (CountRingBonds): New method to return
	the number of explicit ring connections to an atom.

	* src/parsmart.h, src/parsmart.cpp: Add support for Daylight 'x'
	primitive for total # of ring connections using above method.

	* test/files/smartstest.txt, test/files/smartsresults.txt:
	Test 'x' patterns above.

	* scripts/*: Regenerate to add new OBAtom::CountRingBonds()
	method.

	* src/formats/xyzformat.cpp (WriteMolecule): Only output "Energy" in
	title if it's nonzero. General cleanup.

2006-06-20  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/smilesformat.cpp: Allow use of H atoms for a root
	atom when used in a cis/trans "/" or "\" specification. Make sure
	to output [H] atoms when in a cis/trans specification. Fixes
	PR#1508783. Fix part of PR#1508741 -- chiral atoms should be fine
	as root nodes (which preserves the ordering).

	* src/parsmart.cpp: Add support for @? matching unspecified chiral
	centers. Fixes PR#1364638. Add support for [H] explicit hydrogen
	atoms, fixing PR#1463791.

2006-06-19  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* test/files/invalid-smarts.txt: Add invalid ring closure bond
	specifications suggested by Craig in PR#1503849.

	* src/parsmart.cpp: Fix PR#1503849 for invalid SMARTS ring
	closures -- check both beginning and end bond specifications for
	the closure. Uses new function EquivalentBondExpr to test if
	two bond specifications are equivalent.
	Fix part of PR#1506408 for SMARTS matching @ and @@ atom
	specifications.

	* src/formats/smilesformat.cpp: Fix cis/trans problem with
	PR#1506408 -- IsUp/IsDown parsing support in SMILES was
	inconsistent with mol.h and parsmart.cpp. "/" is Up "\" is Down.

	* test/files/smartsresults.txt: Regenerate using above changes.

	* src/kekulize.cpp: Fix PR#1504089 by adding a special case to
	prevent double bonds between aromatic S-S systems, which is
	unneeded to show aromaticity.

	* test/wrapper.sh: Add smilesmatch to list to prevent regression
	on PR#1506408.

	* test/ringtest.cpp, test/smartstest.cpp: Correct minor errors in
	finding filenames and result generation.

	* test/files/nci.smi: Add new test SMILES file.

	* test/smilesmatch.cpp: Use it.

2006-06-15 Chris Morley <ob@gaseq.co.uk>
	
	* src/formats/smilesformat.cpp(ParseSmiles): when using 
	extension and bond is doubled, add 
	UnsetImplicitValencePerceived() so that implicit hydrogens are
	recounted.
	
	* src/formats/smilesformat.cpp(GetSmilesElement): ensure explicit
	hydrogens are always written with bracketed atoms (esp when
	charged; [OH3+] was being output incorrectly).
	
	* test/files/FormulaTest.smi: Added. Contains several small
	molecules to test SMILES input, implicit hydrogen detection
	and elemental formula generation. 

2006-06-15  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/base.h, src/base.cpp: Add "const" qualifiers to
	OBGenericData methods.

	* src/mol.h: Add documentation, including patch contributed by
	Carsten Niehaus.

	* scripts/*/*.cpp: Regenerated using SWIG for above changes.

	* test/invalidsmiles.cpp, test/files/invalid-smiles.txt: New
	test. Check to see that invalid SMILES are properly rejected.

	* test/smilesmatch.cpp: New test. Check to see if SMILES strings
	match themselves using SMARTS.

	* test/Makefile.am, test/Makefile.in, test/wrapper.sh: Add
	invalidsmiles and smilesmatch to test list.

2006-06-14  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/parsmart.cpp: Completely reject dot-disconnected SMARTS
	e.g. "C.C" which currently are unimplemented and can cause
	crashes, e.g. PR#1505711.

	* src/obutil.cpp (SafeOpen): Make filename arguments "const".

	* test/*.cpp: Update to use new SafeOpen prototypes and remove
	old-style casts to (char*) to remove const.
	
	* test/invalidsmarts.cpp: New test to check that invalid SMARTS
	patterns are properly rejected. Also tries buffer smashing with
	random binary data.

	* test/files/invalid-smarts.txt: Initial set of invalid SMARTS
	which hopefully will tests certain parts of the SMARTS
	parser. Crude start, but more devious patterns to come.

	* test/files/random*: Random binary data for invalid format
	testing and "fuzz" testing.

	* test/formalcharge.cpp: New test to check formal charge
	assignment. Currently does not test, simply generates results for
	debugging.

	* test/files/formalchargeresults.txt: Results from above.
	
	* data/bin2hex.pl: Condense multiple spaces to one. Provides a
	small amount of compression for data headers (about 3K out of
	435K).

	* data/*.h: Rebuild using above.

2006-06-12  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/obconversion.cpp (BatchFileName): Make sure to properly
	strip off ".gz" extension if zlib compression is enabled. Fixes
	PR#1503596.

	* src/parsmart.cpp: Support for [D], [v], [X] patterns
	(i.e. default values of 1), fixing part of PR#1474716. Support for
	[as] as an aromatic As atom, per SMILES aromaticity for arsenic.
	Support for [se] for aromatic Se atom, per SMILES aromaticity --
	fixes PR#1503851.

	* test/files/smartstest.txt: Add tests for [D], [v], [X], [c],
	[p], [as], [s], and [se] SMARTS patterns as above.

	* test/files/smartsresults.txt: Regenerate after above fixes.

	* test/wrapper.sh: Make sure to pass along command-line arguments
	to "prove" command. Allows "./wrapper.sh -v" for verbose output.

	* src/formats/mdlformat.cpp: Make default molecular dimension to
	be 2D, but check for 3D coordinates too. Many non-standard files
	out there with no real dimension line (e.g. PR#1409133).

	* src/formats/xyzformat.cpp: Smarter handling of
	"energy" tag in title -- if present, remove it from title. If
	mol.GetEnergy() is near zero, don't print it.

	* scripts/openbabel.i: Update from Noel to use
	vector<OBGenericData*> instead of vector<OBGenericData>.

	* scripts/*.cpp: Regenerate using SWIG 1.3.29.

2006-06-08  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/data.cpp: (Init): Fix problem with parsing data --
	introduced with changes on 05-24. Add null to right char*
	buffer. Fixes PR#1502795.

2006-06-07  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/oberror.h, src/oberror.cpp (GetMessageSummary): Added
	methods to track counts of messages at each level, implementing
	PR#1449517.

	* src/main.cpp: Use it.

	* Makefile.am, Makefile.in: Make sure to eliminate .svn
	directories when running "make dist"

	* test/Makefile.am, test/Makefile.in: Make sure to build "smarts"
	not "smartstest" on platforms without Perl.

	* src/tokenst.cpp: Modified to check buffer and delimiters for
	NULL strings, use default string ctor.

	* src/generic.h (Clone): Change from a pure virtual function to a
	virtual which returns NULL as a default. Allows building script
	wrappers with vector<OBGenericData>.

	* scripts/*: Regenerate to solve compilation problems, addressed
	by generic.h changes above.

2006-06-06  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/hinformat.cpp (WriteMolecule): Make sure to escape
	molecule titles in double quotes. Fixes PR#1501694.

	* src/formats/xml/cmlformat.cpp (EndElement): Back out yesterday's
	change after discussion with Chris -- would cause problems with
	compound documents with embedded <cml></cml> blocks.

	* test/roundtrip.cpp: Add check for failed OBConversion::Read()
	calls suggested by Chris.

	* src/base.h: Documentation updates for OBGenericData methods to
	address Noel's PR#1484029.

	* scripts/openbabel.i: Added template support for
	vector<OBGeneric> to address iterating through generic data for
	PR#1484029.

	* scripts/*: Regenerate as above.

2006-06-05  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/rxnformat.cpp (WriteMolecule): Cast size_t to
	unsigned for sprintf statement. Eliminates warning with GCC.

	* src/formats/mpdformat.cpp: Eliminate unsigned/signed warning.

	* src/formats/*format.cpp (more files): Remove calls to sprintf,
	sscanf, strcpy.

	* src/formats/xml/cmlformat.cpp (EndElement): Make sure </cml> tag
	returns false (end of processing).

	* src/residue.cpp: Make sure to call base class in copy
	ctor. Eliminates GCC warning.

	* test/cmltest/test.sh: Skip test if cml cannot be loaded.

	* test/roundtrip.cpp: Fix faulty error problems with
	multi-molecule CML files. Before trying a read at the end of the
	file, make sure to clear molecular information.

2006-06-04 Chris Morley <ob@gaseq.co.uk>
	
	* src/formats/xml/xml.cpp(ReadXML): Made so that returns false at
	the end of the file. Solves problem with roundtrip.
	
	* src/formats/mdlformat.cpp(ReadMolecule): Added Trim to new code
	to read multiline properties, because was sometimes confused by
	trailing CRs in Windows.
	
2006-06-04  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* configure.in, configure, src/config.h.in: Update to include
	snprintf prototype in all files -- increased use with changing
	sprintf calls to snprintf to minimize buffer overflows.

	* src/math/*: Remove calls to exit(!) on faulty input -- return
	errors and default values.

	* src/formats/*format.cpp (more files): Remove calls to sprintf,
	sscanf, strcpy.

	* test/*.sh: Protect against existing environment variables when
	re-defining. For test calls, we need to ensure only our binaries
	load.

2006-06-02  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/data.cpp (OBElementTable::ParseLine): Change sscanf call to
	use fixed length (256 chars) for name string, rather than
	preprocessor #define BUFF_SIZE.

	* src/formats/xml/xml.cpp, src/formats/xml/xml.h, 
	src/formats/*format.cpp: Remove calls to sprintf, sscanf, strcpy.

	* scripts/*: Regenerate to add Craig's UnsetHash() and
	UnsetWedge() calls.

2006-05-30  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/xml/xml.cpp (ReadXML): Fix PR#1486678 for
	multi-molecule files. The libxml2 library is very unhappy reading
	a file past EOF, so make sure to check the state of the istream
	before reading.

	* test/cmltest/*: Renamed roundtrip.sh script, which
	was a confusing name, to cycleformats.sh.

	* src/formats/pdbformat.cpp: Run PerceiveBondOrders regardless of
	size (most PDB multiple-bonds should be picked up by residue
	information). Fixes PR#1493626.

2006-05-30 Chris Morley <ob@gaseq.co.uk>
	
	* src/formats/smilesformat.cpp (ParseSimple): Tidied up code
	to handle extension lc as conjugated double bonds and radical.
	Defer potential double bonds to end of ParseSmiles() when molecule
	complete to ensure not applied to aromatic atoms. PR#1493148
	still ok and extension works again.
	
2006-05-26  Craig James <cjames@emolecules.com>

	* src/mol.h Added UnsetHash() and UnsetWedge() macros.
	
2006-05-26  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/obconversion.cpp (AddChemObject): Output a warning when a
        format is WRITEONEONLY and more molecules are coming. Fixes
        PR#1473192.

	* src/formats/mdlformat.cpp (ReadMolecule): Make sure to grab all
        lines of potentially multi-line properties. Fixes PR#1489209.
	
	* src/formats/smilesformat.cpp (ParseSimple): Change behavior when
	encountering a bond between two potential radical or aromatic
	atoms. Previously marked bond as double, now mark as 5 -
	potentially aromatic bond. Appears to fix PR#1493148.

	* src/kekulize.cpp (NewPerceiveKekuleBonds): Make sure that
	bestorden is reset when traversing cycle. Previous code would only
	check one atom for adding extra electrons. Appears to fix
	part of PR#1445453.
	(expandcycle): Ensure a bond is in a ring before expanding. Fixes
	part of PR#1445453 for 1-phenyl-1H-pyrrole.

	* test/aromatest.cpp: Make sure to test that all ring bonds are
	aromatic to confirm that above bugs do not come back.

	* test/files/aromatics.smi: Add additional test cases for above
	bugs.

	* test/ringtest.cpp, test/smartstest.cpp: Update so that
	generating results is aware of test directory.

	* test/generate.sh: Shortcut to properly generate test results
	under "make check" conditions.

	* test/files/smartsresults.txt: Update after all of todays changes.

2006-05-25  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/main.cpp, tools/*.cpp, test/*.cpp: Added USING_DLL
	declarations for WIN32 compiles. Thanks to Noel and Donald Curtis
	for pointing out Cygwin problems.

	* src/Makefile.am, src/Makefile.in: Add missing -no-undefined for
	Cygwin compilation.

	* src/formats/Makefile.am, src/formats/Makefile.in: Add missing
	obmolecformat.cpp for Cygwin compilation.

2006-05-24  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/dlhandler_unix.cpp (findFiles): Fix PR#1493706 problem with
	misplaced NULL terminator.

	* README: Updated to mention 2.1 development.

	* Doxyfile: Make sure to exclude src/GUI/

        * src/patty.cpp, src/typer.cpp, src/rotor.cpp, src/chains.cpp,
        src/parsmart.cpp, src/data.cpp, src/atom.cpp: Updates to fix calls
        to strcpy, replacing some static char* with std::string.

2006-05-23  Craig James <cjames@emolecules.com>

	* src/formats/smilesformat.cpp: Fixed a potential buffer
	overflow when parsing SMILES.

2006-05-21 Chris Morley <ob@gaseq.co.uk>
	
	* src/formats/xml/xml.cpp (ReadXML): Output the error 
	message from libxml2 when parser fails. Was previously seen
	in unix builds (for some reason), but not in Windows.
	
2006-05-19 Chris Morley <ob@gaseq.co.uk>
	
	* src/formats/xml/xml.cpp, xml.h (ReadStream): Simplify so that
	input chunks up to '>' are taken, rather than trying to get up
	to endtag. Remove gettomatch(). I hope this solves bug #1486678
	and allows roundtrip test to run properly (but not tried). 
	 
2006-05-18  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/inchi/ : Update with InChI 1.01 pre-release.

	* src/formats/inchi_api.h: Ditto.

2006-05-16 Chris Morley <ob@gaseq.co.uk>

	* src/mol.cpp: Remove BeginModify and EndModify from AddAtom(),
	 NewAtom() and AddBond(). Doesn't seem sensible to call 
	 EndModify() (which calls Kekulize()) before all the molecule
	 is there. The change should speed up conversion of large molecules.
	 This only change for this revison for easy reversion if
	 this is too drastic a change.
	 
2006-05-12  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/patty.cpp, src/kekulize.cpp, src/fingerprint.cpp,
	src/rotor.cpp, src/chains.cpp, src/parsmart.cpp, src/chiral.cpp,
	src/bitvec.cpp, src/main.cpp, src/grid.cpp, src/mol.cpp,
	src/bondtyper.cpp: Update to remove #ifdef for SSTREAM
	(stringstream is ISO C++ and widely accepted). Remove other
	spurious #ifdef's where possible.

2006-05-11  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* test/cml.sh, test/cmltest/roundtrip.sh, test/cmltest/test.sh:
	Provide more fine-grained test errors and messages.

	* test/roundtrip.cpp: Finding extra molecules in a file should
	exit with an error.

	* src/mol.cpp (GetMolWt, GetExactMass): Simplify and improve
	performance by handling explicit hydrogens like any other explicit
	atom. Functions identically to previous version on regression
	test. Improves performance on isolated protons or bridging hydrogens.

2006-05-10  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* test/formula.cpp, test/files/formularesults.txt:
	New test for OBMol::GetFormula(), OBMol::GetMolWt(), and
	OBMol::GetExactMass().

	* src/mol.cpp (GetMolWt, GetExactMass): Fix PR#1485580. Missing
	parentheses in calculating # of implicit + explicit
	hydrogens. Thanks to Noel for suggestion.

	* src/dlhandler_unix.cpp (findFiles): If environment variable
	BABEL_LIBDIR is set, ignore compiled-in default. (User setting
	should always take precedence)

2006-05-09  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* test/files/: New subdirectory to contain test data files.

	* test/Makefile.am: Update TESTDATADIR accordingly.

	* test/*: Ditto.

2006-05-08  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* configure.in, configure, src/config.h.in: Update to include
	#define's for OBERROR, OBFPTR, and OBCOMMON as below.

	* scripts/*: Regenerate using SWIG.

	* test/wrapper.sh: Update to include export for BABEL_DATADIR.

	* test/*: Add many new unit test frameworks (atom, mol, bond,
	conversion, format, etc.)

2006-05-08 Chris Morley <ob@gaseq.co.uk>

	* src/formats/xml/cmlformat.cpp(WriteMolecule): since the id
	must start with letter, add "id" if it doesn't and write a <name>
	element.
	
	* src/generic.h: add virtual GetValue function for OBGenericData
	and also definitions in OBComment and OBPairData. Hopefully will
	solve bug 1483112.
	
	* src/oberror.h: Add default define for OBERROR as nothing
	 
2006-05-07 Chris Morley <ob@gaseq.co.uk>

	* oberror.h: Change classes from OBAPI to new OBERROR
	so that can be compiled separately.
	
	* src/mol.h, src/bitvec.cpp, oberror.cpp, obconversion.cpp:
	change to OBERROR extern OBMessageHandler obErrorLog;
	
	* src/obconversion.h: add #include "oberror.h";
	
	* src/obconversion.cpp: now that oberror can be accessed everywhere
	change all cerr messages to use obErrorLog.
	
	* src/fingerprint.h: replace OBAPI by OBFPTR to allow fingerprint
	code to be separately compiled.
	
	* src/formats/xml.h: add OBCOMMON so that XML classes can be
	separately compiled. Add implementation of SkipObjects for
	XMLBaseFormat and XMLConversion::SkipXML.
	
	* src/formats/obmolecformat.cpp: Add ReadNameIndex to speed access
	in files with many molecules. I wasn't going to commit this until
	it was tested a bit more, but I must have misunderstood what
	Tortoise SVN was doing.
	
	* src/GUI/OBGUI.cpp: don't crash if there are no formats.  

2006-05-06  Geoffrey Hutchison  <babel@geoffhutchison.net>

        * src/formats/smilesformat.cpp (SmiToMol): Since SMILES sets
        formal charges, turn off automatic updates. Some general cleanups
	(removing commented-out code.)

2006-05-03  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/chains.h, src/chains.cpp: Initial work on	documenting,
	indentation, and general cleanup of chains.cpp.
	(ConstrainBackbone): Check for valence of backbone atoms 
	should actually be for HvyValence() since all hydrogens are ignored.
	Fixes PR#1442779.

2006-04-27  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* Doxyfile: Add map of included files in headers to
	documentation. Need to work on removing un-necessary #includes in
	headers.

	* src/math/*: Minimize #include headers.

	* src/generic.h: Include obutil.h for triple class -- was included
	indirectly by way of vector3.h.

	* test/smartstest.cpp: Changed the way tests are counted -- per
	molecule instead of per pattern AND per molecule (cuts drastically
	down on the test overhead). Remove endl and sync with stio to
	improve buffering.

	* test/smartstest.txt, test/smartsresults.txt: Add additional
	SMARTS pattern tests and results.

2006-04-24 Chris Morley <ob@gaseq.co.uk>
	
	* src/formats/xml/cmlformat.cpp: Accept coordinate2 and
	coordinate3 elements for CML1.
	Laxer acceptance of atomRef?? which is sometimes misused - but added
	warning. Converted cerr calls to obError.
	Added option to read 2D rather than 3D coordinates.
	Output formula only when no bonds AND no coordinates.
	Ensured atoms from formula marked as having no H.
	GetMolID() gets name or number for error messages.
	
	* src/GUI/OBGUI.cpp: uncommented standard stream redirection.
	Do we need some conditional compilation?
	
	* src/formats.smilesformat.cpp, src/mol.cpp: Recent change in
	ImplictHydrogenCount broke GetMolWt,GetExactMass,GetSpacedformula
	and explicit H form of output in SMILES. But it is better that
	ImplictHydrogenCount means what it says. Added in appropriate form
	of GetExplicitHydrogens to these routines.
	
	* src/formats/xml/xml/cpp(gettomatch): rewrite to allow stream to
	be discarded up to next match.
	
2006-04-21  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/obconversion.cpp: Fix broken gzip-decoding of input
	(PR#1473243) introduced by 2006-04-11 change. Fix bug when writing
	multi-molecule files using WriteFile() (PR#1474265).

	* src/atom.cpp, src/residue.cpp: Remove inadvertant debug messages.

2006-04-20 Chris Morley <ob@gaseq.co.uk>
	
	* src/formats.xml/xml.h, src/formats/obmolecformat.h, 
	windows-2005/babelconfig.h: added OBCOMMON macro to aid DLL build.
	(Usually empty).
	
	* src/obconversion.cpp(AddChemObject): prevent formats with 
	WRITEONEONLY from writing more than once.

2006-04-19 Chris Morley <ob@gaseq.co.uk>
	
	* src/formats/molecformat.h: added #ifdef _WIN32 around 
	experimental code which cause problems in unix build.

2006-04-16 Chris Morley <ob@gaseq.co.uk>

	* src/transform.cpp, src/main.cpp, src/GUI/OBGUI.cpp: To avoid
	messing up help output revert to original wording of OBMol::
	ClassDescription, and pick out the last word for the conversion
	info message.
	
	* src/GUI/OBGUI.cpp, src/GUI/OBGUI.h: initialize HelpFile in
	current folder at program start.
	
	* src/formats/smilesformat.cpp(CreateSmiString): ensure unbonded [H]
	e.g. from formula, is output.
	
	* src/formats/thermoformat.cpp, src/formats/xml/cmlformat.cpp: 
	ensure formula are read in correctly by adding ForceNoH() and 
	calling Assign SpinMultiplicity	in the right place.

2006-04-15  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* test/Makefile.am, test/Makefile.in: Only run CML tests if XML
	formats were compiled. (i.e., if libxml not available, can't test
	CML)
	
	* test/ringtest.sh, test/smartstest.sh, test/cmltest/test.sh:
	Minor shell script portability fixes.

2006-04-13  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* scripts/perl/META.yml, scripts/python/setup.py: Packaging
	changes for the scripting wrappers.
	
	* src/formats/mdlformat.cpp: Remove inadvertent debug statement
	left from yesterday.

2006-04-12  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/mdlformat.cpp (ReadMolecule): Add support for atom
	stereo in v2000 format and OBChiralData. Partly addresses
	PR#1463796.

	* src/formats/smilesformat.cpp (GetChiralStereo): If we have a 2D
	molecule and stereochemistry is unspecified, don't assume we have
	a particular stereochemistry. Partly address PR#1463796.
	Also fix a problem with writing chiral "H" designations with explicit
	hydrogens, introduced with yesterday's fix to
	OBAtom::ImplicitHydrogenCount.

2006-04-11  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/obconversion.h, src/obconversion.cpp: Added a test to be
	sure that we do not check gzip encoding multiple times (much less
	try to gzip repeatedly). Fix PR#1465586 where ReadString() or
	ReadFile() followed by Read() will fail because input streams are
	closed prematurely.

	* src/atom.cpp (ImplicitHydrogenCount): Fix a bug where formulas
	were calculated incorrectly -- explicit hydrogens should count
	against an implicit hydrogen count too. Fixes part of PR#1463787.
	(i.e., SMARTS 'h' token was matching total number of hydrogens)

	* src/mol.cpp (AddBond): Fix a bug exposed by PDB parsing, where
	code attempts to add a bond from one atom to itself.

	* src/formats/mol2format.cpp: Fix residue parsing to remove
	calls to create a residue when in fact, the molecule has no residues.

	* src/formats/pdbformat.cpp: Fix CONECT record parsing to read
	malformed records (e.g., created by very old Open Babel versions)
	via splitting by spaces. Fixes PR#1468802.

	* src/parsmart.cpp: Reformat indentation for clearer code
	reading. Fix bug with syntax of 'H' token -- should refer to the
	*total* number of hydrogens. PR#1463787.

	* test/smartsresults.txt: Regenerate after above bug-fixes.

	* src/formats/crkformat.cpp (ReadCRK): Change to correctly read
	multi-molecule files, where the </Structure2D> tag would appear,
	but parsing would continue, uncovered using roundtrip testing.

2006-04-08  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* scripts/openbabel.i, scripts/*: Update to add Cygwin DLL headers.

	* THANKS: Update with contributors to 2.0.1 release.

2006-04-06  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/dlhandler_unix.cpp: Upgrade to use the opendir/readdir
	replacement for the non-portable scandir contributed by Mikael
	Johansson.

	* src/formats/Makefile.am, src/formats/Makefile.in: Fix error in
	logic with building inchi, introduced yesterday. D'oh!

	* src/formats/inchi/Makefile.am, src/formats/inchi/Makefile.in:
	Add --no-undefined flag to produce proper compilation on Windows
	(i.e., Cygwin).

2006-04-05  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* NEWS: Update for 2.0.1 release notes.

	* configure, configure.in, acinclude.m4: Add new configure options
	for silent libtool use & compiler flags.

	* scripts/Makefile.am, scripts/Makefile.in: Provide better
	"distclean" target to remove python build targets and backup
	files.

	* src/mol.h: Update IsRotor() and NumRotors() documentation to
	explain the current minimal definition of a rotatable
	bond. Addresses PR#1463505.

	* src/oberror.cpp: By default, retain a maximum of the 100 most
	recent entries in the error log in memory. All errors will be
	filtered and sent to output, but only retain some (not all). Fixes
	PR#1439893.

	* src/formats/inchi/Makefile.am, src/formats/inchi/Makefile.in:
	Only install the inchi_api.h header.

	* src/formats/xml/Makefile.am, src/formats/xml/Makefile.in: Turn
	off optimization -- appears to fix crashes on FC4 and FC5,
	PR#1447233.

	* src/formats/xml/xml.h: Add std:: namespace declarations, solving
	compilation problems on some GCC compiler versions.

	* src/formats/Makefile.am, */Makefile.in: Changes to only build
	libinchi when the library is not available on the system. Fixes
	PR#146451.

2006-03-28  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* test/aromatest.cpp: New test to check aromaticity. When supplied
	with a test file, it checks to be sure all non-hydrogen atoms are
	aromatic.

	* scripts/*: Update scripting wrappers with SWIG 1.3.29.

	* src/Makefile.am, src/Makefile.in : Add @LIBDL@ as
	suggested by Michael Shigorin (PR#1458706). Make sure
	babelconfig.h isn't included in dist tarball, as suggested by
	Michael Banck.

2006-03-27  Michael Banck  <mbanck@gmx.net>

	* src/fingerprint.h: Fix compilation error with gcc-4.1.
	  Patch by <vlaaad@users.sourceforge.net>.
	* src/formats/copyformat.cpp: Likewise.
	* src/formats/crkformat.cpp: Likewise.
	* src/formats/xml/cmlreactlformat.cpp: Likewise.
	* src/formats/xml/xml.h: Likewise.
	* src/formats/xml/xmlformat.cpp: Likewise.

	* src/formats/fastaformat.cpp: Include babelconfig.h.

	* src/rand.cpp: Include <time.h> and <sys/time.h>.

2006-03-18 Chris Morley <ob@gaseq.co.uk>
	
	* src/obconversion.cpp, obconversion.h,
	src/formats/molecformat.cpp, src/formats/rxnformat.cpp:
	The ability to stop conversion on a write error has somehow
	been removed. Restored this by changing the return of 
	AddChemObject()	to a bool indicating any failure of 
	WriteChemObject(). I don't expect that many people are
	programming at this depth for this change to matter.
	
	* src/mol.cpp(AddHydrogens): Do not add hydrogens
	when to a molecule which has no bonds and more than one atom. We
	do need a review to clarify these functions, but they are generally
	working ok. 
	
	* src/data.cpp, data.h: Added a global function OpenDatafile which
	looks in the normal places for data files. It also starts in the
	current directory. If this is acceptable, it could be used to collect
	the code for this functionality in one place. 
	
	* src/formats/xml/xml.h: added std:: to a string
	
	* src/GUI/OBGUI.cpp:Added warning when output extensions mixed.
	
	* src/GUI/optswx.cpp: Be less restrictive with punctuation in options.
	
	* src/formats/inchiformat.cpp: Now calculates InChI for C and CH.
	
	* src/formats/thermoformat.cpp: minor parsing corrections

2006-03-16 Chris Morley <ob@gaseq.co.uk>

	* data/atomtyp.txt: IMPVAL for halogen ions
	
	* /src/formats/smilesformat.cpp(ParseComplex): Move hcount test
	back again so that [C] is read as C not CH4
	(GetSmilesElement): Restrict addition of implicit H by
	resurrecting normalValence variable. Output [C], not [CH0].

2006-03-15  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/xml/xml.h: Fix std:: namespace decl for type_info.

	* src/Makefile.am: Temporarily disable compilation of src/GUI
	until compile errors are all fixed.

	* scripts/* : More changes to allow building, linking, and running
	(again!) with current CVS tree.

	* src/generic.h (OBTorsion): Add default code for SetData(OBBond*)
	-- not sure what this *should* do. Allows compilation of script
	wrappers.

	* src/obutil.h, src/math/matrix3x3.h, src/math/vector3.h: Add
	#ifndef SWIG portions to prevent SWIG from choking on some
	non-class function declarations.

	* */Makefile.in: Regenerate (get rid of bogus --gnu flags).

2006-03-14 Chris Morley <ob@gaseq.co.uk>

	* src/GUI/OBGUI.cpp(Expand): Mods to avoid errors when filenames
	are empty, have trailing paces, semicolons, etc.
	
	* src/formats/obmolecformat.cpp, obmolecformat.h: Deferred 
	molecule routines (-C -j options) rewritten to ensure no memory leaks
	under normal or error conditions. (Previously rather carelessly
	written, I'm afraid.)
	
	* src/formats/smilesformat.cpp: Corrected [CH0] extension on
	input and made work on output.
	 
	* src/formats/thermoformat.cpp: Added SetDimension(0). Initialise
	MidT. Added tdd extension.
	
	* src/mol.h: Comments on OBMol copy ctor and assignment saying
	that OBGenericData is copied and on operator+= that it is not.

	* src/base.h, kinetics.h: Mods consequent on OBGenericData changes 

2006-03-13  Geoffrey Hutchison  <babel@geoffhutchison.net>

        * configure.in, configure, src/Makefile.am, src/config.h.in: Add
	initial support for DLL builds on Cygwin. Seems to compile a
        libopenbabel.dll, but still linking problems for
        babel.exe.
	Also add support for detecting wx widget library to build src/GUI.

	* */Makefile.in: Regenerated using automake.

	* src/GUI/OBGUI.cpp: First pass at removing compilation warnings
	with GCC -- make sure all functions are passed correctly.

	* src/GUI/stdwx.h: Use a new babel.xpm if needed (e.g., Mac, UNIX).
	
	* src/formats/xml/cmlreactlformat.cpp: Add back missing
	reaction.h.

        * src/fingerprint.h, src/formats/xml/xml.h: Change static
	declarations to avoid spurious memory leak warnings with
	valgrind.

	* src/base.h: Add #ifdef to remove non-implemented iterators for
	SWIG.
	
        * scripts/*: Build updates for Perl and Python wrappers.
	
	* test/roundtrip.cpp: Update to remove spurious warnings with CML
	(and other) format translation.

	* test/smartsresults.txt: Update to reflect recent SMARTS updates.

2006-03-13 Chris Morley <ob@gaseq.co.uk>

	* src/mol.cpp(GetSpacedFormula): I like the approach added by
	Craig to be independent of implicit/explicit H without
	changing the OBMol. But needs some mods.
	Remove call to	ExplicitHydrogenCount(); they are already
	included in ImplicitHydrogenCount(). Add test to correctly
	handle molecules with no bonds,	hydrogen isotopes. Works with
	SMILES C C[2H] C[H] (=carbene) [H][H] [2H][H] 
	Added support for D and T.
	
	* src/mol.cpp(GetMolWt and GetExactMass): Mods similar to above
	so that implicit or explicit H is handled.
	
	* src/atom.cpp, atom.h(ExplicitHydrogenCount): Add extra parameter
	to not count D and T. (Backward compatible) 
	
	* src/mol.cpp(AssignSpinMultiplicity): Exclude D and T so that
	SMILES CC[2H] is interpreted as C2H5D. Previously was CH3CH:
	
	* src.formats/smilesformat.cpp(OBMol2Smi::GetSmilesElement):
	Reduce implicit H count by number of explicit H isotopes, which
	already were output explicitly. CC[2H]=> add Hs => [CH3][CH2][2H]
	(ParseComplex): [CH0] means explicitly there are no hydrogens.
	
	* src/mol.h, atom.cpp: Added flag on OBAtom to indicate there 
	are no hydrogens. Added get and set methods.
	
	
	* src/atom.cpp(ImplicitHydrogenCount), src/mol.cpp(AddHydrogens):
	Add support for SpinMultiplicity>=4. As in molecule CH - the source
	of ions	in a flame ionization detector.
	
	* src/mol.cpp(AssignSpinMultiplicity): Use positively set no Hs to
	allow SMILES [CH0] = C atom.
	 
	* src/rotamer.cpp(PackCoodinates,UnpackCoordinates): Make cf double
	rather than float to avoid compiler warnings.
	
	* src/transform.cpp: Added --addformula option.
	
	* src/mol.cpp:(operator=): OBGenericData objects now copied with 
	OBMol.
	
	* src/generic.cpp, generic.h: Clone function given parameter
	referring to new molecule, so that OBAtom pointers can be rebased.
	Added documentation that using atom and bond pointer in
	OBGenericData objects is a bad idea.
	
	* src/rotamer.cpp, rotamer.h): Moved code for copying 
	OBRotatmeterData into Clone(). Significant rewriting required;
	not tested yet.
	
	* src/formats/obmolecformat.cpp(MakeCombinedMolecule): simplify code
	because of GetFormula changes (don't need to make copy to compare
	formulae) and OBMol copying changes.
	
	* src/GUI: Small bug when selected format begins with t now corrected.
		
2006-03-10 Chris Morley <ob@gaseq.co.uk>
	
	* src/formats/smilesformat.cpp: make a default format so that
	the default object is OBMol even when MOLformat (the other default
	format) is not present.
	
	* src/formats/smilesformat.cpp(ParseRingBond): prevented crash
	and give error message when parse failure (e.g. a line starting
	with a number) - common and of long standing.
	
	* src/formats/obmolecformat.cpp(ReadChemObjImpl): another delete
	for OBMol object when ReadMolecule returns false;    
	
2006-03-09 Chris Morley <ob@gaseq.co.uk>

	* src/reaction.h, src/format.rxnformat.cpp: revert to previous
	versions, rxnformat.cpp from OB2.0.0. The boost dependent versions
	were committed in error -  work in progress on new some new
	reaction formats.
	
	* several formats, mainly output formats, converted to derive from
	OBMoleculeFormat and their WriteChemObject functions deleted. I
	don't think these were responsible for memory leaks, but it the
	less code to maintain the better.
	
	* src/formats/obmolecformat.cpp(WriteChemObjectImpl): OBMol
	object not being deleted in the event of an error. Moved delete
	statement so that it is.
	
	* src/transform.cpp(DoTransformations): ensure OBMol deleted
	in the event of an error.
	
	* src/GUI/OBGUI.cpp: #include selformats.h: make lc 
	
2006-03-09 Chris Morley <ob@gaseq.co.uk>

	* src/bitvec.cpp, bond.cpp, bondtyper.cpp, chains.cpp,chiral.cpp,
	generic.cpp,grid.cpp,kekulize.cpp,matrix.cpp,
	mol.cpp,molchg.cpp,obiter.cpp,patty.cpp,phmodel.cpp,
	rand.cpp,ring.cpp,rotamer.cpp,	rotor.cpp,tokenst.cpp,transform.cpp
	/src/formats/ most cpp files
	/src/formats/xml/pubchem.cpp
	/src/fingerprints/finger2.cpp, finger3.cpp 
	/src/math/matrix.cpp, vector.cpp
	Add #include "babelconfig.h" at top of files. This eases my use
	of pre-compiled headers and I thought (wrongly) that it would
	assist memory in leak detection. Many cpp files already have this
	header directly rather than relying on it through mol.h.
	Not a very useful exercise, but I hope harmless.
	
	* src/obconversion.cpp(FullConvert): Added extra test to remove an
	extraneous error message under some circumatances. The bug was
	introduced in when facility to use the same file for input and
	output was added.
	Reversed the memory leak related change of 2006-03-02 (see devel
	forum discussion).
	
	* src/formats/xml/xml.cpp(ReadXML):Add continue shortcut for nodes
	that are not elements. (SetUpWriter): remove extra writer creation.
	
	* src/dhandler_win32.cpp(findFiles): Rewritten, now handles * and *.*
	Was getting confused by . and .. directories.
	
	* src/mol.h Remove unnecessary #include "reaction.h"
	
	Added /src/GUI for OpenbabelGUI source files. Put here because
	it is now potentially cross-platform.
	
2006-03-02 Craig James <cjames@emolecules.com>

	* src/bitvec.cpp, src/bitvec.h: Added new operator<(bv1, bv2) that
	returns true if the bits in bv1 are a subset of the bits in bv2.

	* src/dlhandler_unix.cpp (findFiles): Fixed a memory leak.  The
	code to free the memory was there but had been commented out.

	* src/mol.h, src/mol.cpp: Added functions UnsetUp(), UnsetDown().
	Modified SetUp() and SetDown() to also invoke UnsetUp() and
	UnsetDown(), respectively, so that both up and down flags aren't
	set simultaneously.  Changed UnsetAromatic() to use UnsetFlag().

	* src/mol.cpp (GetSpacedFormula, GetFormula): Molecular Formula
	was counting only explicit hydrogens, e.g. might report C20H2.
	Changed to report the total (implicit plus explicit) hydrogen
	count so that Molecular Formula is correct.

	* src/obconversion.cpp (OptionParamArray): Fixed memory leak.

	* src/formats/mdlformat.cpp (ReadMolecule): Fixed reference to
	uninitialized memory that caused random behavior.  Reformatted
	file to correct indenting problems.

	* src/math/vector3.cpp (Comments only): Added comments to
	CalcTorsionAngle() explaining how it works.
	
2006-03-01  Geoffrey Hutchison  <babel@geoffhutchison.net>

 	* src/obconversion.cpp (ReadFile): Fix bug PR#1435777 for crash
	when calling when only the input format was set -- code mistakenly
	referenced pOutFormat.

	* src/parsmart.h: Add #ifndef SWIG to prevent wrapping internal
	struct's used to form the Pattern type.

	* src/formats/mdlformat.cpp: Use old-style Trim() syntax to
	prevent backwards-incompatibility. Remove final " 0" for REGNO from
	v3000 COUNTS line. Fixes PR#1439475, as susggested by Ernst-Georg.

	* test/smartsresults.txt: Update to match previous atom type changes.

2006-02-22  Geoffrey Hutchison  <babel@geoffhutchison.net>

        * src/data.cpp (AssignBonds): Make sure that OBResidueData calls
	Init() before starting and some minor cleanups to atom type
	assignment, exposed by comparing PDB->Mol2 files from Babel and
	Sybyl. Thanks to Kevin Parkes for the example file.

	* src/formats/mol2format.cpp (WriteMolecule): Add back atom names
	from residues, add a residue number to each residue name (e.g.,
	THR1 vs. THR). Should better match mol2 files from Sybyl.

	* data/atomtyp.txt; Add an implicit valence rule for phosphates to
	fix PR#1403974.

2006-02-22 Chris Morley <ob@gaseq.co.uk>

	* src/formats/mdlformat.cpp: Mod to read files with no M END.
	Bug found by Hassan Mamdani.

2006-02-20 Chris Morley <ob@gaseq.co.uk>

	* src/obconversion.cpp(Description): Make dependent on HAVE_LIBZ.
	
	* src/parsmart.cpp: Rename STRICT to OB_PARSMART_STRICT because of
	conflict in VC8. Not used anyway.
	
	* src.typer.cpp(OBAromaticTyper::ParseLine): Ignore blank lines
	to avoid error messages.
	
	* src/formats/mdlformat.cpp: Add Trim() after a getline() to remove
	erroneous CRs when Windows binary mode used. Add m option to 
	Description.
	
	* src/xml/cmlformat.cpp(WriteFormula): Pass copy of OBMol so that
	can add implicit hydrogen when molecule is an atom.
	As suggested by Tappani Kinnunen:
	Added test for NULL pointer in reading Nasa_OldThermo;
	deleted erroneous xmlTextWriterStartElementNS(); but
	have not yet added empty dictRef attribute to property
	(needs more consideration).
	
	* src/format/xml/xml.cpp(ReadXML):Skip over non-elements.

2006-02-20  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/parsmart.cpp (ParseComplexAtomPrimitive): Fix PR#1364604 for
	no default value for "X" primative (should default to one
	connection if no number is specified).

	* ChangeLog.1.x: New file, contains changes for 1.x releases.

	* Doxyfile: Update to allow 2.1 documentation generation.

	* configure, configure.in, Makefile.*: Update to test for Perl and
	"prove" used for new test harness.

	* test/*: New test "harness" using Perl, if available to provide
	summary output. Yields much better summary information and sets
	BABEL_LIBDIR as needed to prevent user problems with the 2.0.0 release.

2006-02-19  Geoffrey Hutchison  <babel@geoffhutchison.net>

        * src/formats/pdbformat.cpp: Fix PR#1368851 for PDB export with
        large coordinates. Optionally shifts coordinates if needed.

        * src/mol.h: Fix PR#1373650 -- return NULL if no coordinate array
        is available. Prevents segfault.

        * src/atom.cpp (GetResidue): Make sure to return NULL if chains
        perception fails.

        * src/chains.cpp: If only one residue is found, and it's UNK, it's
        probably not a residue, so nuke it. 

        * src/formats/mol2format.cpp: Combined with two above fixes,
        ensure atom labels are printed correctly for mol2 files. All three
        fix PR#1371789.

        * src/obconversion.cpp: Update documentation to point out
        workaround for PR#1368969 with static members of OBConversion --
        declare dummy variable to make sure LoadFormatFiles() has been called.

	* tools/obxyz.cpp: New program to allow cartesian transformations
	(translations, rotations).

2006-02-18  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* residue.h, residue.cpp: Move residue property definitions into
	new header to support biomolecule formats.

	* src/formats/fastaformat.cpp: New format, contributed by Sangwoo
	Shim. Resolves format request PR#902406.

	* src/formats/mdlformat.cpp: Fix possible memory leak
	with comment data and ensure comment is stored properly.
	
	* src/math/matrix3x3.cpp, src/math/matrix3x3.h,
	src/math/vector3.cpp: Fix documentation errors.

	* src/obconversion.h, src/obconversion.cpp: Add option to
	WriteString to omit any trailing whitespace. Resolves PR#1396953.

2006-01-25  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/zipstreamimpl.h (overflow): Patch calls to setp as
	suggested by Rathann Mierzejewski.

	* scripts/perl/* : Added more unit tests, fixed bug with
	case-sensitive filesystems, and problems with dynamic loading on
	Linux. 

	* scripts/python/*: Updated to fix problem with dynamic loading on
	Linux.

	* aclocal.m4, configure, configure.in, ltmain.sh, */Makefile.in
	*/Makefile.am: Update to libtool-1.5.22 and ensure libxml2 is only
	used if v2.6.5 or later.

	* src/kinetics.h: Move from src/formats/xml/ for general utility.

	* src/formats/xml/xcmlformat.cpp: Remove deprecated file.

2005-12-22 Chris Morley <ob@gaseq.co.uk>

	* src/main.cpp (main): removed unsigned from pos to correct bug
	found by Mikael Johansson.

	* src/formats/turbomole.cpp: Updates by Mikael Johansson.
 
2005-12-19 Chris Morley <ob@gaseq.co.uk>

	* src/molecformat.h, molecformat.cpp: Put most of code into static
	functions which can be called from elsewhere.
	Changed implementation of the -j option so that combining is done by
	+= of OBMol so that useable with any format.
	
	* src/formats/xml/xml.h(XMLMoleculeFormat): Reduced code duplication
	by calling static OBMoleculeFormat functions.
	
	* src/mol.cpp(operator+=): Combined molecule has a dimension equal
	to the smallest of its constituents.
	
	* src/chiral.h: added missing std:: and #include <vector>

2005-12-18 Chris Morley <ob@gaseq.co.uk>

	* src/obconversion.h, obconversion.cpp (IsFirstInput())mod.
	(OneObjectOnly) Added inverse call.
	(Convert) Call WriteChemObject only at end with C option
	(FullConvert) Can now have input and output files the same
	#define ZEROATOMSOK

	* src/generic.h, src/mol.h, tokenst.cpp(Trim): Now returns a reference 
	to the string	to make it easier to use, esp in function parameters.
	
	* src/generic.h: OBGenericData and derived classes: OBCommentData,
	OBExternalBond,	OBPairData,OBVirtualBond,OBRingData,OBUnitCell,
	OBConformerData,OBSymmetryData,OBTorsionData,OBAngleData,OBChiralData,
	OBSerialNums added virtual Clone() method to	allow copying given a 
	polymorphic	OBGenericData pointer.
	
	* src/rotameter.h:	ditto OBRotameterData
	
	* src/residue.cpp: Commented out OBGenericData methods in OBResidue
	and deletion of objects in destructor - now in base class.
	
	* src/mol.h: OBResidue now derived from OBBase; comment out its 
	OBGenericData methods and _vdata. ditto OBAtom, OBBond, OBMol,
	
	* src/mol.h, mol.cpp: I kept needing a more easily parsed
	GetFormula(). Added GetSpacedFormula()and changed the	implementation
	(but not interface) of GetFormula().
	Initialized and copied _dimension in constructors.
	
	* src/parsmart.cpp: changed error message handling.
	
	* src/transform.cpp: Added --title and --property options. Improved
	handling or error conditions while doing options.
	
	* src/main.cpp: Ensure that long options can take more than one
	following text parameter. (Used for --property).
	Make clog message describe the type of object converted, e.g.
	"2 reactions converted" (when reaction.h is updated) Small
	consequent change in help().
	
	* src/formats/APIInterface.cpp, main.cpp: All long options are now
	GENOPTIONS
		  
	* src/obmolecformat.h: Split out implementation into a new
	src/formats/obmolecformat.cpp. Added code for -C option to defer
	output of molecules so that	molecular properties, defined in several
	files can be combined. Move obmolecformat.h to src/formats/ 
	
	* src/formats.mdlformat.cpp: Corrected bug #1370212 with code along
	the lines suggested.
	Attempt to reconcile bug #1368849 and earlier suggestions:
	As before $$$$ is written between molecules but is now written at the
	end only if any properties have been written (sdf) but not if they haven't
	(mol). Add option -xm to not output any properties.
	
	* src/formats/fastsearchformat.cpp: Added -u option for updating index.  
	* src/formats/: add thermoformat.cpp and titleformat.cpp.
	
	* src/formats/xml/xml.h: remove SetFormatting; add missing std::	
	* src/formats/xml/xml.cpp: add option to have no xml formating	

	* src/formats/xml/xcmlformat.cpp: add option to output properties.
	Read and write properties, read and write Nasa thermo data.
	GetSpacedFormula() simplifies cml output!
	Renamed to src/formats/xml/cmlformat.cpp
	
	* src/formats/smilesformat.cpp: reads * as radical centre, as NIST is doing. 
	
	* src/formats/titleformat.cpp added. 	
	
	* src/formats/xml/kinetics.h added, containing OBRateData and 
	OBNasaThermoData classes derived from OBGenericData. 	

2005-11-25  Chris Morley  <c.morley@gaseq.co.uk>

	* src/formats/mdlformat.cpp, rxnformat.cpp: Yesterdays change
	broke rxnformat. Add option to supress $$$$.
	
	* windows/obabel/OBabel.dsp: This config sees fingerprints ok.
	
	* windows/OBRunTime.dsw: rename to OpenBabel.dsw
	
2005-11-24  Chris Morley  <c.morley@gaseq.co.uk>

	* windows-vc2005: upadtae files but struggling with wrong tags
	on some files. Renamed as OpenBabel.sln
	
	* src/INSTALL.WINDOWS: removed. (First draft 2004 by PMR)
	
	* src/README: removed. (about 2003 oblib)

2005-11-23  Chris Morley  <c.morley@gaseq.co.uk>
	
		* src/fingerprint.h, fingerprint.cpp: rearrange so that FptIndex
	has member functions.
	 
	* src/formats/fastsearchformat.cpp: Add -xu option to update
	index.

	* src/parsmart.cpp(SMARTSError): Error messages were being
	writen by fprintf(stderr... and stdout. This made no difference
	on console output but was not being picked up by the Windows GUI.
	Changed to obErrorLog style.
	
	* src/chains.cpp(GenerateByteCodes): Changed error messages to
	obErrorLog style.
	
	* zipstreamimpl.h(flush):Added test for NULL ostream, which had
	been causing crashes (in Windows).
	
	* kekulize.cpp: L152 bestorden was not being initialized (my new
	debugger tells me) and the code was testing it. Moved the line 
	bestorden=99 to before the while loop. Not extensively tested but
	seems to give the same as before for a few molecules. 
	
	* src/obconversion.cpp(Write): Added conditional compilation to
	remove zipstream call in Windows. Started crashing with 
	---errorlevel. A kludge until we sort out	the Windows compression
	problems. Two other similar calls in obconversion are still there...
	
	* src/obconversion.cpp(FullConvert): Added SetInStream and changed
	the names of pInStream and pOutStream which were stupidly
	given names which are also member variables! It's a bit late to
	be altering core code like this but splitting, aggregation,
	batch and normal all seem ok on Windows.
	
	* src/finger3.cpp: Change name of FP3 file.
	
	* data/SMARTS_InteLigand_051110.txt: replaced by 
	SMARTS_InteLigand.txt
	
	*src/formats/mdlformat.cpp: Writes $$$$ for every molecule to
	resolve bug #1362781
		 
	* INSTALL.windows: rewritten

	windows-vc2005: Add DLL projects and update.
	
2005-11-18  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/mdlformat.cpp: Correctly handle unspecified chiral
	centers (CFG=3), fixes PR#1324929.

2005-11-15  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* Makefile.am, Makefile.in: Make sure INSTALL.Windows is included
	in dist.

	* doc/babel.1: Update with recent format additions.

	* src/formats/amberformat.cpp, src/formats/balstformat.cpp,
	src/formats/smilesformat.cpp, src/formats/turbomoleformat.cpp:
	Update specification URLs.

2005-11-16  Chris Morley  <c.morley@gaseq.co.uk>
	
	* src/obconversion.cpp(Convert): m_IsLast set more definitely
	as part of solution to bug #1357957.
	(FullConvert) Extra gzip code to solve bug #1357705.
	[Windows builds are now reading gzip ok but not always writing it
	properly.]

	src/formats/fastsearchformat.cpp: Extra lines withconditional
	SetMoreFilesToCome to solve bug #1357957. [There may possibly be
	a gzip incompatibility here as well].
	
	* src/fingerprint.h, src/fingerprint.cpp, 
	src/fingerprints/finger2.cpp, src/fingerprints/finger3.cpp:
	Make bitsperint a private variable and provide a Get(). Not
	worth doing - the bug was a missing USING_DYNAMIC_LIBS in 
	the settings for OBExtraFormats project.
	
	Windows build files.  

2005-11-15  Chris Morley  <c.morley@gaseq.co.uk>
	
	* src/obconversion.cpp: remove #include <dflcn.h>

	* windows/OBGUIDlg.cpp (OnInitDialog): add dummy OBConversion
	object to load format files.

2005-11-15  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* Makefile.am, Makefile.in: Remove non-functional b32.mak file
	from distribution.

	* NEWS, THANKS: Further updates for 2.0 release.

	* data/types.h, data/types.txt: Added PCM atom types.

	* doc/Makefile.am, doc/Makefile.in: Removed defunct Migration.html
	(from OELib).

	* doc/FAQ.html, doc/OBTwoMigration.html, scripts/python/Examples.html:
	Updated documentation (from the new website).

	* src/formats/pcmodelformat.cpp: Initial support for PCModel
	files. Possibly does not include all atom types, but does read all
	the initial files I threw at it.

	* src/formats/Makefile.am, src/formats/Makefile.in: Compile it.

	* src/formats/freefracformat.cpp: Add support for reading files
	with atomic symbol in 4th column, rather than first (i.e.,
	PCModel-style "free form fractional").

2005-11-14  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* data/atomtyp.h: Updated with Chris's recent changes.

	* data/Makefile.am, data/Makefile.in: Add Christian's data file.

	* scripts/perl/Makefile.PL, scripts/python/setup.py: Bump version
	number for 1.0 release.

	* src/obconversion.cpp: Patch from Jean Brefort to ensure dynamic
	loading of modules occurs correctly on UNIX.

	* src/fingerprints/finger3.cpp: Update to also check versioned
	directories. Fixes bug reported by Chris Swain.

	* src/formats/inchi/Makefile.am, src/formats/inchi/Makefile.in:
	Fix capitalization errors pointed out by Jean Brefort.

	* src/formats/xyzformat.cpp, src/formats/freefractformat.cpp: Add
	specification URLs to point to Open Babel website. New format
	database will give information on what OB reads/writes.

	* src/formats/gaussformat.cpp: Fix error uncovered in roundtrip
	test with graphite & 2D translation vectors. TV are reported as
	atomic number -2.

	* test/Makefile.am, test/Makefile.in: Clean-up of Makefile.am.

	* tools/obdoc.cpp: Fix HTML -- there was a trailing </h2> tag.

2005-11-12  Chris Morley  <c.morley@gaseq.co.uk>

	* src/finger3.cpp: reads two formats of patterns file. Added FP4
	with patterns in...

	* data/SMARTS_InteLigand_051110.txt: from Christian Laggner with
	extra LGPL line.

	* data/patterns.txt: Added extra firstline to identify format.

	* data/atomtyp.txt: Added additional IMPVAL lines for
	atoms of F Cl Br I P S to allow implicit hydrogens(e.g.in SMILES)
	and improve the reversibility of add/remove hydrogens. Needs to be
	put into equiv .h file.
	 
	* src/formats/xml/xcmlformat.cpp: Now writes correct namespace uri
	for CML1. Test for no bonds (for outputting a formula instead)
	now made before removing hydrogens.

	* src/formats/xml/xcmlformat.cpp, xml.h: Mods to allow nested
	molecules.

	* src/formats/xml/xml.cpp: XML programming notes added.

	* src/formats/xml/xmlformat.cpp, xml.cpp, xml.h: files can now
	contain objects of different types, e.g. molecules in cml and pubchem
	
	* test-set/others/: added some cml files    

	* src/obconversion.cpp: minor changes to comments
	
	Update Windows build files

2005-11-10  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/bgfformat.cpp (ReadMolecule): Fix problem with atom
	type translation uncovered during roundtrip testing -- atom type
	was "cleaned" before assignment.

	* src/formats/Makefile.am, src/formats/Makefile.in: Make sure
	libinchi is correctly linked to inchiformat module.

	* src/formats/PQSformat.cpp, src/formats/fastsearchformat.cpp,
	src/formats/fingerprintformat.cpp, src/formats/inchiformat.cpp,
	src/formats/rxnformat.cpp: Found a few remaining calls to
	cerr. Updated to use OBMessageHandler framework, fixing PR#1281758.

2005-11-09  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* Doxyfile: Update version number for 2.0 release.

	* NEWS, THANKS: Updates for 2.0 release.
	
	* data/patterns.txt: Updated with new version from Chris Morley
	with corrected SMARTS patterns.

	* doc/Makefile.am: Remove man.1 pages from target list for now -- new
	versions are much better than doxygen generated versions.

	* doc/api-header.html, doc/api-footer.html: Updated for new
	website template.

	* doc/*.1: Updated man pages by hand.

	* configure, configure.in, src/config.h.in, */Makefile.in: Updated
	to always build InChI now that the IUPAC code is distributed under
	the GNU LGPL.

	* src/formats/Makefile.am, src/formats/Makefile.in,
	src/formats/inchi/*: Ditto.

	* scripts/perl/Makefile.PL: Make sure to include libz in
	compilation.

	* src/bitvec.cpp, src/bondtyper.cpp, src/chains.cpp,
	src/chiral.cpp, src/fingerprint.cpp, src/generic.cpp,
	src/obconversion.cpp, src/patty.cpp, src/resdiue.cpp,
	src/rotor.cpp: src/formats/mdlformat.cpp,
	src/formats/mol2format.cpp, src/formats/smilesformat.cpp:
	Updated to use OBMessageHandler framework for errors rather than
	old ThrowError or cerr directly. Solves PR#1281758.

	* src/parsmart.cpp: Actually implement up & down bond
	primitives. Solves PR#1219329.

	* src/formats/PQSformat.cpp: Remove calls to exit() which should
	never be used in production code.

	* src/formats/balstformat.cpp: Add specification URL.

	* tools/Makefile.am, tools/obdoc.cpp: Add hint for "obdoc" tool
	which creates the file format documentation.

	* tools/obchiral.cpp, tools/obprop.cpp: Add Doxygen man page.

2005-11-01  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/hinformat.cpp: Make sure to mark all aromatic bonds
	as "a" in output. Fixes bug reported by Rajarshi Guha.

2005-10-21  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* data/atomtyp.txt, data/atomtyp.h, data/types.txt, data/types.h:
	Updated Dreiding atom types, contributed by Menno Deij.

2005-10-20  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* Makefile.am, Makefile.in: Make sure both windows and
	windows-vc2005 directories are included.

	* src/data.cpp (OBTypeTableTranslate): Fix possible crashes when
	translating atom types and one or both columns are out of range.

	* src/freefractformat.cpp: Add TrimErrors routine to trim trailing
	standard error notations in numbers. Now properly reads 1.234(56)
	as input.

	* test/ringresults.txt, test/smartsresults.txt: Updated to reflect
	atom typing changes.

2005-10-19  Chris Morley  <c.morley@gaseq.co.uk>

	* src/formats/xcmlformat.cpp: Added reading and writing
	of <crystal> xFract etc.

	* src/formats/freefracformat.cpp: added kludge for
	getline() in Windows(binary mode) possibly returning 0x0d 
	from a blank line.
	Removed two unreferenced variables

	* doc/OBTwoMigration.html: Replace example of Reaction SMILES
	(sadly not yet done) by CMLReact. Couple of typos.

2005-10-18  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* Doxyfile: Updated for new doxygen release (1.4.5).

	* NEWS: Updated with initial release notes for 2.0.

	* configure, configure.in: Fix problems with libz detection.

	* doc/OBTwoMigration.html: Add a draft migration guide, touching
	on four key code updates.

	* doc/*.1: Updated manpages.

	* scripts/*: New versions (1.0.0b5) using SWIG 1.3.27.

	* src/atom.cpp, src/mol.cpp, src/molchrg.cpp: Documentation
	updates (switching to new iterators).

	* src/chains.h, src/chains.cpp: Updates from last OELib GPL
	version, which were not previously incorporated.

2005-10-17  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* COPYING: Updated FSF address.

	* src/formats/Makefile.*: Add new copyformat code.

	* src/atom.cpp, src/base.cpp, src/ring.cpp, src/patty.cpp,
	src/mol.h, src/molchrg.cpp, src/oberror.h, src/oberror.cpp,
	src/obiter.cpp: Documentation updates.

	* src/obconversion.h, src/obmolecformat.h : Revert change of
	std::type_info -- GCC requires the namespace declaration.

2005-10-17  Chris Morley  <c.morley@gaseq.co.uk>
	
	* src/formats/xml/xcmlformat.cpp: Added CML1 writing.
	Corrected bug in writing "x","y" instead of "x2","y3" etc.
	Corrected bug in x and z 3D coords in array mode.  

2005-10-17  Chris Morley  <c.morley@gaseq.co.uk>

	* src/obconversion.h:Replaced std::type_info by type_info
	in preparation for mods to ensure STL/VC6 compatibility.
	I hope it will still compile in unix.

	* src/obconversion.cpp,obconversion.h: Added GetInLen(), wInlen,
	rInlen to provide the length of the object being written.
	This simple operation is irritatingly complex because of object
	queue.

	* src/copyformat.cpp: simple new format which allows chemical
	filtering from a multi-object file with no possibility of losing
	content by OB's conversion, e.g. sdf or xml files.

	* src/formats/exampleformat.cpp: Now a heavily commented
	format template. Maybe should be put in another folder.

	* src/formats/inchiformt.cpp(WriteMolecule): correct bug sometimes
	causing crash when no 0Dstereo info.

	* windows-vc2005: Added project files for Visual C++ 2005

2005-10-14  Geoffrey Hutchison  <ghutchis@Alumina.local>

	* Source-code documentation updates. Ensure all classes and struct
	definitions have at least a brief description.

2005-10-14  Chris Morley  <c.morley@gaseq.co.uk>
	
	Update Windows build files and documentation. Remove unused files.

2005-10-13  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* acinclude.m4: Fix bug in CHECK_ZLIB macro to correctly disable
	zlib support if --without-zlib option is selected.

	* src/data.h, src/typer.h, src/bondtyper.h, src/phmodel.h,
	src/rotor.h: Add a GetSize() method to all OBGlobalDatabase
	classes. Ensures a data table is not empty after calling Init().
	
	* configure.in, configure, src/config.h.in: Update for a 2005-10-15
	snapshot. Require libxml2 >= 2.6.0 (which adds the xmlwriter API).

	* doc/api-header.html, doc/api-style.css: Update with new Doxygen
	version (which adds "tabs" to organize sections).

	* src/Makefile.am, src/Makefile.in: Update to zipstreamimpl.h
	instead of zipstream.cpp.

	* src/zipstream.h: Switch basic_zip_ostream and
	basic_unzip_istream to using public base classes, which works
	around a bug in some versions of GCC.

	* src/formats/xml/Makefile.am, src/formats/xml/Makefile.in: Switch
	from defining LDFLAGS to correct AM_LDFLAGS (which allows the user
	to customize LDFLAGS as desired).

2005-10-11  Chris Morley  <c.morley@gaseq.co.uk>

	* src/obconversion.cpp(FormatFromExt): correct mistake 
	in last mod.
	src/obconversion.h Add explicit copy constructor for 
	OBConversion (just so	pAuxConv is set to NULL).

	* src/generic.cpp, src/chiral.cpp: added return statements 
	etc to avoid compiler warnings.

	* src/data.h: Added OBAPI to class OBResidueData (for DLL builds)

	* src/mol.h, src/formats/pdbformat.h, src/data.cpp: Moved 
	global variable	OBResidueData resdat to data.cpp and
	treat it like other global variables. (This makes DLL builds
	easier.) If its use is specific	to pdb format, perhaps it
	should be a a static variable in PDBFormat?
	
	* windows/babelconfig.h: removed HAVE_LIBZ because in DLL
	builds unzipping code was preventing input of any file. OK
	in OBGUIs where is now defined in Settings.
	
	Updated Windows build files. 

2005-10-09  Chris Morley  <c.morley@gaseq.co.uk>
	
	* src/obconversion.cpp(FormatFromExt): test failure of 
	string::find,	etc by return of string::npos

	* src/obconversion.cpp(SetStartAndEnd):
	If EndNumber < StartNumber output only one object 
	
	* src/mdlformat.cpp(SkipObjects): inverted test for "$$$"
	which was causing -f and -l errors reported by Chris Swain.
	
	* src/formats/inchiformat.cpp: Added 'test' format for
	doing round trip, testing before and after with InChI
	
	* src/zipstreamimpl.h: Name changed from zipstream.cpp 
	
	* src/zipsteam.h: consequent name change of #include
	
2005-10-07  Chris Morley  <c.morley@gaseq.co.uk>

	Update Windows build files.

	* src/chiral.cpp(CalcSignedVolume): change name of second
	loop variable from i to j (VC6 deficiency)

	* src/data.cpp(OBElementTable::ParseLine); make symbol[5]
	[3] wasn't enough. (Better debugger!)

	* src/fingerprint.cpp: remove #if HAVE_CONFIG
		
2005-10-05  Chris Morley  <c.morley@gaseq.co.uk>
	
	* src/zipstream.cpp(add_footer): changed 2nd var n to m to
	accomodate VC6 compiler. (But still not writing properly in VC6)

	* src/obconversion.cpp: moved compression code from Convert()
	to Convert((std::istream* is, std::ostream* os) and restored
	pOutStream after conversion. Also in write();

	*  src/obconversion.cpp (FullConvert): moved call to 
	OneObjectOnly() inside loop in splitting section to cure bug
	#1313201.
	
	* src/formats/fastsearchformat.cpp: Changed Convert() to
	Convert(NULL,NULL) (two places) so that compression code will
	be called.	 

	* src/formats/smilesformat.cpp (SmiToMol): removed call to 
	AddHydrogens().


2005-10-04  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* tools/obgrep.cpp: Fix PR#1286797. Count of matching molecules
	was stored as a char??. Corrected code to store as unsigned int
	and output correctly. Thanks to Chris Swain for the bug report.

	* src/zipstream.h, src/zipstream.cpp: Update to (hopefully) fix
	syntax problems with VC++ experienced by Chris Morley.

	* src/atom.cpp (GetType): Make sure to save and restore
	OBTypeTable patterns -- otherwise higher-level code will see
	unexpected type translations.

	* src/data.h src/data.cpp (OBTypeTable): Set const on parameters
	where needed, add error checking for GetToType and GetFromType()
	methods.

	* src/formats/*.cpp: Add code to move to ifs.eof() after reading
	to ensure the multiple-molecule parsing doesn't attempt to add an
	invalid empty molecule.

	* src/formats/smilesformat.cpp: Add defensive code around chiral
	search code -- ensure all pointers are valid before dereferencing.

	* test/roundtrip.cpp: Ensure the filestream is not at EOF before
	attempting to read another molecule (and complain that a format
	has translated an incorrect number of molecules).

	* tools/README: Remove comments about deprecated obtanimoto program.

2005-10-03  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* configure, configure.in: Fix BUILD_SHARED condition to only
	build dynamic file format modules when shared libraries are also
	enabled.

	* scripts/*: Update SWIG modules using SWIG 1.3.26rc1.

	* src/formats/smilesformat.cpp: By default, add implicit hydrogens
	when reading SMILES files.

	* tools/obprop.cpp: No need to add hydrogens to SMILES files, as
	above.

	* src/formats/carformat.cpp: Modifications to better handle
	multiple-molecule CAR files, as suggested by Jean Dessolin.

	* test/roundtrip.cpp: Refined error messages to report molecule
	number and file number (1 vs. 2).

2005-09-29  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* data/types.h: Updated (as below).

	* src/zipstream.h, src/zipstream.cpp: Updated with cleaned-up
	versions from OpenSG project. Added method to add gzip header
	after creating stream.

	* src/obconversion.cpp: Clean up WriteString() and WriteFile()
	methods to use Write() -- eliminates duplicated code. (Maybe
	Convert should use Read() and Write() similarly.) Now works
	correctly with gzip output.

	* src/dlhandler_unix.cpp: Update to fix crashing bugs with global
	loading of OBConversion::LoadFormatFiles().

	* configure, configure.in, */Makefile.am, */Makefile.in: Update
	for new snapshot, minor fixes for distribution.

	* Doxyfile, src/base.cpp: Update for eventual 2.0.0 release.

2005-09-17  Chris Morley  <c.morley@gaseq.co.uk>

	* src/formats.mpdformat.cpp: Nick England's format for printing
	atom types added  (Slightly modifed option handling.)

	* data/types.txt: Extended. types.h not yet updated.

2005-09-14  Chris Morley  <c.morley@gaseq.co.uk>

	* src/main.cpp(main): line 322 Mods to place * correctly 
	when file name has *.gz

	* src/obconversion.cpp, obconversion.h: Removed dummy
	instance which was causing trouble and called LoadFileFormats()
	from the initialisation of a static variable. Removed call to
	LoadFileFormats in constructor.

	* src/obconversion.cpp: Added -z option and code for zipstream
	output in Convert() and Write(). But ozipstream seems not to be
	working properly at present. 
	Messed around with ReadString()	and ReadFile(). 

2005-09-14  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/obconversion.cpp: Only use dummy instance on WIN32 or when
	not using dynamic modules (e.g., CygWin).

	* src/zipstream.cpp, src/zipstream.h: Changes to compile on
	GCC. (Hopefully it will *still* compile on VC6.)

2005-09-14  Chris Morley  <c.morley@gaseq.co.uk>

	* src/obconversion.h, obconversion.cpp(Read): Make non-templated
	and move to .cpp; Add zipstream code to Read and Convert,
	
	* src/OBConversion.cpp: Add global dummy instance, so that format 
	files are loaded. (A better way to do this needs to be found.)
	
	* src/zipstream h, zipstream.cpp: changed to compile on VC6! 

2005-09-12  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/zipstream.h, src/zipstream.cpp: Modified classes (updated to
	compile in GCC) to support gzip/zlib compression streams.

	* configure.in, configure, src/Makefile.am, */Makefile.in: Add
	support for conditional compilation of code depending on zlib. (i.e.,
	zipstream.cpp).

	* src/obconversion.cpp (FormatFromExt): Change to detect .gz
	extension and look for previous extension.

2005-09-11  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* configure.in, configure, src/config.h.in, Makefile.in,
	*/Makefile.in: Update to detect libxml2 headers and libraries
	using AM_PATH_XML2 and compile src/formats/xml directory.

	* src/formats/Makefile.am: Remove cml.cpp and cmlformat.cpp old
	code.

	* data/bondtyp.txt, data/bondtyp.h: Updated porphyrin /
	phthaloc. patterns with hand-written SMARTS and bond
	orders. Ensures correct bond order assignment.

	* src/data.h, src/data.cpp: Move OBResidueData from pdbformat.cpp,
	so that other code can use residue data.

	* src/generic.h: Move OBSerialNums from pdbformat.cpp.

	* src/formats/pdbformat.cpp: Remove OBResidueData and OBSerialNums
	as above.

	* src/formats/smilesformat.cpp (OBSmilesParser): Make sure _mapcd
	is cleared before reading a molecule -- would crash when
	reading/writing multiple SMILES files.

	* src/formats/yasaraformat.cpp: New format, contributed by Elmar.

	* src/formats/xml/pubchem.cpp, src/formats/xml/xcmlformat.cpp:
	Change OBMol::SetTitle() calls to be ISO C++ compilant.

	* src/dlhandler_unix.cpp: Add support for multiple search paths
	for shared format modules. Uses environmental variable
	BABEL_LIBDIR which can be a colon separated list of paths
	(e.g. /usr/lib/openbabel:/usr/local/lib/openbabel ...)

	* test/ringresults.txt, test/smartsresults.txt: Regenerate after
	recent SMARTS and atom typing changes.

2005-09-10  Chris Morley  <c.morley@gaseq.co.uk>

	* src/formats/libxml: Added libxml2 header files. I have
	used a Windows DLL for libxml2 and haven't used the 
	source files,	but I guess they should be added.
	
	* src/formats/xml: Added classes for CML, CMLReact,
	PubChem and a general XMLFormat which chooses based on
	xmlnamespace. 
	xml.cpp	amd xml.h contain an extended OBConversion 
	with libxml2xmlreader and xmlwriter, XMLBaseFormat and 
	XMLMoleculeFormat	abstract classes. 
	This subfolder may not be the best place for
	the format cpp files but are here for the moment because of
	possible conflict with the existing cml.cpp and cmlformat.cpp
	which they are intended to replace when their bugs have been
	reduced.  

2005-09-09  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/chiral.h, src/chiral.cpp: Updates from Nick England to
	compute chiral volume and track the atoms used.

	* tools/obchiral.cpp: New tool from Nick England to print
	chirality information on molecules.

	* src/formats/mdlformat.cpp, src/formats/smilesformat.cpp: Fixes
	from Nick to properly interconvert MDL and SMILES chirality
	flags. Solves PR#1257494.
	
	* src/generic.h, src/generic.cpp: New class OBChiralData
	contributed by Nick for above.
	Removed obDataType enum, replacing with namespace
	OBGenericDataType. Allows significantly larger range of "slots"
	with room for future expansion without breaking
	backwards-compatibility.

	* src/atom.cpp, src/bond.cpp, src/mol.cpp, src/mol.h,
	src/residue.cpp, src/ring.cpp, src/rotamer.h,
	src/formats/cacaoformat.cpp, src/formats/cml.cpp,
	src/formats/cssrformat.cpp, src/formats/dmolformat.cpp,
	src/formats/freefracformat.cpp, src/format/mdlformat.cpp,
	src/format/mol2format.cpp, src/formats/pdbformat.cpp,
	src/formats/reportformat.cpp, src/formats/smilesformat.cpp:
	Update to use new OBGenericDataType:: declarations.

	* src/formats/Makefile.am, src/formats/Makefile.in: Remove
	mm3format bits. Not correctly implemented.

2005-09-09  Chris Morley  <c.morley@gaseq.co.uk>

	* atom.cpp (operator=): _spinmultiplicity now copied

	* obconversion.cpp (SetOneObjectOnly): Set _IsLast

	* obmolecformat.h: Small comment change

2005-09-07  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* Makefile.am: Add dist-hook to remove CVS directories from
	included windows/ subdir.

	* configure.in: Add test for libinchi -- compile InChI format if
	libinchi is already available. (Acceptable under both GPL and
	InChI terms.)

	* src/formats/Makefile.am: Compile InChI format *ONLY* if libinchi
	is available already.

	* doc/Makefile.am: Build man pages for all obtools, only if
	--enable-maintainer-mode was passed to configure.

	* scripts/Makefile.am: Build SWIG wrappers only if
	--enable-maintainer-mode was passed to configure.

	* src/Makefile.am: Ensure headers are installed into
	openbabel-2.0/openbabel directory and #include decl are re-written
	on install.

	* src/math/Makefile.am: Ditto.

	* aclocal.m4, configure, config.guess, install-sh, ltmain.sh,
	missing, mkinstalldirs, config.sub, */Makefile.in,
	src/config.h.in: Updated with libtool-1.5.20 and automake-1.9.6
	after above updates.

	* openbabel-2.0.pc.in: Update to reflect new include path.

	* scripts/openbabel.i: Wrap classes in data.h (OBElementTable,
	etc.) too.

	* scripts/*: Ditto. Renumber versions from 1.0 to separate from OB
	release version numbers. (Scripting wrappers will likely change
	more quickly.)

	* src/data.h, src/main.cpp, tools/obgrep.cpp, tools/obrotate.cpp,
	tools/obfit.cpp, tools/obprop.cpp: Documentation updates.

	* src/rand.cpp (OBRandom::TimeSeed): If sranddev() is available
	(i.e., BSD and Macintosh), use it -- higher quality results.

2005-09-05  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/data.cpp: Update documentation, perform more error checking
	for ParseLine() methods -- report to obErrorLog if needed. Fixes
	PR#1252607.

	* src/phmodel.cpp, src/typer.cpp (ParseLine): Ditto.

	* src/generic.h: Added additional types to enum obDataType, plus
	documentation.

	* src/bond.cpp: Switch IsDoubleBondGeometry to OBBond method.

	* src/mol.cpp, src/mol.h: Update OBMol documentation for OBConversion
	class. Add new PerceiveBondOrders() check for
	IsDoubleBondGeometry, using patch PR#1275166, contributed by Elmar.

	* src/residue.cpp: Update documentation on property namespaces.

	* src/parsmart.cpp: Fix matching explicit hydrogen count 'H'
	PR#1275176, contributed by Elmar.

2005-09-02  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/cacaoformat.cpp (SetHilderbrandt): Mark a todo to
	ensure this method is completely bulletproof -- still appears to
	dereference atoms without checking for NULLs.

	* src/fingerprint.h, src/fingerprint.cpp (SetBit): Change to take an
	unsigned int to prevent crash caused by "negative" parameter.

	* src/fingerprints/finger2.cpp (CalcHash): Ditto.
	
2005-09-01  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* configure.in, configure: Bump version to 2.0b4-20050901 for
	snapshot. Add support for conditional compilation of source based
	on libxml2.

	* */Makefile.in: Ditto.

	* Doxyfile: Bump version to 2.0b4-20050901.

	* src/base.cpp: Remove reference to fixed version number in
	documentation.

	* src/obconversion.h: Remove extraneous OBConversion:: on
	OptionParamArray() decl, which confused doxygen.

	* src/formats/CSRformat.cpp: Attempt to fix crash encountered
	during roundtrip testing from writing audit message.

	* src/formats/cacaoformat.cpp (SetHilderbrandt): Prevent crashes
	caused by attempting to derference NULL pointers (i.e., small
	molecules without a full z-matrix).
	
	* src/formats/mmodformat.cpp: Test to be sure # atoms > 0. Fixes
	crash encountered with roundtrip testing on binary data.

	* src/formats/mdlformat.cpp: Test to be sure bond record refers to
	existing atoms (i.e., 0 < start <= NumAtoms()). Prevents crash
	encountered with intentionally invalid MDL files.

	* src/formats/zindoformat.cpp: Remove debugging string for
	non-standard elements.

	* src/chains.cpp (MatchConstraint): Ensure OBAtom parameters are
	non-NULL before proceeding. Fixes a bug encountered when
	roundtripping H2O.

	* src/generic.cpp, src/obutil.cpp, src/ring.cpp src/mol.cpp: Add
	identifiers for Blue Obelisk algorithm dictionary.

2005-08-31  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* data/element.txt, data/element.h: Updated with new data from the
	Blue Obelisk shared repository. Should be more consistent with
	other values (particularly covalent radii).

	* src/data.h, src/data.cpp (OBElement, OBElementTable): Add
	support for new data, including ionization potential, electron
	affinity, name, and visualization colors.

	* data/bondtyp.txt, data/bondtyp.txt: Changes contributed by Elmar
	for PR#1275146.

	* src/mol.h, src/mol.cpp: Add new method IsDoubleBondGeometry to
	assist with bond order assignment (PR#1275170). Fix bugs in
	PerceiveBondOrders with conjugated single/double bonds and biotin
	PR#1275151, PR#1275160.

	* scripts/*: Updated with current API changes. Added more
	examples, particularly for Python.

	* Doxyfile: Bump for 2.0b4 snapshot.

2005-08-18  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* data/bondtyp.txt, data/bondtyp.h: Add initial porphyrin / heme
	patterns. Probably still a bit buggy. Addresses PR#1259757.

	* src/bond.cpp (SetBO): Add calls to SetKSingle(), SetKDouble(),
	and SetKTriple() as appropriate. This mirrors expected behavior,
	IMHO.

	* src/bondtyper.cpp: Remove calls to SetKSingle() etc. since these
	are now covered above. All SetBO() calls are handled
	correctly. Thanks to Elmar Krieger for noticing this.

	* src/formats/freefracformat.cpp: New format for free-form
	fractional input (title, unit cell parameters, coordinates).

	* src/formats/Makefile.am, src/formats/Makefile.in: Compile it.

	* src/formats/xyzformat.cpp: Fix bug with setting title line.

2005-08-17  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/parsmart.cpp: Fix AL_CONST case (currently in non-compiled
	code) as suggested by Elmar Krieger. Fixes PR#1261285.

	* src/obutil.cpp (InternalToCartesian): Add a check to make sure
	pointers are valid before dereferencing. Fixes crash caused by
	Amber PREP reading random binary data in a roundtrip test.

	* src/formats/amberformat.cpp (ReadMolecule): Add a check to only
	call InternalToCartesian when some coordinates have been read,
	as above.

	* src/formats/viewmolformat.cpp: Prevent an infinite loop when
	reading random binary data. Even if no correct records are read,
	continue to read a new line to look for a new record.
	
	* src/formats/Makefile.am, src/formats/Makefile.in: For now,
	disable compilation of mm3format.cpp since it is incomplete and
	incorrect. Related to PR#125604, 1252510.

	* src/math/matrix3x3.h, src/math/matrix3x3.cpp: 
	Add some basic error checking to methods marked TODO.
	(FillOrth) Change to matrix specified in PDB documentation:
	http://www.rcsb.org/pdb/docs/format/pdbguide2.2/part_75.html
	
	* src/generic.cpp, src/generic.h (OBUnitCell): Simplify code and
	re-use matrix3x3::FillOrth() rather than duplicate code.
	(OBUnitCell::GetFractionalMatrix): New method to convert from
	Cartesian to fractional coordinates.

2005-08-17  Chris Morley  <c.morley@gaseq.co.uk>
	
	* src/obconversion.h, obconversion.cpp, main.cpp: Added code
	to register how many parameters an option takes(currently 0 or 1).
	Gives extra	flexibility to command line options, like position
	independence, parameter can start immediately or after a space.
	Cures bug	#1260540 see bug report.

	* src/formats/fingerprintformat.cpp, fastsearchformats.cpp,
	APIInterface.cpp, smilesformat.cpp, mdlformat.cpp:
	Option parameter registrations consequent on above.

	* src/obmolecformat.h: Added GetType() (returns typeid for OBMol).
	Option parameter registrations for -b -s input options and
	for API general options which relate to OBMol.

	* src/obconversion.h, obconversion.cpp: Added hook to extend
	OBConversion (initially for an XML reader). AuxConv is a pointer
	to an object derived from	OBConversion which is deleted in 
	the destructor.
	   
2005-08-16  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/mol.h: Add obiter.h to standard included headers to allow
	STL-compatible iterators.

	* data/torlib.txt, data/torlib.h: Add nitro rotation pattern
	contributed via JOELib2.

	* data/phmodel.txt: Update comment on imidazole charge, transform
	patterns.

	* data/aromatic.txt, data/aromatic.h: Add "default" aromatic rules
	for carbon and nitrogen with a range of possible electrons
	(depending on specific bonds, formal charges, etc.) Solves
	PR#1257827.

	* test/smartsresults.txt: Regenerate after recent typing changes.

2005-08-15  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* data/bondtyp.txt, data/bondtyp.h: Add fix for carbonic acid bond
	typing bug (a.k.a. "multimatch") and carbon dioxide, both
	contributed by Elmar Krieger. Fixes PR#1253307 and #1257588.

	* src/parsmart.cpp (EvalAtomExpr): Add fixes for PR#1253301,
	contributed by Elmar Krieger. Solves problems with phosphates and
	phosphorous acid.

	* src/typer.cpp (CheckAromaticity): Add fix for multi-ring
	compounds like heme / porphyrins, where not all rings are properly
	typed as aromatic, contributed by Elmar. Fixes PR#1259786.

	* src/formats/mol2format.cpp: Updated Tripos Mol2 format
	specfication URL, as contributed by Nick England (PR#1257712).

	* src/formats/mdlformat.cpp: Ensure no "4" aromatic bond orders
	are used when writing MDL files. If a bond is detected to have
	BO == 5, re-run Kekulize() on the molecule. Fixes problems
	mentioned in e-mail discussions initiated by Rich Apodaca.

2005-08-12  Chris Morley  <c.morley@gaseq.co.uk>

	* src/formats/mdlformat.cpp: Following Nick England's discussion,
	reversed clockwise/anticlockwise in V300 read. 
	Re-added IsUp() IsDown() in V3000 write. These were removed for some 
	reason on 31stJan 2005, but are needed for double bond isomers.

2005-08-11  Chris Morley  <c.morley@gaseq.co.uk>

	* src/molecformat.h: Move test for NULL pmol.

	* src/format/smilesformat.cpp: Molecules with zero atoms now accepted.

2005-08-01  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* doc/Makefile.am, doc/Makefile.in: Fix bug with rename of
	Doxyfile to Doxyfile-man. Handle man page updates.

	* doc/babel.1: Updated man page with doxygen (still needs many
	updates).

	* src/base.cpp: Documentation update.

	* src/kekulize.cpp: Fix compilation error under GCC caused by
	Chris' previous change.

	* src/mol.cpp: Remove cerr calls.

	* src/obconversion.cpp (OBconversion::Description): Remove space
	at end to properly balance spacing in main.cpp.

	* src/formats/*.cpp: Add audit entries for formats not derived
	from OBMoleculeFormat.

	* src/formats/Makefile.am, src/formats/Makefile.in: Add
	cmlppformat.cpp as an example.

2005-07-29  Chris Morley  <c.morley@gaseq.co.uk>

	* src/formats/obmolecformat.h: Changed to allowed molecules with
	 zero atoms to be written, since they can have meaning CML. 
	 Replaced with a obInfo message.	I hope this
	doesn't cause problems with other formats. 

	* src/formats/cmlppformat.cpp: cmlpp version of cmlformat
	For general interest only.

	* src/util.cpp, kekulize.cpp: Make some loop variables VC6 compatible.
	Maybe it is the only compiler in the universe which uses the old
	scope rules for loop variables,	but it would be better if they
	were done like:
	unsigned i;
	for(i=0;....{}
	for(i=0;... {} another loop
	to avoid "re-initialisation" errors in VC6.

2005-07-28  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* configure.in, configure, */Makefile.in: Add
	--disable-dynamic-modules configure option for building static
	file formats library. Should solve temporary Cygwin build problems
	-- not sure why/how formats aren't installed properly.
	Partially fixes PR#1246761.

	* src/config.h.in, src/dlhandler_unix.cpp:
	Properly handle environments where .so isn't the extension
	for modules.

	* src/formats/mol2format.cpp: Fix typo PR#1246836.

2005-07-27  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/fingerprints/*: New directory for finger2.cpp and
	finger3.cpp. Place new fingerprint formats here.

	* src/Makefile.am, src/Makefile.in: Ditto.
	
	* Doxyfile, doc/Doxyfile-man: Updated for new snapshot.

	* configure.in, configure, Makefile.am, Makefile.in: Generate the
	scripts interfaces automatically if SWIG is installed.

	* scripts/Makefile.am, scripts/Makefile.in: Ditto.

	* src/config.h.in: Add check for libxml2.

	* scripts/perl/*: More documentation.

	* data/Makefile.am, data/Makefile.in: Add patterns.txt fingerprint
	data to ensure it's installed properly.

	* data/atomtyp.txt, data/atomtyp.h: Add + formal charges on carbon
	to IMPVAL rules, matching Chris's change below.

	* data/patterns.txt: Add descriptive header, explaining format and
	purpose of this file.

	* src/fingerprint.cpp, src/fingerprint.h, src/kekulize.cpp,
	src/obutil.cpp, src/patty.cpp, src/formats/fastsearchformat.cpp:
	Fix signed/unsigned integer warnings.

	* src/generic.cpp: Fix copy ctor compiler warnings (call base
	class ctor).

	* src/oberror.h, src/oberror.cpp: Move "level" into OBError class
	out of OBMessageHandler. Allows OBError to format the message
	output based on the type of message.

	* src/formats/Makefile.am, src/formats/Makefile.in: Add
	APIInterface to build list. Fixes problems passing flags via
	command-line.

	* src/formats/bgfformat.cpp: Fix bug discovered during
	roundtripping -- need to move istream to the end of the file, not
	the END record.

	* src/formats/cml.cpp: Temporarily demote CML errors to info
	messages -- currently too verbose.

	* test/unitcell.cpp: Fix compilation warning with vector3
	assignment.

	* test/roundtrip.cpp: Remove debug message left inadvertantly.

	* test/smartsresults.txt: Regenerate after atom typing changes.

2005-07-27  Chris Morley  <c.morley@gaseq.co.uk>
	
	* data/atomtyp.txt: Add line for C in isocyanide to correct 
	bug 1226846

	* src/atom.cpp (ImplicitHydrogenCount): undo the last correction
	which was making other case go wrong.

	* src/main.cpp: renamed the variable which has the result of
	OBConversion::FindFormat("obapi") because an existing variable was 
	being used.

2005-07-26  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/atom.cpp (ImplicitHydrogenCount): Add a fix for PR#1226846
	-- in methyl isocyanide, the carbanion is marked as an implicit
	valence of 1, but a multiplicity of 0. Now handles this case correctly.

	* src/obconversion.h, src/obconversion.cpp: Switch ReadString and
	ReadFile to non-template OBBase* arguments to facilitate scripting
	access. (Handling C++ templates in SWIG is touchy.)

	* scripts/* Updates to add OBConversion framework to scripting
	interfaces. Includes new perl tests.

	* src/formats/smilesformat.cpp: Add a tab delimiter between SMILES
	string and title rather than a space as suggested in
	PR#1241609. Seem to work OK on Daylight's DEPICT online form with
	tabs or spaces.

	* src/mol.h: Up BUFF_SIZE to 32768 from 1024 to handle larger line
	lengths in input.

	* src/data.cpp: Remove duplicate BUFF_SIZE declaration.

	* src/kekulize.cpp: Migrate to use OBMessageHandler error
	reporting.

	* src/fingerprint.h: Rewrite "<nCandidates>" bit, which was
	assumed to be an HTML tag by doxygen.

2005-07-25  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* test/roundtrip.cpp: Migrate OBMol::Clear() statements to more
	logical place -- right before a read.

	* src/formats/turbomoleformat.cpp, src/formats/hinformat.cpp,
	src/formats/dmolformat.cpp: Fix bugs found during roundtripping --
	ReadMolecule() would go into an infinite loop looking for the
	"next" molecule in a single-molecule file.

	* src/formats/cml.cpp: Migrate to OBMessageHandler framework and
	make sure to clear the molPtr when a <molecule> beginning record
	is encountered.

	* src/obmolecformat.h (ReadChemObject): Before attempting to read
	from the istream, check to see the status -- are we at the end of
	the stream?

	* src/obconversion.h src/obconversion.cpp: New methods ReadString,
	ReadFile, WriteString, and WriteFile for convenience access
	through scripting languages which do not have "stream" support.

2005-07-22  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* openbabel-2.0.pc.in: Rename pkg-config data to prevent conflicts
	with 1.x releases.

	* configure.in, configure, */Makefile.in: Ditto.

	* data/torlib.txt: Update documentation on torsion rules using
	SMARTS patterns.

	* src/Makefile.am, src/Makefile.in: Add finger3.cpp to compilation
	list, remove fastsearch.cpp.

	* src/dlhandler.h, src/fingerprint.h: Add OB_ prefix to
	#define/ifdef guards.

	* src/oberror.h, src/oberror.cpp: Add methods to turn off error
	logging and limit the size of the message queue.

	* src/fingerprint.cpp: Add temporary string to eliminate
	compilation errors with GCC.

	* src/formats/chem3dformat.cpp, src/formats/ghemicalformat.cpp,
	src/formats/viewmolformat.cpp: Fix translation errors -- formats
	are supposed to be subclasses of OBMoleculeFormat.

	* tools/Makefile.am, tools/Makefile.in: Temporarily disable
	compilation of obtanimoto -- fingerprint API has changed and this
	is not updated yet.

2005-07-19  Chris Morley  <c.morley@gaseq.co.uk>
	
	* src/main.cpp src/formats/APIInterface.cpp: API options are now
	like ---errorlevel (this was -w) and the name now appears
	only in APIInterface.cpp. Added a description and called it in
	help().
	
	* src/obmolecformat.h: Changed auditMsg in WriteChemObject to
	"...Write...);

	* src/fingerprint.h, fingerprint.cpp: Changed parameters of 
	FastSearchIndexer ctor. Replaced #include "config.h" by
	#include "babelconfig.h"
	This may solve David Hoekman's compilation difficulties.

	* src/transform.cpp: Made type conversion more explicit in 
	addtotitle handler. ditto

	* src.finger3.cpp: looks for data file first in env var and 
	BABEL_DATADIR 

2005-07-13  Chris Morley  <c.morley@gaseq.co.uk>

	* src/fingerprint.cpp, /srcfingerprint.h, src/finger2.cpp: 
	modified so that fingerprints are dynamic.
	Incorporated fastsearch into fingerprint.h and .cpp.
	
	* src/finger3.cpp: Added a SMARTS pattern matching fingerprint.
	Also an incomplete src/patterns.txt. Should probably be moved to
	data folder although code to allow this not yet included.

	* src/fastsearch.cpp, src/fastsearch.h: Deleted

	* src/main.cpp: changed -w handling to pseudo-format, obapi,
	to avoid having to #include oberror.h.
	Added two lines to exclude its display in format lists.
	Added -F option to display available fingerprints.

	* src/obconversion.h: small changes in documentation.

	* src/transform.cpp; added empty test for options and addtotitle
	option (mainly for use in fastsearch)
	
	* src/formats/APIInterface.cpp: Added pseudo format to transfer
	data from user interface to API.
	
	* src/formats/fingerprintformat.cpp, src/formats/fastsearchformat.cpp
	Modified to make fingerprints dynamic.

	* src/formats/mdlformat.cpp, src/formats/smilesformat.cpp Added
	extra lines in Description to improve GUI display.

2005-07-11  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/atom.cpp, src/bond.cpp, src/chiral.cpp, src,molchrg.cpp,
	src/obmolecformat.h, src/patty.cpp, src/phmodel.cpp, src/ring.cpp,
	src/rotor.cpp: Add obAuditMsg "audit log" messages for perception
	and "assignment" methods, including methods with "chemical
	intelligence" (e.g., OBAtom::HtoMethyl or OBAtom::SetHybAndGeom).

	* src/formats/pdbformat.cpp: Transition CONECT warnings to
	obErrorLog::ThrowError calls.

	* src/oberror.cpp: Turn off default "error wrapping" of cerr to
	OBError messages.

2005-07-07  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* data/atomtyp.txt, data/atomtyp.h: Change implicit valence rules
	to fix PR#1226444. N=C(N)C is properly interpreted.

	* tools/obprop.cpp: Add hydrogens for SMILES input (checked by
	.smi extension). Fixes PR#1222443.

	* test/roundtrip.cpp: Fix checks for BOX and SMILES extensions.

2005-07-06  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/data.h (OBElement): Reorder initialization to remove
	compiler warning. Documentation updates.

	* src/data.cpp (OBElementTable::ParseLine): Format declarations
	should be ignored for red, blue, green columns in sscanf call.

	* src/main.cpp: Add error log filtering back -- not handled in
	OBConversion.
	
	* src/chains.cpp, src/mol.cpp, src/obutil.cpp, src/ring.cpp,
	src/typer.cpp:
	Add obAuditMsg messages for methods substantially altering an OBMol.

	* src/matrix.cpp (convert_matrix_f): Partly unroll loop to
	increase performance. 

	* src/rotor.h, src/rotamer.cpp, src/obconversion.h: Documentation
	updates.

	* test/roundtrip.cpp: Loop over all molecules in files, checking
	to see if one file has more molecules than another.

	* src/formats/Makefile.am, src/formats/Makefile.in:
	Rename grosmos96format to gromos (correct name of program).

	* src/formats/*format.cpp: Add BeginModify() / EndModify() calls
	as appropriate (i.e. before and after major changes to OBMol,
	including ConnectTheDots or PerceiveBondOrders). 

2005-07-04  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/obconversion.h: Move include "babelconfig.h" to the top of
	all #includes to ensure proper conditional compilation. Suggested
	by Jean Brefort.

	* src/mol.h: Ensure std:: is used on Trim() declaration.

	* src/generic.h: Call Trim() for OBCommentData().

	* src/formats/Makefile.in, src/formats/Makefile.am: Merge cml.cpp
	and cmlformat.cpp into a combined library for proper loading -- as
	reported by Jean.

2005-07-04  Chris Morley  <c.morley@gaseq.co.uk>

	Some of Jean Brefort's suggested patches.

	*src/obconversion.h, src/obconversion.cpp: 
	The base class OBFormat needs a virtual destructor,but then
	derived format classes don't need their own; the compiler 
	will generate one if needed.

	I've realized that OBConversion does not need an explicit 
	copy constructor and have removed it.

	*src/formats/bgfformat.cpp, cacaoformat.cpp, ccformat.cpp.
	chem3dformat.cpp, ckrformat.cpp, featformat.cpp, shelxformat.cpp:
	assigned the filename to OBMol title when reading.

	*src/formats/mdlformat.cpp, src/formats/rxnformat.cpp,
	src/formats/smilesformat.cpp: 

2005-07-02  Chris Morley  <c.morley@gaseq.co.uk>

	*src/tokenst.cpp: Added Trim(), decl in mol.h

	*src/mol.h, src/mol.cpp (OBMol::SetTitle): Moved definitions
	to mol.cpp and added trim(). Tidier, but also overcomes
	Windows(VC++6) problem with CR left at end after getline on
	stream in binary mode, which is need for unix file compatibilty.
	For consistency should also be done for OBCommentData::SetData()
	Would this be safe?
	 
	*src/dat.h, src/data.cpp (OBElementTable::GetNumberOfElements):
	Added initialization and moved definition to to cpp file.
	MOL2Format was getting uninitialized data. Lazy loading was
	too lazy.

2005-07-01  Geoffrey Hutchison  <ghutchis@Alumina.local>

	* src/formats/chemdrawformat.cpp, src/formats/crkformat.cpp,
	src/formats/fastsearchformat.cpp, src/formats/mdlformat.cpp,
	src/bondtyper.cpp, src/oberror.cpp:
	Fix comparisons between signed and unsigned int.

	* src/base.h (OBBase): Update DoTransformations for new format.
	(OBGraphBase): Call base class from copy ctor.

	* Doxyfile, doc/api-footer.html, doc/api-header.html: Update for
	generating website SHTML documentation. Still looks good as a
	local copy.

	* src/Makefile.am, src/Makefile.in, src/formats/Makefile.am,
	src/formats/Makefile.in: Update to fix errors from "make dist" for
	snapshot.

	* scripts/perl/openbabel_perl.cpp,
	scripts/python/openbabel_python.cpp: Updated for 2005-07-01 snapshot.

2005-06-30  Chris Morley  <c.morley@gaseq.co.uk>
	
	* src/formats/smilesformat.cpp(OBSmilesParser::ParseComplex():
	Change size of symbol[] in  to 7.	Was failing on iodine 
	isotope [123I]. Another deficiency found by David Hoekman.

2005-06-30  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* configure.in, configure: Add a check for swig to allow scripting
	language wrappers to be rebuilt.

	* Makefile.am: Make sure scripts directory will be added to dist.
	
	* src/Makefile.am: Add back matrix.cpp, which was inadvertantly
	removed.

	* src/matrix.h: Remove unnecessary forward declaration of class Vector.

	* */Makefile.in: Rebuilt.

2005-06-30  Chris Morley  <c.morley@gaseq.co.uk>

	Major change to how options handled. Many files in
	/src, /src/formats, /windows altered. (Sorry I don't have a
	tool to list them all.)
	The options now stored internally in three std::maps for
	input, output and general options. These are set on the 
	command line like -a? -x? and -? respectively.  
	
	b and s formats recently added to many formats are now input
	options.
	Derived most remaining formats from OBMoleculeFormat.

2005-06-28  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* scripts/ New directory for perl and python scripting wrappers
	(and associated setup.py and Makefile.PL build scripts).

	* src/openbabel.i, src/openbabel_python.cpp,
	src/openbabel_perl.cpp, src/openbabel.py src/openbabel.pm: 
	Moved, as above.

	* src/main.cpp: Add -w# flag for filtering different error/warning
	levels with OBMessageHandler.

2005-06-27  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* data/torlib.txt, src/torlib.h: New files to implement torsional
	rules from rotor.cpp::OBRotorRules. Does not (yet) describe all
	features in OBRotorRules::ParseLine() code.

	* src/rotor.cpp: Use it (rather than declaring the data here).

	* data/Makefile.am, data/Makefile.in: Add rules for torlib.

	* src/phmodel.cpp, src/mol.h, src/oberror.h, src/bondtyper.cpp:
	Add documentation for global variables.

	* src/oberror.h, src/oberror.cpp: Add new class obLogBuf, a
	streambuf class to filter output going to cerr. Add new methods
	OBMessageHandler::StartErrorWrap and ::StopErrorWrap to turn on
	(default) and off wrapping of cerr.

2005-06-25  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/amberformat.cpp, src/formats/cacaoformat.cpp,
	src/formats/carformat.cpp, src/formats/cmlformat.cpp,
	src/formats/dmolformat.cpp, src/formats/gamessformat.cpp,
	src/formats/gaussformat.cpp, src/formats/grosmos96format.cpp,
	src/formats/jaguarformat.cpp, src/formats/mopacformat.cpp,
	src/formats/mpqcformat.cpp, src/formats/nwchemformat.cpp,
	src/formats/pdbformat.cpp, src/formats/qchemformat.cpp,
	src/formats/shelxformat.cpp, src/formats/turbomoleformat.cpp, 
	src/formats/unichemformat.cpp, src/formats/viewmolformat.cpp,
	src/formats/xyzformat.cpp:
	Add command-line options -xs to prevent PerceiveBondOrders from
	running (i.e., single bonds only) and -xb to prevent bonding via
	ConnectTheDots entirely.

	* src/formats/PQSformat.cpp, src/formats/alchemyformat.cpp,
	src/formats/balstformat.cpp, src/formats/bgfformat.cpp,
	src/formats/boxformat.cpp, src/formats/chem3dformat.cpp,
	src/formats/chemdrawformat.cpp, src/formats/crkformat.cpp,
	src/formats/featformat.cpp, src/formats/ghemicalformat.cpp,
	src/formats/hinformat.cpp, src/formats/mmodformat.cpp: 
	Update to use OBMoleculeFormat, eliminate redundant code.
	
2005-06-25  Chris Morley  <c.morley@gaseq.co.uk>

	* src/mol.cpp, src/mol.h, src/transform.cpp: Added
	OBMol::ConvertDativeBonds() (e.g. [N+]([O-])=O to N(=O)=O )
	and -b option to invoke it.

	* src/formats/fastsearchformat.cpp, 
	src/formats/fingerprintformat.cpp:
	Used ConvertDativeBonds and -b option so that searches are 
	the same with and with dative bond form	in data or target.

	* src/finger2.cpp (getFragments): Removed code which only
	partially does the above.

2005-06-24  Chris Morley  <c.morley@gaseq.co.uk>

	* src/finger2.cpp (DoRings) Add the non-ring form of all ring
	rotations to remedy some of faults found by David Hoekman.

2005-06-24  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* Doxyfile, doc/api-header.html, doc/api-footer.html,
	doc/api-style.css: Add custom documentation header, footer, and
	stylesheet.

	* src/generic.h, src/generic.cpp (OBConformerData): Initial
	framework for custom per-conformer data. Still need to add access
	to individual conformer "frames" and code to add/delete frames
	when adding new conformers to an OBMol.

2005-06-23  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/configure.in, src/configure: Generate babelconfig.h from
	config.h using AC_CONFIG_COMMANDS as recommended by Jean Brefort.

	* src/*.h src/*.cpp, src/openbabel.i: Convert back from config.h
	(which still conflicts with other packages on UNIX-ish systems) to
	babelconfig.h, as above.
	
	* src/formats/viewmolformat.cpp: Switch to OBMoleculeFormat.
	(Testing the difference in compiled code size. Not much.)

	* src/formats/smilesformat.cpp: Remove asserts. (Asserts should
	not be included in "production" code, IMHO.)

	* Doxyfile, */*.h */*.cpp: Documentation updates.

2005-06-23  Chris Morley  <c.morley@gaseq.co.uk>
	
	* src/math/vector3.h, src/math/vector3.cpp: Moved the initiallization
	of global variables VZero etc from vector3.h to vector3.cpp.
	This is recorded for 2005-04-15 but I must have forgotten to 
	commit it. Added OBAPIs for DLL build compatibility.
	
	* src/math/matrix3x3.h: Added OBAPIs.    

2005-06-22  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/kekulize.cpp: Update with Fabien's latest version, fixing
	PR#1214545 and adding doxygen documentation.

	* src/bondtyper.cpp (AssignFunctionalGroupBonds): Mark assigned
	bonds with KSingle, KDouble, KTriple for OBMol::Kekulize()
	routine. Fixes PR#1219611.

	* src/obmolecformat.h, src/Makefile.am, src/Makefile.in,
	src/formats/Makefile.am, src/formats/Makefile.in: Move
	obmolecformat.h to src/ from src/formats.

	* src/obifstream.h: Removed. Completely unused.

	* src/rotamer.h: Remove Read/WriteBinary declarations and
	OBBinaryDBase -- unused. We cannot ensure compatibility with
	OEBinary (which is now a proprietary format).

2005-06-20  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/mol2format.cpp (ReadMolecule, WriteMolecule):
	Contributions from Zhiguo Liu, notably to clean up bonding table,
	and to mark O.co2 bonds as "aromatic."

	* src/mol.h, src/atom.cpp: Add new methods IsHbondDonor(),
	IsHbondAcceptor(), IsHbondDonorH(), contributed by Zhiguo Liu.

	* src/vector3.h, src/vector3.cpp: Add new method Point2Plane() for
	calculating the distance between a point (vector3) and a point
	defined by three points (vector3), contributed by Zhiguo Liu.

2005-06-17  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/data.h, src/data.cpp (OBTypeTable): New methods GetToType
	and GetFromType -- primarily for debugging purposes.

	* src/formats/mol2format.cpp (WriteMolecule): Make sure
	OBTypeTable is always set to translate to SYB format -- would
	sometimes be reset to other formats. Fixes PR#1221324.

2005-06-16  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/generic.h, src/generic.cpp (OBSymmetryData): New class for
	storing point group and space group symmetry information.
	(OBUnitCell): Add support for storing translation vectors for
	cleaner roundtrip support from v1,v2,v3 ->a,b,c...->v1,v2,v3 and
	for origin offsets.

	* src/Makefile.am, src/Makefile.in: Add hints for perl module
	compilation.

	* src/openbabel.pm, src/openbabel_perl.cpp: Change Perl wrapper
	namespace to Chemistry::OpenBabel on advice of other perl users.

2005-06-14  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/mol.h: Remove (temporarily) un-implemented BeginConformer,
	NextConformer, and AssignResidueBonds methods. These block use of
	the SWIG python wrappers.

	* src/openbabel.py, src/openbabel_python.cpp: Regenerate. SWIG
	wrapper will now compile and import cleanly into Python.

	* src/bondtyper.cpp (AssignFunctionalGroupBonds): Make sure
	OBBondTyper data is initialized -- and ensure loop termination is
	handled correctly. Resolves part of PR#1219611.

	* src/openbabel.pm, src/openbabel_perl.cpp: New files from SWIG --
	wrappers for Perl.

2005-06-13  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* configure.in, configure: Update scandir test with fix from Jean
	Brefort.

	* Makefile.am, Makefile.in: Make sure windows/ directory is
	included in distribution.

	* src/Makefile.am, src/Makefile.in: Include hints for SWIG wrapper
	generation. Make sure openbabel.i is included in dist.

	* src/mol.h, src/atom.cpp, src/data.cpp, src/main.cpp,
	src/obconversion.cpp, src/formats/alchemyformat.cpp,
	src/formats/balstformat.cpp, src/formats/pdbformat.cpp,
	test/roundtrip.cpp: Move declarations of rint, snprintf,
	strncasecmp (for platforms that require replacement functions) out
	of mol.h header and into source files that particularly use these
	functions. (Pointed out by Jean Brefort.)

	* src/openbabel.i, src/openbabel.py, src/openbabel_python.cpp:
	Updated SWIG development wrappers.

	* src/kekulize.cpp: Update with Fabien's latest version, should
	fix recent bug reports (no assigned PR for these). Bug fixed
	when huckel rule not satisfied + path search.

2005-06-07  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* tools/obgrep.cpp: Fixed mistake(?) in #elif define to compile
	cleanly on GCC.

2005-06-04  Chris Morley  <c.morley@gaseq.co.uk>

	* tools/obgrep.cpp: Correct bug 1213806 and modify to allow 
	Windows build

	* windows/: Add obgrep/ build files and XGetOpt.cpp and XGetOpt.h
	for Windows getopt port.

2005-06-03  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* configure.in, configure, src/config.h.in: Define SCANDIR_CONST
	for the matchFiles scandir() filter function. Should solve problem
	between BSD (which doesn't need const) and Linux (which does).

	* src/dlhandler_unix.cpp: Use it.

2005-06-02  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/dlhandler_unix.cpp: Fix cast bug reported and fixed by Jean
	Brefort.

	* configure.in, configure, src/Makefile.am, tools/Makefile.am,
	test/Makefile.am, src/config.h.in, Makefile.in, src/Makefile.in,
	data/Makefile.in, doc/Makefile.in, src/Makefile.in,
	src/formats/Makefile.in, src/math/Makefile.in, test/Makefile.in,
	test/cmltest/Makefile.in, tools/Makefile.in:
	Add test for scandir cast above. Add test for dlopen in libdl and
	add it to LDFLAGS if needed. Should fix bug reported by Jean
	Brefort.

2005-06-01  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* configure.in, configure, src/config.h.in: Bump version for
	2005-06-01 snapshot.

	* test/attype.00.smi: Add label for last test molecule.

	* test/smartsresults.txt: Regenerate using current atom type
	patterns.

	* test/smartstest.cpp: Make sure to set input and output formats
	-- otherwise dynamic loading does not find SMILES importer on UNIX.

	* test/unitcell.txt: Switch to ZnO unit cell for new unit cell
	tests.

	* test/unitcell.cpp: Added some debugging statements to test unit
	cell translation vectors. (Currently do not seem to "roundtrip"
	properly.)
	
	* tools/obgrep.cpp: Allow input from STDIN to address feature
	request PR# 1116202.

2005-05-27  Fabien Fontaine <fabfont@users.sourceforge.net>

	* src/kekulize.cpp: Fix bugs reported by Chris Morley and David
	Hoekman.

2005-05-26  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* acinclude.m4: Add CHECK_ZLIB macro for detection of zlib
	compression library.

	* configure.in, configure, src/config.h.in: Use it.
	
	* aclocal.m4, config.guess, config.sub, ltmain.sh: Update for libtool
	1.5.18.

	* src/Makefile.am, src/Makefile.in: Ignore kekulize.cpp and
	libinchi. Mark library as 1:0:0 version so that libopenbabel from
	1.100.x series can coexist.

	* src/formats/Makefile.am, src/formats/Makefile.in: Ignore InChI
	code until license issues can be resolved. Do not compile
	inchiformat.cpp.

	* src/bond.cpp: Use PerceiveKekuleBonds() instead of
	NewPerceiveKekuleBonds().

	* src/bondtyper.cpp, src/fastsearch.cpp, src/finger2.cpp,
	src/fingerprint.cpp, src/kekulize.cpp, src/obconversion.cpp,
	src/transform.cpp, tools/obfit.cpp, tools/obrotate.cpp:
	Standardize top comments.

	* src/openbabel.i: Initial SWIG file for scripting language
	wrappers. Modules currently build, but experiencing linking
	problems on Mac OS X.

	* src/mol.h: Declare replacement C library functions rint(),
	snprintf(), and strncasecmp() as namespace std:: to fix compile
	problems with SWIG.

2005-05-22  Chris Morley  <c.morley@gaseq.co.uk>

	* src/obconversion.h, src/obconversion.cpp: Added IsFirstInput().

	* src/formats/obmolecformat.h: Implemented -j format to aggregate
	into a single output molecule.

	* src/transform.cpp (OBMol::ClassDescription): added -j option 
	
	* src/formats/mdlformat.cpp (ReadMolecule): Added offset 
	reading in a mdl sdf/mol file to a OBMol object which already has 
	atoms will now add a disconnected fragment.

2005-05-18  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* data/Makefile.am data/Makefile.in: Make sure that data files are
	included in a "make dist".

	* src/Makefile.am, src/Makefile.in: Build dlhandler_unix.cpp. Use
	dynamic OBFormat loading.

	* src/dlhandler_unix.cpp: Add initial support for dynamic loading
	file format modules using $(libdir)/openbabel/*.so
	paths. Currently this can cause problems when building/debugging
	before installation. I have a symlink from
	/usr/local/lib/openbabel -> $(top_builddir)/src/formats/.libs as a
	workaround.

	* src/formats/Makefile.am, src/formats/Makefile.in: Build each
	format as an independent shared-module.

	* src/*.h: Minor updates. Make sure to only #include config.h once
	per header. Add standard top comments (with description of each
	file and Open Babel URL, etc.) to all headers.

	* src/dlhandler_win32.cpp: Add file description to top comments.

2005-05-14  Chris Morley  <c.morley@gaseq.co.uk>

	* src/fingerprint.h, src/finger2.cpp: Yet more bug fixes following 
	comments by David Hoekman.

	* fingerprintformat.cpp: Added IsPossibleSubstructure() and the
	display of its result.

2005-05-13  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/base.cpp, src/base.h, src/bitvec.h, src/data.cpp,
	src/data.h, src/dlhandler.h, src/fastsearch.cpp, src/grid.h,
	src/kekulize.cpp, src/main.cpp, src/matrix.h, src/mol.h,
	src/obconversion.h, src/oberror.cpp, src/obifstream.h,
	src/obutil.cpp, src/obutil.h, src/patty.cpp, src/phmodel.cpp,
	src/residue.cpp, src/rotor.cpp, src/tokenst.cpp, src/typer.cpp,
	src/formats/PQSformat.cpp, src/formats/pdbformat.cpp,
	src/formats/povrayformat.cpp, test/matrixtest.cpp,
	test/ringtest.cpp, test/roundtrip.cpp, test/smartstest.cpp:
	Rename babelconfig.h to config.h and conditionally #include it
	based on the HAVE_CONFIG_H define (which on UNIX is passed by the
	Makefile). This solves PR#885828 in terms on installation and
	including the build-dependent babelconfig/config headers.

	* configure.in, configure, Makefile.in, doc/Makefile.in,
	src/Makefile.am, src/Makefile.in, src/math/Makefile.in,
	test/Makefile.in, test/cmltest/Makefile.in, tools/Makefile.in: Ditto.

	* data/Makefile.am, data/Makefile.in: Update for version-dependent
	data installation (e.g. /usr/local/share/openbabel/2.0.0/*).

	* src/formats/Makefile.am, src/formats/Makefile.in: Don't directly
	include libinchi (which is now installed separately). Set for
	installation of libobformats, which should be dynamically linked
	with libopenbabel.

	* src/formats/inchi/Makefile.am, src/formats/inchi/Makefile.in:
	Fix problems with case-sensitive filenames. (i.e., filenames
	changed case in InChI 1.0 release, but were already in CVS tree
	with lowercase.) Set for shared-library installation of libinchi.
	
2005-05-08  Chris Morley  <c.morley@gaseq.co.uk>

	* src/formats.inchiformat.cpp: remove incomplete code for reading
	InChi. Add URL. Post libinchi.lb abd libinchi.dll. More options have
	been documented, but are not yet implemented in OB.
	
	*src/base.h, src/base.cpp: The latest MS compiler is more picky, and
	(correctly) objects to an iterator being returned as NULL in
	OBGraphBase::BgnMatch() and EndMatch(). To work round this the whole
	of the code  for "substructure search functions" has been commented 
	out. These are virtual placeholder functions anyway and are not used
	internally in the real substructure routines. In the unlikely event 
	of them being found to be used in an external program we'll have to 
	find another fix. 

	* Removed OBConversion::GetDimension(),SetDimension(),SetTitle(),
	Redefined SetTitle() to return InFileName as a c_str.
	Made return type of strrchr() const char* (picky compiler). 
	
	* src/formats/CSRformat.cpp,PQSformat.cpp,alchemyformat.cpp,balstformat.cpp,
	bgfformat.cpp,boxformat.cpp,acaoformat.cpp,acheformat.cpp,
	chem3dformat.cpp,chemdrawformat.cpp,chemtoolformat.cpp,
	crkformat.cpp,cssrformat.cpp,dmolformat.cpp,featformat.cpp,
	fhformat.cpp,amessformat.cpp,gaussformat.cpp,ghemicalformat.cpp,
	grosmos96format.cpp,hinformat.cpp,jaguarformat.cpp,mm3format.cpp,
	mmodformat.cpp,mol2format.cpp,mopacformat.cpp,mpqcformat.cpp,
	nwchemformat.cpp,pdbformat.cpp,povrayformat.cpp,qchemformat.cpp,
	smilesformat.cpp,tinkerformat.cpp,unichemformat.cpp,viewmolformat.cpp,
	xedformat.cpp,xyzformat.cpp,zindoformat.cpp:
	Removed
	    const char *dimension = pConv->GetDimension();
	
	* src/formats/cmlformat.cpp, mdlformat.cpp, pqsformat.cpp: 
	changes to dimension handling (now an int not a string).
	
	* src/bitvec.h: replace EXTERN by OBAPI extern and tidied.
	
	* src/obiter.h: added several OBAPI.
	 
	* src/dlhandler.h, dlhandler_win32.h; Sleep() added.

	* src/main.cpp: Space after -i and -o now allowed (but not yet
	other options with text). I'm told it is more unix.
	Made return type of strchr() const char* (picky compiler).
	Commented out debug code to pause at end (better compiler).
	
	Some other files tidied - removal of unused variables.
	Somewhere else(?) changed a new loop variable name from i to j
	(rubbish old compiler). 

2005-05-06  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/formats/inchi: Updated with InChI v1.0 release code.

	* src/formats/inchiformat.cpp, src/formats/inchi_api.h: Ditto.
	
	* src/formats/inchi/Makefile.am, src/formats/inchi/Makefile.in,
	src/formats/Makefile.am, configure.in, configure:
	Update Makefiles for InChI code.

	* src/fingerprint.cpp, src/kekulize.cpp, src/obutil.cpp,
	src/patty.cpp, src/rotor.cpp: Change error reports 
	to go to cerr instead of cout. OBMessageHandler will soon grab
	cerr, but shouldn't block cout (since it's used for output through
	pipes).

	* src/main.cpp: Send conversion message to clog instead of cerr,
	avoiding problems with OBMessageHandler rerouting cerr.

	* src/mol.h, src/mol.cpp: New methods GetFormula() and
	SetFormula() to handle stoichiometric formulas.

	* src/formats/reportformat.cpp: Use it.

	* src/data.h: New method GetNumberOfElements() to return the
	number of elements in an OBElementTable.

	* src/generic.h: Change SetAttribute to take "const" string
	arguments. Ditto for SetData for OBCommentData and SetValue for
	OBPairData.
	
2005-04-24  Chris Morley  <c.morley@gaseq.co.uk>
	
	* src/obconversion.cpp, src/obconversion.h: 
	Change implementation of inputfile seek position, to prevent
	it being affected by newlines at the end of the file.
	Changed option to ignore errors to -e from -c which was already
	used for centre coordinates. Removed -z option.
	Remove some obsolete commented out code. 

	* src/main.cpp: Removed -z option for using previously stored 
	options. This was conflicting with use with Apache, and was 
	never of enormous benefit anyway.
	
	* src/finger2.cpp, src/fingerprint.h: fingerprint2 revised
	to properly use canonical hash values. Molecules were being missed.
	 
	* src/formats/fastsearchformat.cpp: Ensure datafile file 
	properly read when it is the specified input file.

	* windows/*.*: Updated Windows build files
	

2005-04-19  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* NEWS: Add notes for formats that were changed/deleted.
	
	* configure.in, configure, src/babelconfig.h.in: Update to #define
	OBAPI.

	* test/matrixtest.cpp: Include babelconfig.h.

	* src/bitvec.h: Make sure to define EXTERN if not otherwise
	defined.

	* src/obiter.cpp, src/obiter.h: STL-style iterators (and #define'd
	shorthand) for OBAtom, OBMol, OBBond and OBResidue.
	
	* src/Makefile.am, src/Makefile.in: Add fastsearch.cpp,
	finger2.cpp, obiter.cpp, fastsearch.h, obiter.h.

	* src/formats/Makefile.am, src/formats/Makefile.in: Add
	fastsearchformat.cpp.

	* src/finger2.cpp (RemoveDuplicates): Enforce "const"
	declaration.

	* src/fingerprint.h (fingerprint2): Enforce std:: namespace.
	
	* src/formats/smilesformat.cpp (SpecificationURL): Add pointer to
	Daylight webpage.
	
	* src/formats/mpqcformat.cpp: Add MPQC input format.
	
	* src/formats/qchemformat.cpp, src/formats/povrayformat.cpp,
	src/formats/nwchemformat.cpp, src/formats/CSRformat.cpp,
	src/formats/bgfformat.cpp, src/formats/cacaoformat.cpp,
	src/formats/cacheformat.cpp, src/formats/chemtoolformat.cpp,
	src/formats/hinformat.cpp: Minor fixes to descriptions.

2005-04-17  Chris Morley  <c.morley@gaseq.co.uk>
	
	* src/fastsearch.h, src/fastsearch.cpp,
	src//formats/fastsearchformat.cpp:
	Mod to keep fastsearch index in memory after it has 
	been loaded, to shorten subsequent queries.

2005-04-15  Chris Morley  <c.morley@gaseq.co.uk>
	
	* src/*.h, src/vector3.cpp, windows/OBDLL/OBDLL.dsp
	windows/OBDLL/OBDLL.mak :
	To assist DLL builds, added OBAPI macro to class declarations, 
	global functions and variables in API files. OBAPI needs to
	be set to nothing in babelconfig.h for non-DLL builds. 
	Had to moved the initiallization global variables VZero etc 
	from vector3.h to vector3.cpp, where it should have been anyway.
	OBDLL can now be built in a conventional way. The whole API 
	should be exported but I may have missed some items.

2005-04-13	Chris Morley  <c.morley@gaseq.co.uk>

	*src/fastsearch.cpp, src/formats/fastsearchformat.cpp:
	Separated format from API code.
	Default fingerprint length is now 32 words.
	 
2005-04-12  Chris Morley  <c.morley@gaseq.co.uk>

	* src/finger2.cpp src/fastsearch.h src/fastsearch.cpp:
	Added. (Fastsearch format really needs to be separated and put
	into src/formats.)

	* src/formats/fingerprintformat.cpp: Extensive revision to
	allow choice of fingerprint type and Tanimoto calculation.

	* src/obconversion.h, src/obconversion.cpp (Convert): 
	Changed implementation of OneObjectOnly
	Added capability for the write format to retrieve the seek position
	of the object in the input file: wInpos, GetInPos().
	Added READBINARY and WRITEBINARY options in format flags
	which are implemented when files are opened. Applicable for 
	binary formats (which there are currently none?) in non-unix systems.
	(FullConvert), (OpenAndSetFormat)For VC++6 in Windows, 
	opening all files in binary mode seems to	allow	unix text files 
	to be read. But in case this messes	up Macs or other Windows 
	implementations it is dependent on a macro ALL_READS_BINARY 
	being set in babelconfig.h.

	* src/fingerprint.h, src/fingerprint.cpp (HashFragments):
	Changed h and mod from long int to unsigned int to avoid
	memory corruption with molecules with heavy atoms. Added
	the declarations for fingerprint2 class and global
	GetFingerprint().  

	* src/bitvec.h: Comments to highlight resizing behaviour. 

	* src/format/smilesformat.cpp (OBSmilesParser::ParseSmiles):
	Mod to prevent unpaired ) causing program to hang.

	* windows: Updated build files

2005-04-06  Chris Morley  <c.morley@gaseq.co.uk>

	* src/formats/inchi: added InChI 1.0 files from NIST.

2005-04-01  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* src/obconversion.cpp: Change "Readonly" and "Writeonly" to
	"Read-only" and "Write-only" to match more typical computer
	documentation (e.g., Windows, UNIX and Mac generally use hyphens.)
	
	* src/formats/viewmolformat.cpp (ReadMolecule): Fix
	multiple-molecule support. Read loop would never hit an $end
	record and break, thus reading all molecules in a multi-molecule
	file as one.

	* src/formats/PQSformat.cpp (ReadMolecule): Replace rindex ->
	strrchr for ISO C/C++ compliance. (Fixes problems with compiling
	on MinGW/gcc.)

	* src/formats/inchiformat.cpp: Change for loop to while loop to
	fix compile problems with gcc (and make slightly more readable
	IMHO), change comment to remove "??/" interpreted as a Unicode
	trigraph by gcc, and fix mol.SetTitle() call to fix compilation
	problems with gcc/g++.

	* src/formats/gamessformat.cpp, src/formats/gaussformat.cpp,
	src/formats/nwchemformat.cpp, src/formats/qchemformat.cpp: Break
	read and write support into separate formats since output formats
	are read-only and input formats are write-only.
	
2005-04-01  Chris Morley  <c.morley@gaseq.co.uk>

	* src/formats/inchiformat.cpp, src/formats.inchi_api.h,
	windows/InChI_DLL.dll and windows/InChI_DLL.lib
	my build of version 1.0RC from NIST : writes InChI; format
	is writeonly because reading code, although included is
	incomplete. I haven't put the source code for the DLL up,
	although it is cross-platform, because I want to check with
	NIST first. 
	 
	* src/data.cpp, src/data.h: OBElementTable::GetAtomicNum 
	Changed unsigned short int& to int&. More consistent with other 
	ints since have to use the exact int type when calling. 
	Now used in mdlformat.cpp.

	* src/formats/mdlformat.cpp: V2000 writes and reads isotope info
	(M ISO line),	V2000 V3000 reads D and T. Changes in V2000 
	writing M RAD	and header. Is #include <iomanip> a problem? 

2005-03-25  Chris Morley  <c.morley@gaseq.co.uk>

	* src/obconversion.cpp, src/main.cpp, src/obconversion.h:
	Multiple input files can now be different formats
	
	* src/onconversion.h: Added virtual function 
	OBFormat::MakeNewInstance to meet possible future need for
	formats with member functions. (InChIFormat will.)

	* src/formats/smilesformat.cpp: Can now output isotope info and 
	input and output H and H2. Pharma might be able to do without 
	these but Combustion can't.
	
	* windows/OBGUI/ Several files: Mods to ease use with multiple 
	input files, but interface could still do with some work. 
	
2005-03-23  Geoffrey Hutchison  <babel@geoffhutchison.net>

	* AUTHORS, NEWS, README: Begin updating for a 2.0 release.

	* data/extable.txt: Mark as deprecated. (Should this be deleted?)

	* src/*.h, src/*.cpp, src/math/*.cpp, src/math/*.h,
	src/formats/*.cpp, tools/*.cpp, test/*.cpp: Update copyright
	statements to include 2005 and standardize text.

	* data/Makefile.am: Make sure to include *.h files in a distribution.

	* src/Makefile.am: Make sure to include dlhandler.h,
	obconversion.h, and reaction.h in a distribution.

	* src/formats/Makefile.am: Make sure to install obmolecformat.h
	and include in distribution.

	* data/Makefile.in, src/Makefile.in, src/formats/Makefile.in:
	Regenerated.
	
	* src/generic.h: Expand obDataType to include more typical
	chemical data and offer 16 custom data slots obData0 through
	obData15. In particular, adds obConformerData and obSymmetryData
	for future enhancements.

	* src/obutil.cpp, src/tokenst.cpp, src/typer.h: Added more doxygen
	documentation.

	* tools/obfit.cpp: Further improvements from Konrad -- now loops
	through multiple matches to fit the match with the smallest RMSD.

2005-03-07  Geoff Hutchison  <babel@geoffhutchison.net>

	* src/formats/cml.cpp (endMolecule): Only call InternalToCartesian
	if required (i.e., only internal coords available, all cartesian
	coords are zero) and only call bonding methods (ConnectTheDots and
	PerceiveBondOrders) if needed. Provides a huge performance
	increase on most files.

	* tools/obfit.cpp: Modified to output an RMSD of the fit as
	contributed by Konrad Koehler. Addresses PR#1157440.

2005-03-02  Geoff Hutchison  <babel@geoffhutchison.net>

	* src/parsmart.cpp (OBSSMatch::Match): Added check to prevent
	accessing atoms that do not exist -- appears in PR#1119970.

2005-03-02  Chris Morley  <c.morley@gaseq.co.uk>

	* src/mol.h, babelconfig.h Move some DLL-related #defines
	to babelconfig.h

	* src/oberror.h Declare global obErrorLog here to aid DLL builds.

	Update Windows build files

2005-02-27  Geoff Hutchison  <babel@geoffhutchison.net>

	* src/atom.cpp (GetType): Call global OBTypeTable ttab rather than
	declaring a local version.

	* src/mol.cpp (RenumberAtoms): Add documentation and return
	without action if supplied vector is the wrong size.

2005-02-27  Chris Morley  <c.morley@gaseq.co.uk>

	* src/obconversion.cpp: Removed ThrowError and #include mol.h
	Added -c option for continuing with next molecule after an error
	
2005-02-17  Geoff Hutchison  <babel@geoffhutchison.net>

	* src/formats/ghemicalformat.cpp (ReadMolecule): Add some initial
	support for ghemical 1.5x files. Reported by Avell Diroll.

	* src/formats/mdlformat.cpp (ReadMolecule): Improve flexibility in
	handling non-standard SDFiles. Now handles "VAMP" output, thanks
	to an example file from Dr. James Smith, Erlangen.

	* src/data.h, src/data.cpp (OBElementTable::GetAtomicNum): Fix bug
	with isotope support as pointed out by Chris Morley -- need to
	pass a reference back to the isotope value. Added a
	backwards-compatible one-argument function which throws away the
	isotope value.

	* src/obconversion.cpp (Convert): Throw a debugging error if the
	ReadChemObject method returns false.

	* aclocal.m4, config.guess, config.sub, install-sh, ltmain.sh,
	missing, mkinstalldirs: Update with latest GNU versions from
	Automake 1.9.5 and libtool 1.5.14.

	* configure, */Makefile.in: Updated automatically from above.

2005-02-15  Geoff Hutchison  <babel@geoffhutchison.net>

	* src/formats/mdlformat.cpp (ReadMolecule): Fix bug where long
	property lines would set ifs.fail() and consequently file appeared
	to be at EOF. Since property lines can be >1024 bytes, read
	using std::getline(ifs,string). Fixes PR#1120738, thanks to
	Dr. Christian Laggner for the bug report.

	* doc/Makefile.am: Fix bug in doxygen rule.

	* configure, configure.in, */Makefile.in: Regnerated.
	
	* src/data.cpp, src/data.h (CorrectedBondRad): Change to use
	covalent radii -- this is used internally in many places and
	cannot easily be removed. Add more doxygen documentation.

2005-02-10  Geoff Hutchison  <babel@geoffhutchison.net>

	* src/mol.cpp (operator+): Fix PR#119352 to copy bond flag
	information when adding bonds. Thanks to Daen de Leon for the bug
	report and fix.

2005-02-09  Geoff Hutchison  <babel@geoffhutchison.net>

	* data/atomtyp.txt: Change implicit valence rules for acidic
	oxygens -- ensure default AddHydrogen() response is to add acidic
	protons, but correctForPH will not. Fixes PR # 1106706.

	* data/atomtyp.h: Update using bin2hex.pl.
	
	* doc/babel.1: Update for new options.

	* src/mol.h: Add oberror.h and update documentation and
	indentation. Add OB_POS_CHIRAL_ATOM and OB_NEG_CHIRAL_ATOM flags for
	marking + and - chiral volume and accessor methods.
	
	* src/chiral.cpp(GetChirality): Set + and - chiral volume for
	atoms using these methods.

	* src/main.cpp: Update to handle -imime and -omime flags to set
	format by supplied MIME type.

	* src/obconversion.cpp, src/obconversion.h: Update to handle MIME
	types with an additional format map with RegisterFormat(), rather
	than "polluting" the extension map.

	* src/formats/alchemyformat.cpp, src/formats/cmlformat.cpp,
	src/formats/crkformat.cpp, src/formats/mdlformat.cpp,
	src/formats/mmodformat.cpp, src/formats/mol2format.cpp,
	src/formats/mopacformat.cpp, src/pdbformat.cpp,
	src/smilesformat.cpp: Register MIME types with the new MIME map as
	above.

	* src/oberror.cpp: Add a global OBMessageHandler obErrorLog.

	* src/obutil.cpp (ThrowError): Update to use obErrorLog -- to
	migrate code to the new error logging OBMessageHandler class.
	
	* src/bitvec.cpp, src/mol.cpp, src/phmodel.cpp, src/rotor.cpp,
	src/formats/chem3dformat.cpp, src/xyzformat.cpp: Update
	ThrowError() calls to use obErrorLog as above.

	* configure.in: Add support to conditionally build documentation
	if doxygen is availale. Not currently used.

	* */Makefile.in: Update using automake for above.
	
2005-02-09  Chris Morley  <c.morley@gaseq.co.uk>

	* src/obconversion.h, src/obconversion.h.cpp: Added
	OBFormat::SkipObjects and its use in Convert and SetStartAndEnd 
	
	* src/formats/mdlformat.cpp: Changed wording in option
	description. "Default" means something in Windows GUI!
	Added SkipObjects()
	Added output of wedge and hash in V2000 as suggested previously
	in a discuusion(?). But stereochemistry needs revisiting!   
	
	* src/formats/smilesformat.cpp: ReadMolecule erroneously always
	returned true, now corrected. Removed SMIFormat::SmiToMol()
	Added SkipObjects()
	Added support for input of radicals like[O.]  	

2005-01-31  Chris Morley  <c.morley@gaseq.co.uk>

	* src/obconversion.h, src/obconversion.h.cpp: rationalized
	SetInFormat, etc; Added GetInFile; corrected bug in IsOption  

	* src/main.cpp: added -? option as synonym of -H 
	Check for empty FileList;  
	In Windows moved saved options file from current folder to TEMP

2005-01-30  Geoff Hutchison  <babel@geoffhutchison.net>

	* src/bondtyper.cpp (ParseLine): Make sure loop variable "i" is
	initialized, pointed out by Chris Morley.

	* data/element.txt: Add note about deprecated "bond order" radii.

	* src/base.h: Remove \defgroup documentation bits.

	* src/data.h (OBElementTable): Mark bond order radii methods as
	deprecated.

	* src/chiral.cpp: Add std:: namespace to match headers for
	documentation. Convert comments to doxygen docs.

	* src/data.cpp (OBGlobalDataBase): When searching for data files,
	check the environment variable directories, then the compiled-in
	directory path -- starting with a subdirectory for BABEL_VERSION,
	followed by the parent directory. Allows for versioning the data
	files.

	* src/main.cpp: Output "molecules converted" to cerr and use
	"molecule" converted if only one molecule was found.

	* src/mol.h: Add documentation about "up" and "down" bond flags
	vs. wedge and hash types.

	* src/obconversion.h, src/obconversion.cpp: Allow MIME types to be
	registered to match particular extensions/IDs.

	* src/oberror.h, src/oberror.cpp: New class OBMessageHandler to
	organize errors/messages and allow errors to go to cerr or another
	output stream. Allows filtering of error levels.

	* src/formats/carformat.cpp: Correct a variety of problems with
	reading multiple molecules in a CAR file and read in 3D unit cell
	information if supplied. Bugs reported by Jean Dessolin. Fixes PR#
	1060110.

	* src/smilesformat.cpp: Set OBMol dimension to 0.

	* src/mdlformat.cpp: Output v3000 files for >999 atoms or >999
	bonds, as suggested by MDL standard specification. Set OBMol
	dimension as needed.

	* src/crkformat.cpp (CRK2DFormat::ReadCRK): Fix bugs with
	wedge/hash and up/down bonds. Assign OBMol dimension to 2.

	* src/cml.cpp: Ditto.

	* src/chemdrawformat.cpp (ReadMolecule): Set OBMol dimension to 2.
	
	* src/formats/*.cpp: Ensure consistency of format description
	naming, particularly to match Open Babel 1.100.x and Babel 1.6.
	
2005-01-20  Geoff Hutchison  <babel@geoffhutchison.net>

	* src/main.cpp: For non-Win32 platforms, use $HOME/.openbabel to
	store recent options -- keeping with standard UNIX practices.

	* src/rotamer.cpp, src/rotamer.h: Move OBRotamerList from
	now-defunct binary.* files to specific rotamer files -- binary
	format is now obsolete.

	* src/Makefile.am: Remove binary.* and rename to rotamer.*.

	* tools/obrotate.cpp: Rename binary.h to rotamer.h
	
	* src/data.cpp, src/data.h: Excise io_type and OBExtensionTable.

	* data/extable.h, data/extable.txt: Ditto.

	* data/Makefile.am: Ditto.

	* tools/*.cpp: Ditto.

	* src/formats/cml.cpp: Remove reference to GetInputType and
	GetOutputType.

	* src/mol.h, src/mol.cpp: Add OBMol:_dimension, along with
	accessor methods GetDimension() and SetDimension() for specifying
	the dimension of the OBMol coordinates. Default is 3 for now --
	conversion or user code must specify this! Among other PRs, fixed
	PR# 110671.

2005-01-19  Geoff Hutchison  <babel@geoffhutchison.net>

	* src/bondtyper.h src/bondtyper.cpp: New method
	AssignFunctionalGroupBonds() to replace code in
	mol.cpp::PerceiveBondOrders() -- assigns generic SMARTS patterns
	and then angle/distance constrained SMARTS patterns (like
	carbonyl).

	* src/mol.cpp: Use the new OBBondTyper method above.

	* configure, aclocal.m4, config.guess, config.sub, ltmain.sh,
	 */Makefile.in: Update with latest automake/libtool/autoconf
	versions (automake-1.9.4, libtool-1.5.10 autoconf 2.59).

2005-01-13  Chris Morley  <c.morley@gaseq.co.uk>

	* src/formats/obmoleculeformat.h: Added. Class to reduce code duplication.  
	* src/formats/mdlformat.cpp: added V3000 support   
	* src/formats/smilesformat.cpp: added option for radical output as lc  
	* src/formats/fingerprintformat.cpp Added. 

2005-01-13  Chris Morley  <c.morley@gaseq.co.uk>

	Correct number of implicit hydrogens in radicals
	Previously used decremented implicit valency which sometimes was reset;
	now correct with _spinmultiplicity. 
	* src/atom.cpp (ImplicitHydrogenCount): add code   
	* src/mol.cpp (AddHydrogens): (2 routines) add code
	* src/mol.cpp (AssignSpinMultiplicity): remove code

2005-01-12  Chris Morley  <c.morley@gaseq.co.uk>

	* src/dlhandler.h: Add findFiles decl needed for Windows builds  

2005-01-09  Chris Morley  <c.morley@gaseq.co.uk>

	* windows/*.dsp, *.mak: Synchronize Windows build files to handle 
	changed file locations and extra source files
	* windows/OBDLL/map2def2.exe added  
	* windows/babelconfig.h updated  

2005-01-07  Geoff Hutchison  <babel@geoffhutchison.net>

	* src/obconversion.h (GetMIMEType): New method for chemical MIME
	support.

	* src/formats/*.cpp: Update file extensions for formats for
	lower-case and previous Babel standards. Added MIME types where
	appropriate.

2005-01-06  Geoff Hutchison  <babel@geoffhutchison.net>

	* src/main.cpp, src/obconversion.cpp, src/obconversion.h: Updated
	files from Chris Morley.

2005-01-01  Geoff Hutchison  <babel@geoffhutchison.net>

	* tools/obfit.cpp, tools/obgrep.cpp, tools/obprop.cpp,
	tools/obrotate.cpp, tools/obtanimoto.cpp: Update to use the
	OBConversion framework.

	* src/formats/*.cpp: Clean out formats which don't currently have
	format specification URLs.

2004-12-23  Geoff Hutchison  <babel@geoffhutchison.net>

	* *.cpp, *.h: Reformat using astyle --style=ansi.

	* src/mol.cpp(PerceiveBondOrders): Fix thinko with abs() calls.

	* src/formats/Makefile.am: Fix typos preventing all format files
	from being compiled.

	* src/formats/cml.cpp: Pull iterator variables out of for()
	declarations to fix compilation problems.

	* src/formats/turbomoleformat.cpp: Remove call to strlwr() which
	is a non-ANSI (non-ISO) function call.

	* test/ringtest.cpp, test/smartstest.cpp, test/rountrip.cpp:
	Convert to using OBConversion from OBFileFormat.

2004-10-19  Geoff Hutchison  <babel@geoffhutchison.net>

	* Initial merging of Chris Morley's new file translation framework.
	Compiles and runs through "babel -H".

	* data/* : Move data files and headers to this directory to
	segregate from source code.

	* configure.in, Makefile.am, */Makefile.am: Build updates.

	* src/: Removed all file translation files. (Now in formats directory.)
	
	* src/formats/*: New files.

	* src/windows/*: Removed.
	
	* windows/*: New files.

2004-10-04  Michael Banck  <mbanck@gmx.net>

	* src/crk.cpp: Use sstream if present and strstream if not.
	
2004-28-30  Fabien Fontaine  <ffontaine@imim.es>

	* tools/obtanimoto.cpp : new tool
	* tools/README:      update
	* tools/makefile.am  update

2004-27-30  Fabien Fontaine  <ffontaine@imim.es>

	* src/fingerprint.cpp: New output format
	* src/fingerprint.h
	* src/Makefile.am (libopenbabel_la_SOURCES): Added fingerprint.cpp.
	* src/data.cpp (TextToType): Added FINGERPRINT typestring.
	* src/data.h (io_type): Added FINGERPRINT.
	* src/extable.txt: Added fingerprint entry for writing.
	* src/extable.h: Regenerated.
	* src/fileformat.cpp (ReadMolecule): Added fingerprint handler.
	(WriteMolecule): Likewise.
	* src/fileformat.h (WriteFingerprint): Declare it.
	
2004-09-10  Michael Banck  <mbanck@gmx.net>

	* src/turbomole.cpp: New file.
	* src/Makefile.am (libopenbabel_la_SOURCES): Added turbomole.cpp.
	* src/data.cpp (TextToType): Added TURBOMOLE typestring.
	* src/data.h (io_type): Added TURBOMOLE.
	* src/extable.txt: Added turbomole entry for reading and writing.
	* src/extable.h: Regenerated.
	* src/fileformat.cpp (ReadMolecule): Added Turbomole handler.
	(WriteMolecule): Likewise.
	* src/fileformat.h (ReadTurbomole): Declare it.
	(WriteTurbomole): Likewise.

2004-08-30  Fabien Fontaine  <ffontaine@imim.es>

	* src/mol.cpp bond.cpp kekulize.cpp: Kekulize function changed to
	what it was before. PerceiveBondOrders replaced by 
	NewPerceiveBondOrders. SetK* functions added to NewPerceiveBondOrders
	
2004-08-27  Michael Banck  <mbanck@gmx.net>

	* mol.h (tokenize): Initialize *delimstr to " \t\n" for the
	version of the function using strings as well.

2004-08-25  Fabien Fontaine  <ffontaine@imim.es>

	* src/mol.cpp: Kekulize is replaced by a new kekulize function
	situated in kekulize.cpp

	* src/mol.cpp (PerceiveBondOrders): New SMART pattern added
	some decision are taken according to the geometry of the bonds

2004-08-24  Fabien Fontaine  <ffontaine@imim.es>

	* src/mol.cpp (PerceiveBondOrders): Bug in calculation of 
	average torsion angles of cycles fixed.

	* src/atom.cpp: function AverageBondAngle added.
	
2004-08-19  Michael Banck  <mbanck@gmx.net>

	* src/data.cpp: Include mol.h.
	(tokenize): Removed declaration, already declared in mol.h.

	* src/mol.h [OBDLL_EXPORTS, USING_OBDLL]: redefine extern as
	'__declspec(dllexport) extern'. Update global definitions
	accordingly.
	
2004-08-17  Geoff Hutchison  <ghutchis@wso.williams.edu>

	* configure.in: Make the check for doxygen to be a typical
	AC_PATH_PROG -- it's not a critical dependency.
	
	* configure, aclocal.m4, config.guess, config.sub, ltmain.sh,
	 */Makefile.in: Update with latest automake/libtool/autoconf
	versions (automake-1.9.1, libtool-1.5.8 autoconf 2.59).

	* src/isotope-small.txt, src/isotope.txt: Update with latest data
	from 2003 canonical data. 

2004-07-20  Geoff Hutchison  <ghutchis@wso.williams.edu>

	* src/ghemical.cpp: Ignore multiple coordinate sets -- only read
	the first one currently, but don't bail if more than one exists.

	* src/cssr.cpp: Update with unit cell information and fixing bugs
	reported by Mathias Weigt when dealing with SOMFA package.

2004-07-02  Michael Banck  <mbanck@gmx.net>

	* src/obutil.cpp (InternalToCartesian): avec, bvec, cvec, dst, ang,
	tor: New short circuit variables. Start index at zero again. Fix
	torsion angle of the fourth atom. Thanks to Gerd Menche.

2004-03-13  Michael Banck  <mbanck@gmx.net>

	* test/unitcell.cpp (TestUnitCell): Use %lf instead of %f to read
	in the values from unitcell.txt.

2004-03-07  Geoff Hutchison  <ghutchis@wso.williams.edu>

	* src/chdrw.cpp (ReadChemDraw): Add support for reading ChemDraw
	CT files.

	* src/data.h, src/data.cpp: Change GAUSSIANZMAT to GAUSSIANOUT to
	allow support for reading G98 and G03 output.

	* src/extable.txt: Add ChemDraw reading and Gaussian 98/03 output
	to list.

	* src/fileformat.h, src/fileformat.cpp: Ditto.

	* src/extable.h: Regenerate.

	* src/gaussian.cpp: Add support for reading G98/G03 output and
	writing isotopes where applicable.

	* src/hin.cpp: Fix bug with more recent HIN formats with basis set
	information.

	* configure, Makefile.in, */Makefile.in: Update with latest
	autotools.

	* src/mol.cpp, src/mol.h: Backpedal slightly with Fabien's
	2003-12-17 changes. Use OB_TSPIN_MOL as used by 1.100.2 and
	revised AssignSpinMultiplicty to assign OBMol::_tspin.

2004-03-03  Michael Banck  <mbanck@gmx.net>

	Fixes to make InternalToCartesian() and ReadQChem() consistent
	with CartesianToInternal(), so that round-tripping between
	InternalToCartesian() and CartesianToInternal() is
	possible. Thanks to Gerd Menche for the fix.

	* src/obutil.cpp (InternalToCartesian): Initialize index as
	atom->GetIdx() rather than atom->GetIdx() - 1. Subsequently,
	increase the index checks for the first three atoms by one.
	Convert angles to radians before computing cartesian
	coordinates.

	* src/qchem.cpp (ReadQChem): Uncommented the z-matrix reading
	code. Generate one empty internal coordinate in advance.
	Replaced loop until end of block in input file with a for loop
	over the existing atoms. Do not generate new atoms in the loop,
	as they are already present. Do not convert angles to radians
	any more, this is now done in InternalToCartesian().

2004-02-29  Michael Banck  <mbanck@gmx.net>

	Merged changes from openbabel-1-100-x branch back into HEAD.

	* src/pqs.cpp: New file.
	* NEWS: Updated from 1.100.2 release.
	* ChangeLog: Fixed some tabs.

